
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>API &#8212; dogpile.cache 1.1.1 documentation</title>
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/nature_override.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/changelog.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx_paramlinks.css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Changelog" href="changelog.html" />
    <link rel="prev" title="dogpile Core" href="core_usage.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="changelog.html" title="Changelog"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="core_usage.html" title="dogpile Core"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">dogpile.cache 1.1.1 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">API</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="api">
<h1>API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-dogpile.cache.region">
<span id="region"></span><h2>Region<a class="headerlink" href="#module-dogpile.cache.region" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="dogpile.cache.region.CacheRegion">
<em class="property">class </em><code class="sig-prename descclassname">dogpile.cache.region.</code><code class="sig-name descname">CacheRegion</code><span class="sig-paren">(</span><em class="sig-param">name: Optional[str] = None, function_key_generator: Callable[[...], Callable[[...], str]] = &lt;function function_key_generator&gt;, function_multi_key_generator: Callable[[...], Callable[[...], Sequence[str]]] = &lt;function function_multi_key_generator&gt;, key_mangler: Optional[Callable[[str], str]] = None, serializer: Optional[Callable[[Any], bytes]] = None, deserializer: Optional[Callable[[bytes], Any]] = None, async_creation_runner: Optional[Callable[[CacheRegion, str, Callable[[], Any], dogpile.cache.api.CacheMutex], None]] = None</em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.region.CacheRegion" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A front end to a particular cache backend.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="dogpile.cache.region.CacheRegion.params.name"></span><strong>name</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.region.CacheRegion.params.name">¶</a> – Optional, a string name for the region.
This isn’t used internally
but can be accessed via the <code class="docutils literal notranslate"><span class="pre">.name</span></code> parameter, helpful
for configuring a region from a config file.</p></li>
<li><p><span class="target" id="dogpile.cache.region.CacheRegion.params.function_key_generator"></span><strong>function_key_generator</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.region.CacheRegion.params.function_key_generator">¶</a> – <p>Optional.  A
function that will produce a “cache key” given
a data creation function and arguments, when using
the <a class="reference internal" href="#dogpile.cache.region.CacheRegion.cache_on_arguments" title="dogpile.cache.region.CacheRegion.cache_on_arguments"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.cache_on_arguments()</span></code></a> method.
The structure of this function
should be two levels: given the data creation function,
return a new function that generates the key based on
the given arguments.  Such as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">my_key_generator</span><span class="p">(</span><span class="n">namespace</span><span class="p">,</span> <span class="n">fn</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
    <span class="n">fname</span> <span class="o">=</span> <span class="n">fn</span><span class="o">.</span><span class="vm">__name__</span>
    <span class="k">def</span> <span class="nf">generate_key</span><span class="p">(</span><span class="o">*</span><span class="n">arg</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">namespace</span> <span class="o">+</span> <span class="s2">&quot;_&quot;</span> <span class="o">+</span> <span class="n">fname</span> <span class="o">+</span> <span class="s2">&quot;_&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">arg</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">generate_key</span>


<span class="n">region</span> <span class="o">=</span> <span class="n">make_region</span><span class="p">(</span>
    <span class="n">function_key_generator</span> <span class="o">=</span> <span class="n">my_key_generator</span>
<span class="p">)</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span>
    <span class="s2">&quot;dogpile.cache.dbm&quot;</span><span class="p">,</span>
    <span class="n">expiration_time</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span>
    <span class="n">arguments</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;filename&quot;</span><span class="p">:</span><span class="s2">&quot;file.dbm&quot;</span>
    <span class="p">}</span>
<span class="p">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">namespace</span></code> is that passed to
<a class="reference internal" href="#dogpile.cache.region.CacheRegion.cache_on_arguments" title="dogpile.cache.region.CacheRegion.cache_on_arguments"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.cache_on_arguments()</span></code></a>.  It’s not consulted
outside this function, so in fact can be of any form.
For example, it can be passed as a tuple, used to specify
arguments to pluck from **kw:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">my_key_generator</span><span class="p">(</span><span class="n">namespace</span><span class="p">,</span> <span class="n">fn</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">generate_key</span><span class="p">(</span><span class="o">*</span><span class="n">arg</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;:&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                <span class="p">[</span><span class="n">kw</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">namespace</span><span class="p">]</span> <span class="o">+</span>
                <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">arg</span><span class="p">]</span>
            <span class="p">)</span>
    <span class="k">return</span> <span class="n">generate_key</span>
</pre></div>
</div>
<p>Where the decorator might be used as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@my_region</span><span class="o">.</span><span class="n">cache_on_arguments</span><span class="p">(</span><span class="n">namespace</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">my_function</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">my_data</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#dogpile.cache.util.function_key_generator" title="dogpile.cache.util.function_key_generator"><code class="xref py py-func docutils literal notranslate"><span class="pre">function_key_generator()</span></code></a> - default key generator</p>
<p><a class="reference internal" href="#dogpile.cache.util.kwarg_function_key_generator" title="dogpile.cache.util.kwarg_function_key_generator"><code class="xref py py-func docutils literal notranslate"><span class="pre">kwarg_function_key_generator()</span></code></a> - optional gen that also
uses keyword arguments</p>
</div>
</p></li>
<li><p><span class="target" id="dogpile.cache.region.CacheRegion.params.function_multi_key_generator"></span><strong>function_multi_key_generator</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.region.CacheRegion.params.function_multi_key_generator">¶</a> – <p>Optional.
Similar to <code class="docutils literal notranslate"><span class="pre">function_key_generator</span></code> parameter, but it’s used in
<a class="reference internal" href="#dogpile.cache.region.CacheRegion.cache_multi_on_arguments" title="dogpile.cache.region.CacheRegion.cache_multi_on_arguments"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.cache_multi_on_arguments()</span></code></a>. Generated function
should return list of keys. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">my_multi_key_generator</span><span class="p">(</span><span class="n">namespace</span><span class="p">,</span> <span class="n">fn</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
    <span class="n">namespace</span> <span class="o">=</span> <span class="n">fn</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">+</span> <span class="p">(</span><span class="n">namespace</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">generate_keys</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">namespace</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">args</span><span class="p">]</span>

    <span class="k">return</span> <span class="n">generate_keys</span>
</pre></div>
</div>
</p></li>
<li><p><span class="target" id="dogpile.cache.region.CacheRegion.params.key_mangler"></span><strong>key_mangler</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.region.CacheRegion.params.key_mangler">¶</a> – Function which will be used on all incoming
keys before passing to the backend.  Defaults to <code class="docutils literal notranslate"><span class="pre">None</span></code>,
in which case the key mangling function recommended by
the cache backend will be used.    A typical mangler
is the SHA1 mangler found at <a class="reference internal" href="#dogpile.cache.util.sha1_mangle_key" title="dogpile.cache.util.sha1_mangle_key"><code class="xref py py-func docutils literal notranslate"><span class="pre">sha1_mangle_key()</span></code></a>
which coerces keys into a SHA1
hash, so that the string length is fixed.  To
disable all key mangling, set to <code class="docutils literal notranslate"><span class="pre">False</span></code>.   Another typical
mangler is the built-in Python function <code class="docutils literal notranslate"><span class="pre">str</span></code>, which can be used
to convert non-string or Unicode keys to bytestrings, which is
needed when using a backend such as bsddb or dbm under Python 2.x
in conjunction with Unicode keys.</p></li>
<li><p><span class="target" id="dogpile.cache.region.CacheRegion.params.serializer"></span><strong>serializer</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.region.CacheRegion.params.serializer">¶</a> – <p>function which will be applied to all values before
passing to the backend.  Defaults to <code class="docutils literal notranslate"><span class="pre">None</span></code>, in which case the
serializer recommended by the backend will be used.   Typical
serializers include <code class="docutils literal notranslate"><span class="pre">pickle.dumps</span></code> and <code class="docutils literal notranslate"><span class="pre">json.dumps</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.1.0.</span></p>
</div>
</p></li>
<li><p><span class="target" id="dogpile.cache.region.CacheRegion.params.deserializer"></span><strong>deserializer</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.region.CacheRegion.params.deserializer">¶</a> – <p>function which will be applied to all values returned
by the backend.  Defaults to <code class="docutils literal notranslate"><span class="pre">None</span></code>, in which case the
deserializer recommended by the backend will be used.   Typical
deserializers include <code class="docutils literal notranslate"><span class="pre">pickle.dumps</span></code> and <code class="docutils literal notranslate"><span class="pre">json.dumps</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.1.0.</span></p>
</div>
</p></li>
<li><p><span class="target" id="dogpile.cache.region.CacheRegion.params.async_creation_runner"></span><strong>async_creation_runner</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.region.CacheRegion.params.async_creation_runner">¶</a> – <p>A callable that, when specified,
will be passed to and called by dogpile.lock when
there is a stale value present in the cache.  It will be passed the
mutex and is responsible releasing that mutex when finished.
This can be used to defer the computation of expensive creator
functions to later points in the future by way of, for example, a
background thread, a long-running queue, or a task manager system
like Celery.</p>
<p>For a specific example using async_creation_runner, new values can
be created in a background thread like so:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">threading</span>

<span class="k">def</span> <span class="nf">async_creation_runner</span><span class="p">(</span><span class="n">cache</span><span class="p">,</span> <span class="n">somekey</span><span class="p">,</span> <span class="n">creator</span><span class="p">,</span> <span class="n">mutex</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39; Used by dogpile.core:Lock when appropriate  &#39;&#39;&#39;</span>
    <span class="k">def</span> <span class="nf">runner</span><span class="p">():</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">creator</span><span class="p">()</span>
            <span class="n">cache</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">somekey</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="n">mutex</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>

    <span class="n">thread</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">runner</span><span class="p">)</span>
    <span class="n">thread</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>


<span class="n">region</span> <span class="o">=</span> <span class="n">make_region</span><span class="p">(</span>
    <span class="n">async_creation_runner</span><span class="o">=</span><span class="n">async_creation_runner</span><span class="p">,</span>
<span class="p">)</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span>
    <span class="s1">&#39;dogpile.cache.memcached&#39;</span><span class="p">,</span>
    <span class="n">expiration_time</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
    <span class="n">arguments</span><span class="o">=</span><span class="p">{</span>
        <span class="s1">&#39;url&#39;</span><span class="p">:</span> <span class="s1">&#39;127.0.0.1:11211&#39;</span><span class="p">,</span>
        <span class="s1">&#39;distributed_lock&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">}</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Remember that the first request for a key with no associated
value will always block; async_creator will not be invoked.
However, subsequent requests for cached-but-expired values will
still return promptly.  They will be refreshed by whatever
asynchronous means the provided async_creation_runner callable
implements.</p>
<p>By default the async_creation_runner is disabled and is set
to <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.4.2: </span>added the async_creation_runner
feature.</p>
</div>
</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="dogpile.cache.region.CacheRegion.actual_backend">
<em class="property">property </em><code class="sig-name descname">actual_backend</code><a class="headerlink" href="#dogpile.cache.region.CacheRegion.actual_backend" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the ultimate backend underneath any proxies.</p>
<p>The backend might be the result of one or more <code class="docutils literal notranslate"><span class="pre">proxy.wrap</span></code>
applications. If so, derive the actual underlying backend.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.6.6.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.region.CacheRegion.cache_multi_on_arguments">
<code class="sig-name descname">cache_multi_on_arguments</code><span class="sig-paren">(</span><em class="sig-param">namespace: Optional[str] = None, expiration_time: Optional[Union[float, Callable[[], float]]] = None, should_cache_fn: Optional[Callable[[Any], bool]] = None, asdict: bool = False, to_str: Callable[[Any], str] = &lt;class 'str'&gt;, function_multi_key_generator: Optional[Callable[[...], Callable[[...], Sequence[str]]]] = None</em><span class="sig-paren">)</span> &#x2192; Callable<span class="p">[</span><span class="p">[</span>Callable<span class="p">[</span><span class="p">[</span><span class="p">…</span><span class="p">]</span><span class="p">, </span>Sequence<span class="p">[</span>Any<span class="p">]</span><span class="p">]</span><span class="p">]</span><span class="p">, </span>Callable<span class="p">[</span><span class="p">[</span><span class="p">…</span><span class="p">]</span><span class="p">, </span>Union<span class="p">[</span>Sequence<span class="p">[</span>Any<span class="p">]</span><span class="p">, </span>Mapping<span class="p">[</span>str<span class="p">, </span>Any<span class="p">]</span><span class="p">]</span><span class="p">]</span><span class="p">]</span><a class="headerlink" href="#dogpile.cache.region.CacheRegion.cache_multi_on_arguments" title="Permalink to this definition">¶</a></dt>
<dd><p>A function decorator that will cache multiple return
values from the function using a sequence of keys derived from the
function itself and the arguments passed to it.</p>
<p>This method is the “multiple key” analogue to the
<a class="reference internal" href="#dogpile.cache.region.CacheRegion.cache_on_arguments" title="dogpile.cache.region.CacheRegion.cache_on_arguments"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.cache_on_arguments()</span></code></a> method.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@someregion</span><span class="o">.</span><span class="n">cache_multi_on_arguments</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">generate_something</span><span class="p">(</span><span class="o">*</span><span class="n">keys</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">[</span>
        <span class="n">somedatabase</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">keys</span>
    <span class="p">]</span>
</pre></div>
</div>
<p>The decorated function can be called normally.  The decorator
will produce a list of cache keys using a mechanism similar to
that of <a class="reference internal" href="#dogpile.cache.region.CacheRegion.cache_on_arguments" title="dogpile.cache.region.CacheRegion.cache_on_arguments"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.cache_on_arguments()</span></code></a>, combining the
name of the function with the optional namespace and with the
string form of each key.  It will then consult the cache using
the same mechanism as that of <a class="reference internal" href="#dogpile.cache.region.CacheRegion.get_multi" title="dogpile.cache.region.CacheRegion.get_multi"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.get_multi()</span></code></a>
to retrieve all current values; the originally passed keys
corresponding to those values which aren’t generated or need
regeneration will be assembled into a new argument list, and
the decorated function is then called with that subset of
arguments.</p>
<p>The returned result is a list:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result</span> <span class="o">=</span> <span class="n">generate_something</span><span class="p">(</span><span class="s2">&quot;key1&quot;</span><span class="p">,</span> <span class="s2">&quot;key2&quot;</span><span class="p">,</span> <span class="s2">&quot;key3&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The decorator internally makes use of the
<a class="reference internal" href="#dogpile.cache.region.CacheRegion.get_or_create_multi" title="dogpile.cache.region.CacheRegion.get_or_create_multi"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.get_or_create_multi()</span></code></a> method to access the
cache and conditionally call the function.  See that
method for additional behavioral details.</p>
<p>Unlike the <a class="reference internal" href="#dogpile.cache.region.CacheRegion.cache_on_arguments" title="dogpile.cache.region.CacheRegion.cache_on_arguments"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.cache_on_arguments()</span></code></a> method,
<a class="reference internal" href="#dogpile.cache.region.CacheRegion.cache_multi_on_arguments" title="dogpile.cache.region.CacheRegion.cache_multi_on_arguments"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.cache_multi_on_arguments()</span></code></a> works only with
a single function signature, one which takes a simple list of
keys as arguments.</p>
<p>Like <a class="reference internal" href="#dogpile.cache.region.CacheRegion.cache_on_arguments" title="dogpile.cache.region.CacheRegion.cache_on_arguments"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.cache_on_arguments()</span></code></a>, the decorated function
is also provided with a <code class="docutils literal notranslate"><span class="pre">set()</span></code> method, which here accepts a
mapping of keys and values to set in the cache:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">generate_something</span><span class="o">.</span><span class="n">set</span><span class="p">({</span><span class="s2">&quot;k1&quot;</span><span class="p">:</span> <span class="s2">&quot;value1&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;k2&quot;</span><span class="p">:</span> <span class="s2">&quot;value2&quot;</span><span class="p">,</span> <span class="s2">&quot;k3&quot;</span><span class="p">:</span> <span class="s2">&quot;value3&quot;</span><span class="p">})</span>
</pre></div>
</div>
<p>…an <code class="docutils literal notranslate"><span class="pre">invalidate()</span></code> method, which has the effect of deleting
the given sequence of keys using the same mechanism as that of
<a class="reference internal" href="#dogpile.cache.region.CacheRegion.delete_multi" title="dogpile.cache.region.CacheRegion.delete_multi"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.delete_multi()</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">generate_something</span><span class="o">.</span><span class="n">invalidate</span><span class="p">(</span><span class="s2">&quot;k1&quot;</span><span class="p">,</span> <span class="s2">&quot;k2&quot;</span><span class="p">,</span> <span class="s2">&quot;k3&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>…a <code class="docutils literal notranslate"><span class="pre">refresh()</span></code> method, which will call the creation
function, cache the new values, and return them:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">values</span> <span class="o">=</span> <span class="n">generate_something</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="s2">&quot;k1&quot;</span><span class="p">,</span> <span class="s2">&quot;k2&quot;</span><span class="p">,</span> <span class="s2">&quot;k3&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>…and a <code class="docutils literal notranslate"><span class="pre">get()</span></code> method, which will return values
based on the given arguments:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">values</span> <span class="o">=</span> <span class="n">generate_something</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;k1&quot;</span><span class="p">,</span> <span class="s2">&quot;k2&quot;</span><span class="p">,</span> <span class="s2">&quot;k3&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.5.3: </span>Added <code class="docutils literal notranslate"><span class="pre">get()</span></code> method to decorated
function.</p>
</div>
<p>Parameters passed to <a class="reference internal" href="#dogpile.cache.region.CacheRegion.cache_multi_on_arguments" title="dogpile.cache.region.CacheRegion.cache_multi_on_arguments"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.cache_multi_on_arguments()</span></code></a>
have the same meaning as those passed to
<a class="reference internal" href="#dogpile.cache.region.CacheRegion.cache_on_arguments" title="dogpile.cache.region.CacheRegion.cache_on_arguments"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.cache_on_arguments()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="dogpile.cache.region.CacheRegion.cache_multi_on_arguments.params.namespace"></span><strong>namespace</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.region.CacheRegion.cache_multi_on_arguments.params.namespace">¶</a> – optional string argument which will be
established as part of each cache key.</p></li>
<li><p><span class="target" id="dogpile.cache.region.CacheRegion.cache_multi_on_arguments.params.expiration_time"></span><strong>expiration_time</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.region.CacheRegion.cache_multi_on_arguments.params.expiration_time">¶</a> – if not None, will override the normal
expiration time.  May be passed as an integer or a
callable.</p></li>
<li><p><span class="target" id="dogpile.cache.region.CacheRegion.cache_multi_on_arguments.params.should_cache_fn"></span><strong>should_cache_fn</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.region.CacheRegion.cache_multi_on_arguments.params.should_cache_fn">¶</a> – passed to
<a class="reference internal" href="#dogpile.cache.region.CacheRegion.get_or_create_multi" title="dogpile.cache.region.CacheRegion.get_or_create_multi"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.get_or_create_multi()</span></code></a>. This function is given a
value as returned by the creator, and only if it returns True will
that value be placed in the cache.</p></li>
<li><p><span class="target" id="dogpile.cache.region.CacheRegion.cache_multi_on_arguments.params.asdict"></span><strong>asdict</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.region.CacheRegion.cache_multi_on_arguments.params.asdict">¶</a> – <p>if <code class="docutils literal notranslate"><span class="pre">True</span></code>, the decorated function should return
its result as a dictionary of keys-&gt;values, and the final result
of calling the decorated function will also be a dictionary.
If left at its default value of <code class="docutils literal notranslate"><span class="pre">False</span></code>, the decorated function
should return its result as a list of values, and the final
result of calling the decorated function will also be a list.</p>
<p>When <code class="docutils literal notranslate"><span class="pre">asdict==True</span></code> if the dictionary returned by the decorated
function is missing keys, those keys will not be cached.</p>
</p></li>
<li><p><span class="target" id="dogpile.cache.region.CacheRegion.cache_multi_on_arguments.params.to_str"></span><strong>to_str</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.region.CacheRegion.cache_multi_on_arguments.params.to_str">¶</a> – callable, will be called on each function argument
in order to convert to a string.  Defaults to <code class="docutils literal notranslate"><span class="pre">str()</span></code>.  If the
function accepts non-ascii unicode arguments on Python 2.x, the
<code class="docutils literal notranslate"><span class="pre">unicode()</span></code> builtin can be substituted, but note this will
produce unicode cache keys which may require key mangling before
reaching the cache.</p></li>
</ul>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.5.0.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><span class="target" id="dogpile.cache.region.CacheRegion.cache_multi_on_arguments.params.function_multi_key_generator"></span><strong>function_multi_key_generator</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.region.CacheRegion.cache_multi_on_arguments.params.function_multi_key_generator">¶</a> – <p>a function that will produce a
list of keys. This function will supersede the one configured on the
<a class="reference internal" href="#dogpile.cache.region.CacheRegion" title="dogpile.cache.region.CacheRegion"><code class="xref py py-class docutils literal notranslate"><span class="pre">CacheRegion</span></code></a> itself.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.5.5.</span></p>
</div>
</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#dogpile.cache.region.CacheRegion.cache_on_arguments" title="dogpile.cache.region.CacheRegion.cache_on_arguments"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.cache_on_arguments()</span></code></a></p>
<p><a class="reference internal" href="#dogpile.cache.region.CacheRegion.get_or_create_multi" title="dogpile.cache.region.CacheRegion.get_or_create_multi"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.get_or_create_multi()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.region.CacheRegion.cache_on_arguments">
<code class="sig-name descname">cache_on_arguments</code><span class="sig-paren">(</span><em class="sig-param">namespace: Optional[str] = None, expiration_time: Optional[Union[float, Callable[[], float]]] = None, should_cache_fn: Optional[Callable[[Any], bool]] = None, to_str: Callable[[Any], str] = &lt;class 'str'&gt;, function_key_generator: Optional[Callable[[...], Callable[[...], str]]] = None</em><span class="sig-paren">)</span> &#x2192; Callable<span class="p">[</span><span class="p">[</span>Callable<span class="p">[</span><span class="p">[</span><span class="p">…</span><span class="p">]</span><span class="p">, </span>Any<span class="p">]</span><span class="p">]</span><span class="p">, </span>Callable<span class="p">[</span><span class="p">[</span><span class="p">…</span><span class="p">]</span><span class="p">, </span>Any<span class="p">]</span><span class="p">]</span><a class="headerlink" href="#dogpile.cache.region.CacheRegion.cache_on_arguments" title="Permalink to this definition">¶</a></dt>
<dd><p>A function decorator that will cache the return
value of the function using a key derived from the
function itself and its arguments.</p>
<p>The decorator internally makes use of the
<a class="reference internal" href="#dogpile.cache.region.CacheRegion.get_or_create" title="dogpile.cache.region.CacheRegion.get_or_create"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.get_or_create()</span></code></a> method to access the
cache and conditionally call the function.  See that
method for additional behavioral details.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@someregion</span><span class="o">.</span><span class="n">cache_on_arguments</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">generate_something</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">somedatabase</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</pre></div>
</div>
<p>The decorated function can then be called normally, where
data will be pulled from the cache region unless a new
value is needed:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result</span> <span class="o">=</span> <span class="n">generate_something</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
</pre></div>
</div>
<p>The function is also given an attribute <code class="docutils literal notranslate"><span class="pre">invalidate()</span></code>, which
provides for invalidation of the value.  Pass to <code class="docutils literal notranslate"><span class="pre">invalidate()</span></code>
the same arguments you’d pass to the function itself to represent
a particular value:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">generate_something</span><span class="o">.</span><span class="n">invalidate</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
</pre></div>
</div>
<p>Another attribute <code class="docutils literal notranslate"><span class="pre">set()</span></code> is added to provide extra caching
possibilities relative to the function.   This is a convenience
method for <a class="reference internal" href="#dogpile.cache.region.CacheRegion.set" title="dogpile.cache.region.CacheRegion.set"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.set()</span></code></a> which will store a given
value directly without calling the decorated function.
The value to be cached is passed as the first argument, and the
arguments which would normally be passed to the function
should follow:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">generate_something</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
</pre></div>
</div>
<p>The above example is equivalent to calling
<code class="docutils literal notranslate"><span class="pre">generate_something(5,</span> <span class="pre">6)</span></code>, if the function were to produce
the value <code class="docutils literal notranslate"><span class="pre">3</span></code> as the value to be cached.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.4.1: </span>Added <code class="docutils literal notranslate"><span class="pre">set()</span></code> method to decorated function.</p>
</div>
<p>Similar to <code class="docutils literal notranslate"><span class="pre">set()</span></code> is <code class="docutils literal notranslate"><span class="pre">refresh()</span></code>.   This attribute will
invoke the decorated function and populate a new value into
the cache with the new value, as well as returning that value:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">newvalue</span> <span class="o">=</span> <span class="n">generate_something</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.5.0: </span>Added <code class="docutils literal notranslate"><span class="pre">refresh()</span></code> method to decorated
function.</p>
</div>
<p><code class="docutils literal notranslate"><span class="pre">original()</span></code> on other hand will invoke the decorated function
without any caching:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">newvalue</span> <span class="o">=</span> <span class="n">generate_something</span><span class="o">.</span><span class="n">original</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.6.0: </span>Added <code class="docutils literal notranslate"><span class="pre">original()</span></code> method to decorated
function.</p>
</div>
<p>Lastly, the <code class="docutils literal notranslate"><span class="pre">get()</span></code> method returns either the value cached
for the given key, or the token <code class="docutils literal notranslate"><span class="pre">NO_VALUE</span></code> if no such key
exists:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">value</span> <span class="o">=</span> <span class="n">generate_something</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.5.3: </span>Added <code class="docutils literal notranslate"><span class="pre">get()</span></code> method to decorated
function.</p>
</div>
<p>The default key generation will use the name
of the function, the module name for the function,
the arguments passed, as well as an optional “namespace”
parameter in order to generate a cache key.</p>
<p>Given a function <code class="docutils literal notranslate"><span class="pre">one</span></code> inside the module
<code class="docutils literal notranslate"><span class="pre">myapp.tools</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@region</span><span class="o">.</span><span class="n">cache_on_arguments</span><span class="p">(</span><span class="n">namespace</span><span class="o">=</span><span class="s2">&quot;foo&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">one</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
</pre></div>
</div>
<p>Above, calling <code class="docutils literal notranslate"><span class="pre">one(3,</span> <span class="pre">4)</span></code> will produce a
cache key as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">myapp</span><span class="o">.</span><span class="n">tools</span><span class="p">:</span><span class="n">one</span><span class="o">|</span><span class="n">foo</span><span class="o">|</span><span class="mi">3</span> <span class="mi">4</span>
</pre></div>
</div>
<p>The key generator will ignore an initial argument
of <code class="docutils literal notranslate"><span class="pre">self</span></code> or <code class="docutils literal notranslate"><span class="pre">cls</span></code>, making the decorator suitable
(with caveats) for use with instance or class methods.
Given the example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyClass</span><span class="p">:</span>
    <span class="nd">@region</span><span class="o">.</span><span class="n">cache_on_arguments</span><span class="p">(</span><span class="n">namespace</span><span class="o">=</span><span class="s2">&quot;foo&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">one</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
</pre></div>
</div>
<p>The cache key above for <code class="docutils literal notranslate"><span class="pre">MyClass().one(3,</span> <span class="pre">4)</span></code> will
again produce the same cache key of <code class="docutils literal notranslate"><span class="pre">myapp.tools:one|foo|3</span> <span class="pre">4</span></code> -
the name <code class="docutils literal notranslate"><span class="pre">self</span></code> is skipped.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">namespace</span></code> parameter is optional, and is used
normally to disambiguate two functions of the same
name within the same module, as can occur when decorating
instance or class methods as below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyClass</span><span class="p">:</span>
    <span class="nd">@region</span><span class="o">.</span><span class="n">cache_on_arguments</span><span class="p">(</span><span class="n">namespace</span><span class="o">=</span><span class="s1">&#39;MC&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">somemethod</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="s2">&quot;&quot;</span>

<span class="k">class</span> <span class="nc">MyOtherClass</span><span class="p">:</span>
    <span class="nd">@region</span><span class="o">.</span><span class="n">cache_on_arguments</span><span class="p">(</span><span class="n">namespace</span><span class="o">=</span><span class="s1">&#39;MOC&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">somemethod</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="s2">&quot;&quot;</span>
</pre></div>
</div>
<p>Above, the <code class="docutils literal notranslate"><span class="pre">namespace</span></code> parameter disambiguates
between <code class="docutils literal notranslate"><span class="pre">somemethod</span></code> on <code class="docutils literal notranslate"><span class="pre">MyClass</span></code> and <code class="docutils literal notranslate"><span class="pre">MyOtherClass</span></code>.
Python class declaration mechanics otherwise prevent
the decorator from having awareness of the <code class="docutils literal notranslate"><span class="pre">MyClass</span></code>
and <code class="docutils literal notranslate"><span class="pre">MyOtherClass</span></code> names, as the function is received
by the decorator before it becomes an instance method.</p>
<p>The function key generation can be entirely replaced
on a per-region basis using the <code class="docutils literal notranslate"><span class="pre">function_key_generator</span></code>
argument present on <a class="reference internal" href="#dogpile.cache.region.make_region" title="dogpile.cache.region.make_region"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_region()</span></code></a> and
<a class="reference internal" href="#dogpile.cache.region.CacheRegion" title="dogpile.cache.region.CacheRegion"><code class="xref py py-class docutils literal notranslate"><span class="pre">CacheRegion</span></code></a>. If defaults to
<a class="reference internal" href="#dogpile.cache.util.function_key_generator" title="dogpile.cache.util.function_key_generator"><code class="xref py py-func docutils literal notranslate"><span class="pre">function_key_generator()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="dogpile.cache.region.CacheRegion.cache_on_arguments.params.namespace"></span><strong>namespace</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.region.CacheRegion.cache_on_arguments.params.namespace">¶</a> – optional string argument which will be
established as part of the cache key.   This may be needed
to disambiguate functions of the same name within the same
source file, such as those
associated with classes - note that the decorator itself
can’t see the parent class on a function as the class is
being declared.</p></li>
<li><p><span class="target" id="dogpile.cache.region.CacheRegion.cache_on_arguments.params.expiration_time"></span><strong>expiration_time</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.region.CacheRegion.cache_on_arguments.params.expiration_time">¶</a> – <p>if not None, will override the normal
expiration time.</p>
<p>May be specified as a callable, taking no arguments, that
returns a value to be used as the <code class="docutils literal notranslate"><span class="pre">expiration_time</span></code>. This callable
will be called whenever the decorated function itself is called, in
caching or retrieving. Thus, this can be used to
determine a <em>dynamic</em> expiration time for the cached function
result.  Example use cases include “cache the result until the
end of the day, week or time period” and “cache until a certain date
or time passes”.</p>
</p></li>
<li><p><span class="target" id="dogpile.cache.region.CacheRegion.cache_on_arguments.params.should_cache_fn"></span><strong>should_cache_fn</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.region.CacheRegion.cache_on_arguments.params.should_cache_fn">¶</a> – passed to <a class="reference internal" href="#dogpile.cache.region.CacheRegion.get_or_create" title="dogpile.cache.region.CacheRegion.get_or_create"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.get_or_create()</span></code></a>.</p></li>
<li><p><span class="target" id="dogpile.cache.region.CacheRegion.cache_on_arguments.params.to_str"></span><strong>to_str</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.region.CacheRegion.cache_on_arguments.params.to_str">¶</a> – callable, will be called on each function argument
in order to convert to a string.  Defaults to <code class="docutils literal notranslate"><span class="pre">str()</span></code>.  If the
function accepts non-ascii unicode arguments on Python 2.x, the
<code class="docutils literal notranslate"><span class="pre">unicode()</span></code> builtin can be substituted, but note this will
produce unicode cache keys which may require key mangling before
reaching the cache.</p></li>
<li><p><span class="target" id="dogpile.cache.region.CacheRegion.cache_on_arguments.params.function_key_generator"></span><strong>function_key_generator</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.region.CacheRegion.cache_on_arguments.params.function_key_generator">¶</a> – a function that will produce a
“cache key”. This function will supersede the one configured on the
<a class="reference internal" href="#dogpile.cache.region.CacheRegion" title="dogpile.cache.region.CacheRegion"><code class="xref py py-class docutils literal notranslate"><span class="pre">CacheRegion</span></code></a> itself.</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#dogpile.cache.region.CacheRegion.cache_multi_on_arguments" title="dogpile.cache.region.CacheRegion.cache_multi_on_arguments"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.cache_multi_on_arguments()</span></code></a></p>
<p><a class="reference internal" href="#dogpile.cache.region.CacheRegion.get_or_create" title="dogpile.cache.region.CacheRegion.get_or_create"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.get_or_create()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.region.CacheRegion.configure">
<code class="sig-name descname">configure</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">backend</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">expiration_time</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>Union<span class="p">[</span>float<span class="p">, </span>datetime.timedelta<span class="p">]</span><span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">arguments</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>Mapping<span class="p">[</span>str<span class="p">, </span>Any<span class="p">]</span><span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">_config_argument_dict</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>Mapping<span class="p">[</span>str<span class="p">, </span>Any<span class="p">]</span><span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">_config_prefix</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">wrap</span><span class="p">:</span> <span class="n">Sequence<span class="p">[</span>Union<span class="p">[</span><a class="reference internal" href="#dogpile.cache.proxy.ProxyBackend" title="dogpile.cache.proxy.ProxyBackend">dogpile.cache.proxy.ProxyBackend</a><span class="p">, </span>Type<span class="p">[</span><a class="reference internal" href="#dogpile.cache.proxy.ProxyBackend" title="dogpile.cache.proxy.ProxyBackend">dogpile.cache.proxy.ProxyBackend</a><span class="p">]</span><span class="p">]</span><span class="p">]</span></span> <span class="o">=</span> <span class="default_value">()</span></em>, <em class="sig-param"><span class="n">replace_existing_backend</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em>, <em class="sig-param"><span class="n">region_invalidator</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span><a class="reference internal" href="#dogpile.cache.region.RegionInvalidationStrategy" title="dogpile.cache.region.RegionInvalidationStrategy">dogpile.cache.region.RegionInvalidationStrategy</a><span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#dogpile.cache.region.CacheRegion" title="dogpile.cache.region.CacheRegion">dogpile.cache.region.CacheRegion</a><a class="headerlink" href="#dogpile.cache.region.CacheRegion.configure" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure a <a class="reference internal" href="#dogpile.cache.region.CacheRegion" title="dogpile.cache.region.CacheRegion"><code class="xref py py-class docutils literal notranslate"><span class="pre">CacheRegion</span></code></a>.</p>
<p>The <a class="reference internal" href="#dogpile.cache.region.CacheRegion" title="dogpile.cache.region.CacheRegion"><code class="xref py py-class docutils literal notranslate"><span class="pre">CacheRegion</span></code></a> itself
is returned.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="dogpile.cache.region.CacheRegion.configure.params.backend"></span><strong>backend</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.region.CacheRegion.configure.params.backend">¶</a> – Required.  This is the name of the
<a class="reference internal" href="#dogpile.cache.api.CacheBackend" title="dogpile.cache.api.CacheBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">CacheBackend</span></code></a> to use, and is resolved by loading
the class from the <code class="docutils literal notranslate"><span class="pre">dogpile.cache</span></code> entrypoint.</p></li>
<li><p><span class="target" id="dogpile.cache.region.CacheRegion.configure.params.expiration_time"></span><strong>expiration_time</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.region.CacheRegion.configure.params.expiration_time">¶</a> – <p>Optional.  The expiration time passed
to the dogpile system.  May be passed as an integer number
of seconds, or as a <code class="docutils literal notranslate"><span class="pre">datetime.timedelta</span></code> value.</p>
<p>The <a class="reference internal" href="#dogpile.cache.region.CacheRegion.get_or_create" title="dogpile.cache.region.CacheRegion.get_or_create"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.get_or_create()</span></code></a>
method as well as the <a class="reference internal" href="#dogpile.cache.region.CacheRegion.cache_on_arguments" title="dogpile.cache.region.CacheRegion.cache_on_arguments"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.cache_on_arguments()</span></code></a>
decorator (though note:  <strong>not</strong> the <a class="reference internal" href="#dogpile.cache.region.CacheRegion.get" title="dogpile.cache.region.CacheRegion.get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.get()</span></code></a>
method) will call upon the value creation function after this
time period has passed since the last generation.</p>
</p></li>
<li><p><span class="target" id="dogpile.cache.region.CacheRegion.configure.params.arguments"></span><strong>arguments</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.region.CacheRegion.configure.params.arguments">¶</a> – Optional.  The structure here is passed
directly to the constructor of the <a class="reference internal" href="#dogpile.cache.api.CacheBackend" title="dogpile.cache.api.CacheBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">CacheBackend</span></code></a>
in use, though is typically a dictionary.</p></li>
<li><p><span class="target" id="dogpile.cache.region.CacheRegion.configure.params.wrap"></span><strong>wrap</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.region.CacheRegion.configure.params.wrap">¶</a> – <p>Optional.  A list of <a class="reference internal" href="#dogpile.cache.proxy.ProxyBackend" title="dogpile.cache.proxy.ProxyBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">ProxyBackend</span></code></a>
classes and/or instances, each of which will be applied
in a chain to ultimately wrap the original backend,
so that custom functionality augmentation can be applied.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.5.0.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="usage.html#changing-backend-behavior"><span class="std std-ref">Changing Backend Behavior</span></a></p>
</div>
</p></li>
<li><p><span class="target" id="dogpile.cache.region.CacheRegion.configure.params.replace_existing_backend"></span><strong>replace_existing_backend</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.region.CacheRegion.configure.params.replace_existing_backend">¶</a> – <p>if True, the existing cache backend
will be replaced.  Without this flag, an exception is raised if
a backend is already configured.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.5.7.</span></p>
</div>
</p></li>
<li><p><span class="target" id="dogpile.cache.region.CacheRegion.configure.params.region_invalidator"></span><strong>region_invalidator</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.region.CacheRegion.configure.params.region_invalidator">¶</a> – <p>Optional. Override default invalidation
strategy with custom implementation of
<a class="reference internal" href="#dogpile.cache.region.RegionInvalidationStrategy" title="dogpile.cache.region.RegionInvalidationStrategy"><code class="xref py py-class docutils literal notranslate"><span class="pre">RegionInvalidationStrategy</span></code></a>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.6.2.</span></p>
</div>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.region.CacheRegion.configure_from_config">
<code class="sig-name descname">configure_from_config</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">config_dict</span></em>, <em class="sig-param"><span class="n">prefix</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.region.CacheRegion.configure_from_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure from a configuration dictionary
and a prefix.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">local_region</span> <span class="o">=</span> <span class="n">make_region</span><span class="p">()</span>
<span class="n">memcached_region</span> <span class="o">=</span> <span class="n">make_region</span><span class="p">()</span>

<span class="c1"># regions are ready to use for function</span>
<span class="c1"># decorators, but not yet for actual caching</span>

<span class="c1"># later, when config is available</span>
<span class="n">myconfig</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;cache.local.backend&quot;</span><span class="p">:</span><span class="s2">&quot;dogpile.cache.dbm&quot;</span><span class="p">,</span>
    <span class="s2">&quot;cache.local.arguments.filename&quot;</span><span class="p">:</span><span class="s2">&quot;/path/to/dbmfile.dbm&quot;</span><span class="p">,</span>
    <span class="s2">&quot;cache.memcached.backend&quot;</span><span class="p">:</span><span class="s2">&quot;dogpile.cache.pylibmc&quot;</span><span class="p">,</span>
    <span class="s2">&quot;cache.memcached.arguments.url&quot;</span><span class="p">:</span><span class="s2">&quot;127.0.0.1, 10.0.0.1&quot;</span><span class="p">,</span>
<span class="p">}</span>
<span class="n">local_region</span><span class="o">.</span><span class="n">configure_from_config</span><span class="p">(</span><span class="n">myconfig</span><span class="p">,</span> <span class="s2">&quot;cache.local.&quot;</span><span class="p">)</span>
<span class="n">memcached_region</span><span class="o">.</span><span class="n">configure_from_config</span><span class="p">(</span><span class="n">myconfig</span><span class="p">,</span>
                                    <span class="s2">&quot;cache.memcached.&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.region.CacheRegion.delete">
<code class="sig-name descname">delete</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#dogpile.cache.region.CacheRegion.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove a value from the cache.</p>
<p>This operation is idempotent (can be called multiple times, or on a
non-existent key, safely)</p>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.region.CacheRegion.delete_multi">
<code class="sig-name descname">delete_multi</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">keys</span><span class="p">:</span> <span class="n">Sequence<span class="p">[</span>str<span class="p">]</span></span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#dogpile.cache.region.CacheRegion.delete_multi" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove multiple values from the cache.</p>
<p>This operation is idempotent (can be called multiple times, or on a
non-existent key, safely)</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.5.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.region.CacheRegion.get">
<code class="sig-name descname">get</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key</span></em>, <em class="sig-param"><span class="n">expiration_time</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">ignore_expiration</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.region.CacheRegion.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a value from the cache, based on the given key.</p>
<p>If the value is not present, the method returns the token
<code class="docutils literal notranslate"><span class="pre">NO_VALUE</span></code>. <code class="docutils literal notranslate"><span class="pre">NO_VALUE</span></code> evaluates to False, but is separate from
<code class="docutils literal notranslate"><span class="pre">None</span></code> to distinguish between a cached value of <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<p>By default, the configured expiration time of the
<a class="reference internal" href="#dogpile.cache.region.CacheRegion" title="dogpile.cache.region.CacheRegion"><code class="xref py py-class docutils literal notranslate"><span class="pre">CacheRegion</span></code></a>, or alternatively the expiration
time supplied by the <code class="docutils literal notranslate"><span class="pre">expiration_time</span></code> argument,
is tested against the creation time of the retrieved
value versus the current time (as reported by <code class="docutils literal notranslate"><span class="pre">time.time()</span></code>).
If stale, the cached value is ignored and the <code class="docutils literal notranslate"><span class="pre">NO_VALUE</span></code>
token is returned.  Passing the flag <code class="docutils literal notranslate"><span class="pre">ignore_expiration=True</span></code>
bypasses the expiration time check.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 0.3.0: </span><a class="reference internal" href="#dogpile.cache.region.CacheRegion.get" title="dogpile.cache.region.CacheRegion.get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.get()</span></code></a> now checks the value’s creation time
against the expiration time, rather than returning
the value unconditionally.</p>
</div>
<p>The method also interprets the cached value in terms
of the current “invalidation” time as set by
the <a class="reference internal" href="#dogpile.cache.region.CacheRegion.invalidate" title="dogpile.cache.region.CacheRegion.invalidate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">invalidate()</span></code></a> method.   If a value is present,
but its creation time is older than the current
invalidation time, the <code class="docutils literal notranslate"><span class="pre">NO_VALUE</span></code> token is returned.
Passing the flag <code class="docutils literal notranslate"><span class="pre">ignore_expiration=True</span></code> bypasses
the invalidation time check.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.3.0: </span>Support for the <a class="reference internal" href="#dogpile.cache.region.CacheRegion.invalidate" title="dogpile.cache.region.CacheRegion.invalidate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.invalidate()</span></code></a>
method.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="dogpile.cache.region.CacheRegion.get.params.key"></span><strong>key</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.region.CacheRegion.get.params.key">¶</a> – Key to be retrieved. While it’s typical for a key to be a
string, it is ultimately passed directly down to the cache backend,
before being optionally processed by the key_mangler function, so can
be of any type recognized by the backend or by the key_mangler
function, if present.</p></li>
<li><p><span class="target" id="dogpile.cache.region.CacheRegion.get.params.expiration_time"></span><strong>expiration_time</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.region.CacheRegion.get.params.expiration_time">¶</a> – <p>Optional expiration time value
which will supersede that configured on the <a class="reference internal" href="#dogpile.cache.region.CacheRegion" title="dogpile.cache.region.CacheRegion"><code class="xref py py-class docutils literal notranslate"><span class="pre">CacheRegion</span></code></a>
itself.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <a class="reference internal" href="#dogpile.cache.region.CacheRegion.get.params.expiration_time" title="dogpile.cache.region.CacheRegion.get"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">CacheRegion.get.expiration_time</span></code></a>
argument is <strong>not persisted in the cache</strong> and is relevant
only to <strong>this specific cache retrieval operation</strong>, relative to
the creation time stored with the existing cached value.
Subsequent calls to <a class="reference internal" href="#dogpile.cache.region.CacheRegion.get" title="dogpile.cache.region.CacheRegion.get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.get()</span></code></a> are <strong>not</strong> affected
by this value.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.3.0.</span></p>
</div>
</p></li>
<li><p><span class="target" id="dogpile.cache.region.CacheRegion.get.params.ignore_expiration"></span><strong>ignore_expiration</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.region.CacheRegion.get.params.ignore_expiration">¶</a> – <p>if <code class="docutils literal notranslate"><span class="pre">True</span></code>, the value is returned
from the cache if present, regardless of configured
expiration times or whether or not <a class="reference internal" href="#dogpile.cache.region.CacheRegion.invalidate" title="dogpile.cache.region.CacheRegion.invalidate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">invalidate()</span></code></a>
was called.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.3.0.</span></p>
</div>
</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#dogpile.cache.region.CacheRegion.get_multi" title="dogpile.cache.region.CacheRegion.get_multi"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.get_multi()</span></code></a></p>
<p><a class="reference internal" href="#dogpile.cache.region.CacheRegion.get_or_create" title="dogpile.cache.region.CacheRegion.get_or_create"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.get_or_create()</span></code></a></p>
<p><a class="reference internal" href="#dogpile.cache.region.CacheRegion.set" title="dogpile.cache.region.CacheRegion.set"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.set()</span></code></a></p>
<p><a class="reference internal" href="#dogpile.cache.region.CacheRegion.delete" title="dogpile.cache.region.CacheRegion.delete"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.delete()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.region.CacheRegion.get_multi">
<code class="sig-name descname">get_multi</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">keys</span></em>, <em class="sig-param"><span class="n">expiration_time</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">ignore_expiration</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.region.CacheRegion.get_multi" title="Permalink to this definition">¶</a></dt>
<dd><p>Return multiple values from the cache, based on the given keys.</p>
<p>Returns values as a list matching the keys given.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">values</span> <span class="o">=</span> <span class="n">region</span><span class="o">.</span><span class="n">get_multi</span><span class="p">([</span><span class="s2">&quot;one&quot;</span><span class="p">,</span> <span class="s2">&quot;two&quot;</span><span class="p">,</span> <span class="s2">&quot;three&quot;</span><span class="p">])</span>
</pre></div>
</div>
<p>To convert values to a dictionary, use <code class="docutils literal notranslate"><span class="pre">zip()</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">keys</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;one&quot;</span><span class="p">,</span> <span class="s2">&quot;two&quot;</span><span class="p">,</span> <span class="s2">&quot;three&quot;</span><span class="p">]</span>
<span class="n">values</span> <span class="o">=</span> <span class="n">region</span><span class="o">.</span><span class="n">get_multi</span><span class="p">(</span><span class="n">keys</span><span class="p">)</span>
<span class="n">dictionary</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span> <span class="n">values</span><span class="p">))</span>
</pre></div>
</div>
<p>Keys which aren’t present in the list are returned as
the <code class="docutils literal notranslate"><span class="pre">NO_VALUE</span></code> token.  <code class="docutils literal notranslate"><span class="pre">NO_VALUE</span></code> evaluates to False,
but is separate from
<code class="docutils literal notranslate"><span class="pre">None</span></code> to distinguish between a cached value of <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<p>By default, the configured expiration time of the
<a class="reference internal" href="#dogpile.cache.region.CacheRegion" title="dogpile.cache.region.CacheRegion"><code class="xref py py-class docutils literal notranslate"><span class="pre">CacheRegion</span></code></a>, or alternatively the expiration
time supplied by the <code class="docutils literal notranslate"><span class="pre">expiration_time</span></code> argument,
is tested against the creation time of the retrieved
value versus the current time (as reported by <code class="docutils literal notranslate"><span class="pre">time.time()</span></code>).
If stale, the cached value is ignored and the <code class="docutils literal notranslate"><span class="pre">NO_VALUE</span></code>
token is returned.  Passing the flag <code class="docutils literal notranslate"><span class="pre">ignore_expiration=True</span></code>
bypasses the expiration time check.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.5.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.region.CacheRegion.get_or_create">
<code class="sig-name descname">get_or_create</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">creator</span><span class="p">:</span> <span class="n">Callable<span class="p">[</span><span class="p">[</span><span class="p">…</span><span class="p">]</span><span class="p">, </span>Any<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">expiration_time</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>float<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">should_cache_fn</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>Callable<span class="p">[</span><span class="p">[</span>Any<span class="p">]</span><span class="p">, </span>bool<span class="p">]</span><span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">creator_args</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>Tuple<span class="p">[</span>Any<span class="p">, </span>Mapping<span class="p">[</span>str<span class="p">, </span>Any<span class="p">]</span><span class="p">]</span><span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; Any<a class="headerlink" href="#dogpile.cache.region.CacheRegion.get_or_create" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a cached value based on the given key.</p>
<p>If the value does not exist or is considered to be expired
based on its creation time, the given
creation function may or may not be used to recreate the value
and persist the newly generated value in the cache.</p>
<p>Whether or not the function is used depends on if the
<em>dogpile lock</em> can be acquired or not.  If it can’t, it means
a different thread or process is already running a creation
function for this key against the cache.  When the dogpile
lock cannot be acquired, the method will block if no
previous value is available, until the lock is released and
a new value available.  If a previous value
is available, that value is returned immediately without blocking.</p>
<p>If the <a class="reference internal" href="#dogpile.cache.region.CacheRegion.invalidate" title="dogpile.cache.region.CacheRegion.invalidate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">invalidate()</span></code></a> method has been called, and
the retrieved value’s timestamp is older than the invalidation
timestamp, the value is unconditionally prevented from
being returned.  The method will attempt to acquire the dogpile
lock to generate a new value, or will wait
until the lock is released to return the new value.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 0.3.0: </span>The value is unconditionally regenerated if the creation
time is older than the last call to <a class="reference internal" href="#dogpile.cache.region.CacheRegion.invalidate" title="dogpile.cache.region.CacheRegion.invalidate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">invalidate()</span></code></a>.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="dogpile.cache.region.CacheRegion.get_or_create.params.key"></span><strong>key</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.region.CacheRegion.get_or_create.params.key">¶</a> – Key to be retrieved. While it’s typical for a key to be a
string, it is ultimately passed directly down to the cache backend,
before being optionally processed by the key_mangler function, so can
be of any type recognized by the backend or by the key_mangler
function, if present.</p></li>
<li><p><span class="target" id="dogpile.cache.region.CacheRegion.get_or_create.params.creator"></span><strong>creator</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.region.CacheRegion.get_or_create.params.creator">¶</a> – function which creates a new value.</p></li>
<li><p><span class="target" id="dogpile.cache.region.CacheRegion.get_or_create.params.creator_args"></span><strong>creator_args</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.region.CacheRegion.get_or_create.params.creator_args">¶</a> – <p>optional tuple of (args, kwargs) that will be
passed to the creator function if present.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.7.0.</span></p>
</div>
</p></li>
<li><p><span class="target" id="dogpile.cache.region.CacheRegion.get_or_create.params.expiration_time"></span><strong>expiration_time</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.region.CacheRegion.get_or_create.params.expiration_time">¶</a> – <p>optional expiration time which will override
the expiration time already configured on this <a class="reference internal" href="#dogpile.cache.region.CacheRegion" title="dogpile.cache.region.CacheRegion"><code class="xref py py-class docutils literal notranslate"><span class="pre">CacheRegion</span></code></a>
if not None.   To set no expiration, use the value -1.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <a class="reference internal" href="#dogpile.cache.region.CacheRegion.get_or_create.params.expiration_time" title="dogpile.cache.region.CacheRegion.get_or_create"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">CacheRegion.get_or_create.expiration_time</span></code></a>
argument is <strong>not persisted in the cache</strong> and is relevant
only to <strong>this specific cache retrieval operation</strong>, relative to
the creation time stored with the existing cached value.
Subsequent calls to <a class="reference internal" href="#dogpile.cache.region.CacheRegion.get_or_create" title="dogpile.cache.region.CacheRegion.get_or_create"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.get_or_create()</span></code></a> are <strong>not</strong>
affected by this value.</p>
</div>
</p></li>
<li><p><span class="target" id="dogpile.cache.region.CacheRegion.get_or_create.params.should_cache_fn"></span><strong>should_cache_fn</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.region.CacheRegion.get_or_create.params.should_cache_fn">¶</a> – <p>optional callable function which will receive
the value returned by the “creator”, and will then return True or
False, indicating if the value should actually be cached or not.  If
it returns False, the value is still returned, but isn’t cached.
E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">dont_cache_none</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>

<span class="n">value</span> <span class="o">=</span> <span class="n">region</span><span class="o">.</span><span class="n">get_or_create</span><span class="p">(</span><span class="s2">&quot;some key&quot;</span><span class="p">,</span>
                    <span class="n">create_value</span><span class="p">,</span>
                    <span class="n">should_cache_fn</span><span class="o">=</span><span class="n">dont_cache_none</span><span class="p">)</span>
</pre></div>
</div>
<p>Above, the function returns the value of create_value() if
the cache is invalid, however if the return value is None,
it won’t be cached.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.4.3.</span></p>
</div>
</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#dogpile.cache.region.CacheRegion.get" title="dogpile.cache.region.CacheRegion.get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.get()</span></code></a></p>
<p><a class="reference internal" href="#dogpile.cache.region.CacheRegion.cache_on_arguments" title="dogpile.cache.region.CacheRegion.cache_on_arguments"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.cache_on_arguments()</span></code></a> - applies
<a class="reference internal" href="#dogpile.cache.region.CacheRegion.get_or_create" title="dogpile.cache.region.CacheRegion.get_or_create"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_or_create()</span></code></a> to any function using a decorator.</p>
<p><a class="reference internal" href="#dogpile.cache.region.CacheRegion.get_or_create_multi" title="dogpile.cache.region.CacheRegion.get_or_create_multi"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.get_or_create_multi()</span></code></a> - multiple key/value
version</p>
</div>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.region.CacheRegion.get_or_create_multi">
<code class="sig-name descname">get_or_create_multi</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">keys</span><span class="p">:</span> <span class="n">Sequence<span class="p">[</span>str<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">creator</span><span class="p">:</span> <span class="n">Callable<span class="p">[</span><span class="p">]</span><span class="p">, </span>Any<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">expiration_time</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>float<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">should_cache_fn</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>Callable<span class="p">[</span><span class="p">[</span>Any<span class="p">]</span><span class="p">, </span>bool<span class="p">]</span><span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; Sequence<span class="p">[</span>Any<span class="p">]</span><a class="headerlink" href="#dogpile.cache.region.CacheRegion.get_or_create_multi" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a sequence of cached values based on a sequence of keys.</p>
<p>The behavior for generation of values based on keys corresponds
to that of <code class="xref py py-meth docutils literal notranslate"><span class="pre">Region.get_or_create()</span></code>, with the exception that
the <code class="docutils literal notranslate"><span class="pre">creator()</span></code> function may be asked to generate any subset of
the given keys.   The list of keys to be generated is passed to
<code class="docutils literal notranslate"><span class="pre">creator()</span></code>, and <code class="docutils literal notranslate"><span class="pre">creator()</span></code> should return the generated values
as a sequence corresponding to the order of the keys.</p>
<p>The method uses the same approach as <code class="xref py py-meth docutils literal notranslate"><span class="pre">Region.get_multi()</span></code>
and <code class="xref py py-meth docutils literal notranslate"><span class="pre">Region.set_multi()</span></code> to get and set values from the
backend.</p>
<p>If you are using a <a class="reference internal" href="#dogpile.cache.api.CacheBackend" title="dogpile.cache.api.CacheBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">CacheBackend</span></code></a> or <a class="reference internal" href="#dogpile.cache.proxy.ProxyBackend" title="dogpile.cache.proxy.ProxyBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">ProxyBackend</span></code></a>
that modifies values, take note this function invokes
<code class="docutils literal notranslate"><span class="pre">.set_multi()</span></code> for newly generated values using the same values it
returns to the calling function. A correct implementation of
<code class="docutils literal notranslate"><span class="pre">.set_multi()</span></code> will not modify values in-place on the submitted
<code class="docutils literal notranslate"><span class="pre">mapping</span></code> dict.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="dogpile.cache.region.CacheRegion.get_or_create_multi.params.keys"></span><strong>keys</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.region.CacheRegion.get_or_create_multi.params.keys">¶</a> – Sequence of keys to be retrieved.</p></li>
<li><p><span class="target" id="dogpile.cache.region.CacheRegion.get_or_create_multi.params.creator"></span><strong>creator</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.region.CacheRegion.get_or_create_multi.params.creator">¶</a> – function which accepts a sequence of keys and
returns a sequence of new values.</p></li>
<li><p><span class="target" id="dogpile.cache.region.CacheRegion.get_or_create_multi.params.expiration_time"></span><strong>expiration_time</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.region.CacheRegion.get_or_create_multi.params.expiration_time">¶</a> – optional expiration time which will override
the expiration time already configured on this <a class="reference internal" href="#dogpile.cache.region.CacheRegion" title="dogpile.cache.region.CacheRegion"><code class="xref py py-class docutils literal notranslate"><span class="pre">CacheRegion</span></code></a>
if not None.   To set no expiration, use the value -1.</p></li>
<li><p><span class="target" id="dogpile.cache.region.CacheRegion.get_or_create_multi.params.should_cache_fn"></span><strong>should_cache_fn</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.region.CacheRegion.get_or_create_multi.params.should_cache_fn">¶</a> – optional callable function which will receive
each value returned by the “creator”, and will then return True or
False, indicating if the value should actually be cached or not.  If
it returns False, the value is still returned, but isn’t cached.</p></li>
</ul>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.5.0.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#dogpile.cache.region.CacheRegion.cache_multi_on_arguments" title="dogpile.cache.region.CacheRegion.cache_multi_on_arguments"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.cache_multi_on_arguments()</span></code></a></p>
<p><a class="reference internal" href="#dogpile.cache.region.CacheRegion.get_or_create" title="dogpile.cache.region.CacheRegion.get_or_create"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.get_or_create()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.region.CacheRegion.invalidate">
<code class="sig-name descname">invalidate</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">hard</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.region.CacheRegion.invalidate" title="Permalink to this definition">¶</a></dt>
<dd><p>Invalidate this <a class="reference internal" href="#dogpile.cache.region.CacheRegion" title="dogpile.cache.region.CacheRegion"><code class="xref py py-class docutils literal notranslate"><span class="pre">CacheRegion</span></code></a>.</p>
<p>The default invalidation system works by setting
a current timestamp (using <code class="docutils literal notranslate"><span class="pre">time.time()</span></code>)
representing the “minimum creation time” for
a value.  Any retrieved value whose creation
time is prior to this timestamp
is considered to be stale.  It does not
affect the data in the cache in any way, and is
<strong>local to this instance of :class:`.CacheRegion`.</strong></p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The <a class="reference internal" href="#dogpile.cache.region.CacheRegion.invalidate" title="dogpile.cache.region.CacheRegion.invalidate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.invalidate()</span></code></a> method’s default mode of
operation is to set a timestamp <strong>local to this CacheRegion
in this Python process only</strong>.   It does not impact other Python
processes or regions as the timestamp is <strong>only stored locally in
memory</strong>.  To implement invalidation where the
timestamp is stored in the cache or similar so that all Python
processes can be affected by an invalidation timestamp, implement a
custom <a class="reference internal" href="#dogpile.cache.region.RegionInvalidationStrategy" title="dogpile.cache.region.RegionInvalidationStrategy"><code class="xref py py-class docutils literal notranslate"><span class="pre">RegionInvalidationStrategy</span></code></a>.</p>
</div>
<p>Once set, the invalidation time is honored by
the <a class="reference internal" href="#dogpile.cache.region.CacheRegion.get_or_create" title="dogpile.cache.region.CacheRegion.get_or_create"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.get_or_create()</span></code></a>,
<a class="reference internal" href="#dogpile.cache.region.CacheRegion.get_or_create_multi" title="dogpile.cache.region.CacheRegion.get_or_create_multi"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.get_or_create_multi()</span></code></a> and
<a class="reference internal" href="#dogpile.cache.region.CacheRegion.get" title="dogpile.cache.region.CacheRegion.get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.get()</span></code></a> methods.</p>
<p>The method supports both “hard” and “soft” invalidation
options.  With “hard” invalidation,
<a class="reference internal" href="#dogpile.cache.region.CacheRegion.get_or_create" title="dogpile.cache.region.CacheRegion.get_or_create"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.get_or_create()</span></code></a> will force an immediate
regeneration of the value which all getters will wait for.
With “soft” invalidation, subsequent getters will return the
“old” value until the new one is available.</p>
<p>Usage of “soft” invalidation requires that the region or the method
is given a non-None expiration time.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.3.0.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><span class="target" id="dogpile.cache.region.CacheRegion.invalidate.params.hard"></span><strong>hard</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.region.CacheRegion.invalidate.params.hard">¶</a> – <p>if True, cache values will all require immediate
regeneration; dogpile logic won’t be used.  If False, the
creation time of existing values will be pushed back before
the expiration time so that a return+regen will be invoked.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.5.1.</span></p>
</div>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.region.CacheRegion.is_configured">
<em class="property">property </em><code class="sig-name descname">is_configured</code><a class="headerlink" href="#dogpile.cache.region.CacheRegion.is_configured" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if the backend has been configured via the
<a class="reference internal" href="#dogpile.cache.region.CacheRegion.configure" title="dogpile.cache.region.CacheRegion.configure"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.configure()</span></code></a> method already.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.5.1.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.region.CacheRegion.set">
<code class="sig-name descname">set</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">value</span><span class="p">:</span> <span class="n">Any</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#dogpile.cache.region.CacheRegion.set" title="Permalink to this definition">¶</a></dt>
<dd><p>Place a new value in the cache under the given key.</p>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.region.CacheRegion.set_multi">
<code class="sig-name descname">set_multi</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mapping</span><span class="p">:</span> <span class="n">Mapping<span class="p">[</span>str<span class="p">, </span>Any<span class="p">]</span></span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#dogpile.cache.region.CacheRegion.set_multi" title="Permalink to this definition">¶</a></dt>
<dd><p>Place new values in the cache under the given keys.</p>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.region.CacheRegion.wrap">
<code class="sig-name descname">wrap</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">proxy</span><span class="p">:</span> <span class="n">Union<span class="p">[</span><a class="reference internal" href="#dogpile.cache.proxy.ProxyBackend" title="dogpile.cache.proxy.ProxyBackend">dogpile.cache.proxy.ProxyBackend</a><span class="p">, </span>Type<span class="p">[</span><a class="reference internal" href="#dogpile.cache.proxy.ProxyBackend" title="dogpile.cache.proxy.ProxyBackend">dogpile.cache.proxy.ProxyBackend</a><span class="p">]</span><span class="p">]</span></span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#dogpile.cache.region.CacheRegion.wrap" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes a ProxyBackend instance or class and wraps the
attached backend.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="dogpile.cache.region.DefaultInvalidationStrategy">
<em class="property">class </em><code class="sig-prename descclassname">dogpile.cache.region.</code><code class="sig-name descname">DefaultInvalidationStrategy</code><a class="headerlink" href="#dogpile.cache.region.DefaultInvalidationStrategy" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dogpile.cache.region.RegionInvalidationStrategy" title="dogpile.cache.region.RegionInvalidationStrategy"><code class="xref py py-class docutils literal notranslate"><span class="pre">dogpile.cache.region.RegionInvalidationStrategy</span></code></a></p>
<dl class="py method">
<dt id="dogpile.cache.region.DefaultInvalidationStrategy.invalidate">
<code class="sig-name descname">invalidate</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">hard</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">True</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#dogpile.cache.region.DefaultInvalidationStrategy.invalidate" title="Permalink to this definition">¶</a></dt>
<dd><p>Region invalidation.</p>
<p><a class="reference internal" href="#dogpile.cache.region.CacheRegion" title="dogpile.cache.region.CacheRegion"><code class="xref py py-class docutils literal notranslate"><span class="pre">CacheRegion</span></code></a> propagated call.
The default invalidation system works by setting
a current timestamp (using <code class="docutils literal notranslate"><span class="pre">time.time()</span></code>) to consider all older
timestamps effectively invalidated.</p>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.region.DefaultInvalidationStrategy.is_hard_invalidated">
<code class="sig-name descname">is_hard_invalidated</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">timestamp</span><span class="p">:</span> <span class="n">float</span></em><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#dogpile.cache.region.DefaultInvalidationStrategy.is_hard_invalidated" title="Permalink to this definition">¶</a></dt>
<dd><p>Check timestamp to determine if it was hard invalidated.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Boolean. True if <code class="docutils literal notranslate"><span class="pre">timestamp</span></code> is older than
the last region invalidation time and region is invalidated
in hard mode.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.region.DefaultInvalidationStrategy.is_invalidated">
<code class="sig-name descname">is_invalidated</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">timestamp</span><span class="p">:</span> <span class="n">float</span></em><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#dogpile.cache.region.DefaultInvalidationStrategy.is_invalidated" title="Permalink to this definition">¶</a></dt>
<dd><p>Check timestamp to determine if it was invalidated.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Boolean. True if <code class="docutils literal notranslate"><span class="pre">timestamp</span></code> is older than
the last region invalidation time.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.region.DefaultInvalidationStrategy.is_soft_invalidated">
<code class="sig-name descname">is_soft_invalidated</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">timestamp</span><span class="p">:</span> <span class="n">float</span></em><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#dogpile.cache.region.DefaultInvalidationStrategy.is_soft_invalidated" title="Permalink to this definition">¶</a></dt>
<dd><p>Check timestamp to determine if it was soft invalidated.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Boolean. True if <code class="docutils literal notranslate"><span class="pre">timestamp</span></code> is older than
the last region invalidation time and region is invalidated
in soft mode.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.region.DefaultInvalidationStrategy.was_hard_invalidated">
<code class="sig-name descname">was_hard_invalidated</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#dogpile.cache.region.DefaultInvalidationStrategy.was_hard_invalidated" title="Permalink to this definition">¶</a></dt>
<dd><p>Indicate the region was invalidated in hard mode.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Boolean. True if region was invalidated in hard mode.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.region.DefaultInvalidationStrategy.was_soft_invalidated">
<code class="sig-name descname">was_soft_invalidated</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#dogpile.cache.region.DefaultInvalidationStrategy.was_soft_invalidated" title="Permalink to this definition">¶</a></dt>
<dd><p>Indicate the region was invalidated in soft mode.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Boolean. True if region was invalidated in soft mode.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="dogpile.cache.region.RegionInvalidationStrategy">
<em class="property">class </em><code class="sig-prename descclassname">dogpile.cache.region.</code><code class="sig-name descname">RegionInvalidationStrategy</code><a class="headerlink" href="#dogpile.cache.region.RegionInvalidationStrategy" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Region invalidation strategy interface</p>
<p>Implement this interface and pass implementation instance
to <a class="reference internal" href="#dogpile.cache.region.CacheRegion.configure" title="dogpile.cache.region.CacheRegion.configure"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.configure()</span></code></a> to override default region invalidation.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">CustomInvalidationStrategy</span><span class="p">(</span><span class="n">RegionInvalidationStrategy</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_soft_invalidated</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_hard_invalidated</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">invalidate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hard</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">hard</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_soft_invalidated</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_hard_invalidated</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_soft_invalidated</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_hard_invalidated</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">is_invalidated</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">_soft_invalidated</span> <span class="ow">and</span>
                 <span class="n">timestamp</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_soft_invalidated</span><span class="p">)</span> <span class="ow">or</span>
                <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_hard_invalidated</span> <span class="ow">and</span>
                 <span class="n">timestamp</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hard_invalidated</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">was_hard_invalidated</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_hard_invalidated</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">is_hard_invalidated</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_hard_invalidated</span> <span class="ow">and</span>
                <span class="n">timestamp</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hard_invalidated</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">was_soft_invalidated</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_soft_invalidated</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">is_soft_invalidated</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_soft_invalidated</span> <span class="ow">and</span>
                <span class="n">timestamp</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_soft_invalidated</span><span class="p">)</span>
</pre></div>
</div>
<p>The custom implementation is injected into a <a class="reference internal" href="#dogpile.cache.region.CacheRegion" title="dogpile.cache.region.CacheRegion"><code class="xref py py-class docutils literal notranslate"><span class="pre">CacheRegion</span></code></a>
at configure time using the
<a class="reference internal" href="#dogpile.cache.region.CacheRegion.configure.params.region_invalidator" title="dogpile.cache.region.CacheRegion.configure"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">CacheRegion.configure.region_invalidator</span></code></a> parameter:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">region</span> <span class="o">=</span> <span class="n">CacheRegion</span><span class="p">()</span>

<span class="n">region</span> <span class="o">=</span> <span class="n">region</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">region_invalidator</span><span class="o">=</span><span class="n">CustomInvalidationStrategy</span><span class="p">())</span>  <span class="c1"># noqa</span>
</pre></div>
</div>
<p>Invalidation strategies that wish to have access to the
<a class="reference internal" href="#dogpile.cache.region.CacheRegion" title="dogpile.cache.region.CacheRegion"><code class="xref py py-class docutils literal notranslate"><span class="pre">CacheRegion</span></code></a> itself should construct the invalidator given the
region as an argument:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyInvalidator</span><span class="p">(</span><span class="n">RegionInvalidationStrategy</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">region</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">region</span> <span class="o">=</span> <span class="n">region</span>
        <span class="c1"># ...</span>

    <span class="c1"># ...</span>

<span class="n">region</span> <span class="o">=</span> <span class="n">CacheRegion</span><span class="p">()</span>
<span class="n">region</span> <span class="o">=</span> <span class="n">region</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">region_invalidator</span><span class="o">=</span><span class="n">MyInvalidator</span><span class="p">(</span><span class="n">region</span><span class="p">))</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.6.2.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#dogpile.cache.region.CacheRegion.configure.params.region_invalidator" title="dogpile.cache.region.CacheRegion.configure"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">CacheRegion.configure.region_invalidator</span></code></a></p>
</div>
<dl class="py method">
<dt id="dogpile.cache.region.RegionInvalidationStrategy.invalidate">
<code class="sig-name descname">invalidate</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">hard</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">True</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#dogpile.cache.region.RegionInvalidationStrategy.invalidate" title="Permalink to this definition">¶</a></dt>
<dd><p>Region invalidation.</p>
<p><a class="reference internal" href="#dogpile.cache.region.CacheRegion" title="dogpile.cache.region.CacheRegion"><code class="xref py py-class docutils literal notranslate"><span class="pre">CacheRegion</span></code></a> propagated call.
The default invalidation system works by setting
a current timestamp (using <code class="docutils literal notranslate"><span class="pre">time.time()</span></code>) to consider all older
timestamps effectively invalidated.</p>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.region.RegionInvalidationStrategy.is_hard_invalidated">
<code class="sig-name descname">is_hard_invalidated</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">timestamp</span><span class="p">:</span> <span class="n">float</span></em><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#dogpile.cache.region.RegionInvalidationStrategy.is_hard_invalidated" title="Permalink to this definition">¶</a></dt>
<dd><p>Check timestamp to determine if it was hard invalidated.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Boolean. True if <code class="docutils literal notranslate"><span class="pre">timestamp</span></code> is older than
the last region invalidation time and region is invalidated
in hard mode.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.region.RegionInvalidationStrategy.is_invalidated">
<code class="sig-name descname">is_invalidated</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">timestamp</span><span class="p">:</span> <span class="n">float</span></em><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#dogpile.cache.region.RegionInvalidationStrategy.is_invalidated" title="Permalink to this definition">¶</a></dt>
<dd><p>Check timestamp to determine if it was invalidated.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Boolean. True if <code class="docutils literal notranslate"><span class="pre">timestamp</span></code> is older than
the last region invalidation time.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.region.RegionInvalidationStrategy.is_soft_invalidated">
<code class="sig-name descname">is_soft_invalidated</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">timestamp</span><span class="p">:</span> <span class="n">float</span></em><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#dogpile.cache.region.RegionInvalidationStrategy.is_soft_invalidated" title="Permalink to this definition">¶</a></dt>
<dd><p>Check timestamp to determine if it was soft invalidated.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Boolean. True if <code class="docutils literal notranslate"><span class="pre">timestamp</span></code> is older than
the last region invalidation time and region is invalidated
in soft mode.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.region.RegionInvalidationStrategy.was_hard_invalidated">
<code class="sig-name descname">was_hard_invalidated</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#dogpile.cache.region.RegionInvalidationStrategy.was_hard_invalidated" title="Permalink to this definition">¶</a></dt>
<dd><p>Indicate the region was invalidated in hard mode.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Boolean. True if region was invalidated in hard mode.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.region.RegionInvalidationStrategy.was_soft_invalidated">
<code class="sig-name descname">was_soft_invalidated</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#dogpile.cache.region.RegionInvalidationStrategy.was_soft_invalidated" title="Permalink to this definition">¶</a></dt>
<dd><p>Indicate the region was invalidated in soft mode.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Boolean. True if region was invalidated in soft mode.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="dogpile.cache.region.make_region">
<code class="sig-prename descclassname">dogpile.cache.region.</code><code class="sig-name descname">make_region</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">arg</span><span class="p">:</span> <span class="n">Any</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kw</span><span class="p">:</span> <span class="n">Any</span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#dogpile.cache.region.CacheRegion" title="dogpile.cache.region.CacheRegion">dogpile.cache.region.CacheRegion</a><a class="headerlink" href="#dogpile.cache.region.make_region" title="Permalink to this definition">¶</a></dt>
<dd><p>Instantiate a new <a class="reference internal" href="#dogpile.cache.region.CacheRegion" title="dogpile.cache.region.CacheRegion"><code class="xref py py-class docutils literal notranslate"><span class="pre">CacheRegion</span></code></a>.</p>
<p>Currently, <a class="reference internal" href="#dogpile.cache.region.make_region" title="dogpile.cache.region.make_region"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_region()</span></code></a> is a passthrough
to <a class="reference internal" href="#dogpile.cache.region.CacheRegion" title="dogpile.cache.region.CacheRegion"><code class="xref py py-class docutils literal notranslate"><span class="pre">CacheRegion</span></code></a>.  See that class for
constructor arguments.</p>
</dd></dl>

<dl class="py data">
<dt id="dogpile.cache.region.value_version">
<code class="sig-prename descclassname">dogpile.cache.region.</code><code class="sig-name descname">value_version</code><em class="property"> = 2</em><a class="headerlink" href="#dogpile.cache.region.value_version" title="Permalink to this definition">¶</a></dt>
<dd><p>An integer placed in the <a class="reference internal" href="#dogpile.cache.api.CachedValue" title="dogpile.cache.api.CachedValue"><code class="xref py py-class docutils literal notranslate"><span class="pre">CachedValue</span></code></a>
so that new versions of dogpile.cache can detect cached
values from a previous, backwards-incompatible version.</p>
</dd></dl>

</div>
<div class="section" id="backend-api">
<h2>Backend API<a class="headerlink" href="#backend-api" title="Permalink to this headline">¶</a></h2>
<p>See the section <a class="reference internal" href="usage.html#creating-backends"><span class="std std-ref">Creating Backends</span></a> for details on how to
register new backends or <a class="reference internal" href="usage.html#changing-backend-behavior"><span class="std std-ref">Changing Backend Behavior</span></a> for details on
how to alter the behavior of existing backends.</p>
<span class="target" id="module-dogpile.cache.api"></span><dl class="py data">
<dt id="dogpile.cache.api.BackendFormatted">
<code class="sig-prename descclassname">dogpile.cache.api.</code><code class="sig-name descname">BackendFormatted</code><a class="headerlink" href="#dogpile.cache.api.BackendFormatted" title="Permalink to this definition">¶</a></dt>
<dd><p>Describes the type returned from the <a class="reference internal" href="#dogpile.cache.api.CacheBackend.get" title="dogpile.cache.api.CacheBackend.get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheBackend.get()</span></code></a> method.</p>
<p>alias of Union[dogpile.cache.api.CachedValue, dogpile.cache.api.NoValue, bytes]</p>
</dd></dl>

<dl class="py data">
<dt id="dogpile.cache.api.BackendSetType">
<code class="sig-prename descclassname">dogpile.cache.api.</code><code class="sig-name descname">BackendSetType</code><a class="headerlink" href="#dogpile.cache.api.BackendSetType" title="Permalink to this definition">¶</a></dt>
<dd><p>Describes the value argument passed to the <a class="reference internal" href="#dogpile.cache.api.CacheBackend.set" title="dogpile.cache.api.CacheBackend.set"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheBackend.set()</span></code></a>
method.</p>
<p>alias of Union[dogpile.cache.api.CachedValue, bytes]</p>
</dd></dl>

<dl class="py class">
<dt id="dogpile.cache.api.BytesBackend">
<em class="property">class </em><code class="sig-prename descclassname">dogpile.cache.api.</code><code class="sig-name descname">BytesBackend</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">arguments</span><span class="p">:</span> <span class="n">Mapping<span class="p">[</span>str<span class="p">, </span>Any<span class="p">]</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.api.BytesBackend" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">dogpile.cache.api.DefaultSerialization</span></code>, <a class="reference internal" href="#dogpile.cache.api.CacheBackend" title="dogpile.cache.api.CacheBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">dogpile.cache.api.CacheBackend</span></code></a></p>
<p>A cache backend that receives and returns series of bytes.</p>
<p>This backend only supports the “serialized” form of values; subclasses
should implement <a class="reference internal" href="#dogpile.cache.api.BytesBackend.get_serialized" title="dogpile.cache.api.BytesBackend.get_serialized"><code class="xref py py-meth docutils literal notranslate"><span class="pre">BytesBackend.get_serialized()</span></code></a>,
<a class="reference internal" href="#dogpile.cache.api.BytesBackend.get_serialized_multi" title="dogpile.cache.api.BytesBackend.get_serialized_multi"><code class="xref py py-meth docutils literal notranslate"><span class="pre">BytesBackend.get_serialized_multi()</span></code></a>,
<a class="reference internal" href="#dogpile.cache.api.BytesBackend.set_serialized" title="dogpile.cache.api.BytesBackend.set_serialized"><code class="xref py py-meth docutils literal notranslate"><span class="pre">BytesBackend.set_serialized()</span></code></a>,
<a class="reference internal" href="#dogpile.cache.api.BytesBackend.set_serialized_multi" title="dogpile.cache.api.BytesBackend.set_serialized_multi"><code class="xref py py-meth docutils literal notranslate"><span class="pre">BytesBackend.set_serialized_multi()</span></code></a>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.1.</span></p>
</div>
<dl class="py method">
<dt id="dogpile.cache.api.BytesBackend.get_serialized">
<code class="sig-name descname">get_serialized</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; Union<span class="p">[</span>bytes<span class="p">, </span><a class="reference internal" href="#dogpile.cache.api.NoValue" title="dogpile.cache.api.NoValue">dogpile.cache.api.NoValue</a><span class="p">]</span><a class="headerlink" href="#dogpile.cache.api.BytesBackend.get_serialized" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a serialized value from the cache.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><span class="target" id="dogpile.cache.api.BytesBackend.get_serialized.params.key"></span><strong>key</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.api.BytesBackend.get_serialized.params.key">¶</a> – String key that was passed to the <a class="reference internal" href="#dogpile.cache.region.CacheRegion.get" title="dogpile.cache.region.CacheRegion.get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.get()</span></code></a>
method, which will also be processed by the “key mangling” function
if one was present.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a bytes object, or <a class="reference internal" href="#dogpile.cache.api.NO_VALUE" title="dogpile.cache.api.NO_VALUE"><code class="xref py py-data docutils literal notranslate"><span class="pre">NO_VALUE</span></code></a>
constant if not present.</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.1.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.api.BytesBackend.get_serialized_multi">
<code class="sig-name descname">get_serialized_multi</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">keys</span><span class="p">:</span> <span class="n">Sequence<span class="p">[</span>str<span class="p">]</span></span></em><span class="sig-paren">)</span> &#x2192; Sequence<span class="p">[</span>Union<span class="p">[</span>bytes<span class="p">, </span><a class="reference internal" href="#dogpile.cache.api.NoValue" title="dogpile.cache.api.NoValue">dogpile.cache.api.NoValue</a><span class="p">]</span><span class="p">]</span><a class="headerlink" href="#dogpile.cache.api.BytesBackend.get_serialized_multi" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve multiple serialized values from the cache.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><span class="target" id="dogpile.cache.api.BytesBackend.get_serialized_multi.params.keys"></span><strong>keys</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.api.BytesBackend.get_serialized_multi.params.keys">¶</a> – sequence of string keys that was passed to the
<a class="reference internal" href="#dogpile.cache.region.CacheRegion.get_multi" title="dogpile.cache.region.CacheRegion.get_multi"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.get_multi()</span></code></a> method, which will also be processed
by the “key mangling” function if one was present.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of bytes objects</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.1.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.api.BytesBackend.set_serialized">
<code class="sig-name descname">set_serialized</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">value</span><span class="p">:</span> <span class="n">bytes</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#dogpile.cache.api.BytesBackend.set_serialized" title="Permalink to this definition">¶</a></dt>
<dd><p>Set a serialized value in the cache.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="dogpile.cache.api.BytesBackend.set_serialized.params.key"></span><strong>key</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.api.BytesBackend.set_serialized.params.key">¶</a> – String key that was passed to the <a class="reference internal" href="#dogpile.cache.region.CacheRegion.set" title="dogpile.cache.region.CacheRegion.set"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.set()</span></code></a>
method, which will also be processed by the “key mangling” function
if one was present.</p></li>
<li><p><span class="target" id="dogpile.cache.api.BytesBackend.set_serialized.params.value"></span><strong>value</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.api.BytesBackend.set_serialized.params.value">¶</a> – a bytes object to be stored.</p></li>
</ul>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.1.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.api.BytesBackend.set_serialized_multi">
<code class="sig-name descname">set_serialized_multi</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mapping</span><span class="p">:</span> <span class="n">Mapping<span class="p">[</span>str<span class="p">, </span>bytes<span class="p">]</span></span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#dogpile.cache.api.BytesBackend.set_serialized_multi" title="Permalink to this definition">¶</a></dt>
<dd><p>Set multiple serialized values in the cache.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><span class="target" id="dogpile.cache.api.BytesBackend.set_serialized_multi.params.mapping"></span><strong>mapping</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.api.BytesBackend.set_serialized_multi.params.mapping">¶</a> – a dict in which the key will be whatever was passed to
the <a class="reference internal" href="#dogpile.cache.region.CacheRegion.set_multi" title="dogpile.cache.region.CacheRegion.set_multi"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.set_multi()</span></code></a> method, processed by the “key
mangling” function, if any.</p>
</dd>
</dl>
<p>When implementing a new <a class="reference internal" href="#dogpile.cache.api.CacheBackend" title="dogpile.cache.api.CacheBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">CacheBackend</span></code></a> or cutomizing via
<a class="reference internal" href="#dogpile.cache.proxy.ProxyBackend" title="dogpile.cache.proxy.ProxyBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">ProxyBackend</span></code></a>, be aware that when this method is invoked by
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Region.get_or_create_multi()</span></code>, the <code class="docutils literal notranslate"><span class="pre">mapping</span></code> values are the
same ones returned to the upstream caller. If the subclass alters the
values in any way, it must not do so ‘in-place’ on the <code class="docutils literal notranslate"><span class="pre">mapping</span></code> dict
– that will have the undesirable effect of modifying the returned
values as well.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.1.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="dogpile.cache.api.CacheBackend">
<em class="property">class </em><code class="sig-prename descclassname">dogpile.cache.api.</code><code class="sig-name descname">CacheBackend</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">arguments</span><span class="p">:</span> <span class="n">Mapping<span class="p">[</span>str<span class="p">, </span>Any<span class="p">]</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.api.CacheBackend" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Base class for backend implementations.</p>
<p>Backends which set and get Python object values should subclass this
backend.   For backends in which the value that’s stored is ultimately
a stream of bytes, the <a class="reference internal" href="#dogpile.cache.api.BytesBackend" title="dogpile.cache.api.BytesBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">BytesBackend</span></code></a> should be used.</p>
<dl class="py method">
<dt id="dogpile.cache.api.CacheBackend.delete">
<code class="sig-name descname">delete</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#dogpile.cache.api.CacheBackend.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete a value from the cache.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><span class="target" id="dogpile.cache.api.CacheBackend.delete.params.key"></span><strong>key</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.api.CacheBackend.delete.params.key">¶</a> – String key that was passed to the
<a class="reference internal" href="#dogpile.cache.region.CacheRegion.delete" title="dogpile.cache.region.CacheRegion.delete"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.delete()</span></code></a>
method, which will also be processed by the “key mangling” function
if one was present.</p>
</dd>
</dl>
<p>The behavior here should be idempotent,
that is, can be called any number of times
regardless of whether or not the
key exists.</p>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.api.CacheBackend.delete_multi">
<code class="sig-name descname">delete_multi</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">keys</span><span class="p">:</span> <span class="n">Sequence<span class="p">[</span>str<span class="p">]</span></span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#dogpile.cache.api.CacheBackend.delete_multi" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete multiple values from the cache.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><span class="target" id="dogpile.cache.api.CacheBackend.delete_multi.params.keys"></span><strong>keys</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.api.CacheBackend.delete_multi.params.keys">¶</a> – sequence of string keys that was passed to the
<a class="reference internal" href="#dogpile.cache.region.CacheRegion.delete_multi" title="dogpile.cache.region.CacheRegion.delete_multi"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.delete_multi()</span></code></a> method, which will also be processed
by the “key mangling” function if one was present.</p>
</dd>
</dl>
<p>The behavior here should be idempotent,
that is, can be called any number of times
regardless of whether or not the
key exists.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.5.0.</span></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt id="dogpile.cache.api.CacheBackend.deserializer">
<code class="sig-name descname">deserializer</code><em class="property">: Union<span class="p">[</span>None<span class="p">, </span>Callable<span class="p">[</span><span class="p">[</span>bytes<span class="p">]</span><span class="p">, </span>Any<span class="p">]</span><span class="p">, </span>staticmethod<span class="p">]</span></em><em class="property"> = None</em><a class="headerlink" href="#dogpile.cache.api.CacheBackend.deserializer" title="Permalink to this definition">¶</a></dt>
<dd><p>deserializer function that will be used by default if not overridden
by the region.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.1.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.api.CacheBackend.get">
<code class="sig-name descname">get</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; Union<span class="p">[</span><a class="reference internal" href="#dogpile.cache.api.CachedValue" title="dogpile.cache.api.CachedValue">dogpile.cache.api.CachedValue</a><span class="p">, </span><a class="reference internal" href="#dogpile.cache.api.NoValue" title="dogpile.cache.api.NoValue">dogpile.cache.api.NoValue</a><span class="p">, </span>bytes<span class="p">]</span><a class="headerlink" href="#dogpile.cache.api.CacheBackend.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve an optionally serialized value from the cache.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><span class="target" id="dogpile.cache.api.CacheBackend.get.params.key"></span><strong>key</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.api.CacheBackend.get.params.key">¶</a> – String key that was passed to the <a class="reference internal" href="#dogpile.cache.region.CacheRegion.get" title="dogpile.cache.region.CacheRegion.get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.get()</span></code></a>
method, which will also be processed by the “key mangling” function
if one was present.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the Python object that corresponds to
what was established via the <a class="reference internal" href="#dogpile.cache.api.CacheBackend.set" title="dogpile.cache.api.CacheBackend.set"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheBackend.set()</span></code></a> method,
or the <a class="reference internal" href="#dogpile.cache.api.NO_VALUE" title="dogpile.cache.api.NO_VALUE"><code class="xref py py-data docutils literal notranslate"><span class="pre">NO_VALUE</span></code></a> constant if not present.</p>
</dd>
</dl>
<p>If a serializer is in use, this method will only be called if the
<a class="reference internal" href="#dogpile.cache.api.CacheBackend.get_serialized" title="dogpile.cache.api.CacheBackend.get_serialized"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheBackend.get_serialized()</span></code></a> method is not overridden.</p>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.api.CacheBackend.get_multi">
<code class="sig-name descname">get_multi</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">keys</span><span class="p">:</span> <span class="n">Sequence<span class="p">[</span>str<span class="p">]</span></span></em><span class="sig-paren">)</span> &#x2192; Sequence<span class="p">[</span>Union<span class="p">[</span><a class="reference internal" href="#dogpile.cache.api.CachedValue" title="dogpile.cache.api.CachedValue">dogpile.cache.api.CachedValue</a><span class="p">, </span><a class="reference internal" href="#dogpile.cache.api.NoValue" title="dogpile.cache.api.NoValue">dogpile.cache.api.NoValue</a><span class="p">, </span>bytes<span class="p">]</span><span class="p">]</span><a class="headerlink" href="#dogpile.cache.api.CacheBackend.get_multi" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve multiple optionally serialized values from the cache.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><span class="target" id="dogpile.cache.api.CacheBackend.get_multi.params.keys"></span><strong>keys</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.api.CacheBackend.get_multi.params.keys">¶</a> – sequence of string keys that was passed to the
<a class="reference internal" href="#dogpile.cache.region.CacheRegion.get_multi" title="dogpile.cache.region.CacheRegion.get_multi"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.get_multi()</span></code></a> method, which will also be processed
by the “key mangling” function if one was present.</p>
</dd>
</dl>
<dl class="simple">
<dt>:return a list of values as would be returned</dt><dd><p>individually via the <a class="reference internal" href="#dogpile.cache.api.CacheBackend.get" title="dogpile.cache.api.CacheBackend.get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheBackend.get()</span></code></a> method, corresponding
to the list of keys given.</p>
</dd>
</dl>
<p>If a serializer is in use, this method will only be called if the
<a class="reference internal" href="#dogpile.cache.api.CacheBackend.get_serialized_multi" title="dogpile.cache.api.CacheBackend.get_serialized_multi"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheBackend.get_serialized_multi()</span></code></a> method is not overridden.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.5.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.api.CacheBackend.get_mutex">
<code class="sig-name descname">get_mutex</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; Optional<span class="p">[</span><a class="reference internal" href="#dogpile.cache.api.CacheMutex" title="dogpile.cache.api.CacheMutex">dogpile.cache.api.CacheMutex</a><span class="p">]</span><a class="headerlink" href="#dogpile.cache.api.CacheBackend.get_mutex" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an optional mutexing object for the given key.</p>
<p>This object need only provide an <code class="docutils literal notranslate"><span class="pre">acquire()</span></code>
and <code class="docutils literal notranslate"><span class="pre">release()</span></code> method.</p>
<p>May return <code class="docutils literal notranslate"><span class="pre">None</span></code>, in which case the dogpile
lock will use a regular <code class="docutils literal notranslate"><span class="pre">threading.Lock</span></code>
object to mutex concurrent threads for
value creation.   The default implementation
returns <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<p>Different backends may want to provide various
kinds of “mutex” objects, such as those which
link to lock files, distributed mutexes,
memcached semaphores, etc.  Whatever
kind of system is best suited for the scope
and behavior of the caching backend.</p>
<p>A mutex that takes the key into account will
allow multiple regenerate operations across
keys to proceed simultaneously, while a mutex
that does not will serialize regenerate operations
to just one at a time across all keys in the region.
The latter approach, or a variant that involves
a modulus of the given key’s hash value,
can be used as a means of throttling the total
number of value recreation operations that may
proceed at one time.</p>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.api.CacheBackend.get_serialized">
<code class="sig-name descname">get_serialized</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; Union<span class="p">[</span>bytes<span class="p">, </span><a class="reference internal" href="#dogpile.cache.api.NoValue" title="dogpile.cache.api.NoValue">dogpile.cache.api.NoValue</a><span class="p">]</span><a class="headerlink" href="#dogpile.cache.api.CacheBackend.get_serialized" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a serialized value from the cache.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><span class="target" id="dogpile.cache.api.CacheBackend.get_serialized.params.key"></span><strong>key</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.api.CacheBackend.get_serialized.params.key">¶</a> – String key that was passed to the <a class="reference internal" href="#dogpile.cache.region.CacheRegion.get" title="dogpile.cache.region.CacheRegion.get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.get()</span></code></a>
method, which will also be processed by the “key mangling” function
if one was present.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a bytes object, or <a class="reference internal" href="#dogpile.cache.api.NO_VALUE" title="dogpile.cache.api.NO_VALUE"><code class="xref py py-data docutils literal notranslate"><span class="pre">NO_VALUE</span></code></a>
constant if not present.</p>
</dd>
</dl>
<p>The default implementation of this method for <a class="reference internal" href="#dogpile.cache.api.CacheBackend" title="dogpile.cache.api.CacheBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">CacheBackend</span></code></a>
returns the value of the <a class="reference internal" href="#dogpile.cache.api.CacheBackend.get" title="dogpile.cache.api.CacheBackend.get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheBackend.get()</span></code></a> method.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.1.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#dogpile.cache.api.BytesBackend" title="dogpile.cache.api.BytesBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">BytesBackend</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.api.CacheBackend.get_serialized_multi">
<code class="sig-name descname">get_serialized_multi</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">keys</span><span class="p">:</span> <span class="n">Sequence<span class="p">[</span>str<span class="p">]</span></span></em><span class="sig-paren">)</span> &#x2192; Sequence<span class="p">[</span>Union<span class="p">[</span>bytes<span class="p">, </span><a class="reference internal" href="#dogpile.cache.api.NoValue" title="dogpile.cache.api.NoValue">dogpile.cache.api.NoValue</a><span class="p">]</span><span class="p">]</span><a class="headerlink" href="#dogpile.cache.api.CacheBackend.get_serialized_multi" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve multiple serialized values from the cache.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><span class="target" id="dogpile.cache.api.CacheBackend.get_serialized_multi.params.keys"></span><strong>keys</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.api.CacheBackend.get_serialized_multi.params.keys">¶</a> – sequence of string keys that was passed to the
<a class="reference internal" href="#dogpile.cache.region.CacheRegion.get_multi" title="dogpile.cache.region.CacheRegion.get_multi"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.get_multi()</span></code></a> method, which will also be processed
by the “key mangling” function if one was present.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of bytes objects</p>
</dd>
</dl>
<p>The default implementation of this method for <a class="reference internal" href="#dogpile.cache.api.CacheBackend" title="dogpile.cache.api.CacheBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">CacheBackend</span></code></a>
returns the value of the <a class="reference internal" href="#dogpile.cache.api.CacheBackend.get_multi" title="dogpile.cache.api.CacheBackend.get_multi"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheBackend.get_multi()</span></code></a> method.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.1.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#dogpile.cache.api.BytesBackend" title="dogpile.cache.api.BytesBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">BytesBackend</span></code></a></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt id="dogpile.cache.api.CacheBackend.key_mangler">
<code class="sig-name descname">key_mangler</code><em class="property">: Optional<span class="p">[</span>Callable<span class="p">[</span><span class="p">[</span>str<span class="p">]</span><span class="p">, </span>str<span class="p">]</span><span class="p">]</span></em><em class="property"> = None</em><a class="headerlink" href="#dogpile.cache.api.CacheBackend.key_mangler" title="Permalink to this definition">¶</a></dt>
<dd><p>Key mangling function.</p>
<p>May be None, or otherwise declared
as an ordinary instance method.</p>
</dd></dl>

<dl class="py attribute">
<dt id="dogpile.cache.api.CacheBackend.serializer">
<code class="sig-name descname">serializer</code><em class="property">: Union<span class="p">[</span>None<span class="p">, </span>Callable<span class="p">[</span><span class="p">[</span>Any<span class="p">]</span><span class="p">, </span>bytes<span class="p">]</span><span class="p">, </span>staticmethod<span class="p">]</span></em><em class="property"> = None</em><a class="headerlink" href="#dogpile.cache.api.CacheBackend.serializer" title="Permalink to this definition">¶</a></dt>
<dd><p>Serializer function that will be used by default if not overridden
by the region.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.1.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.api.CacheBackend.set">
<code class="sig-name descname">set</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">value</span><span class="p">:</span> <span class="n">Union<span class="p">[</span><a class="reference internal" href="#dogpile.cache.api.CachedValue" title="dogpile.cache.api.CachedValue">dogpile.cache.api.CachedValue</a><span class="p">, </span>bytes<span class="p">]</span></span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#dogpile.cache.api.CacheBackend.set" title="Permalink to this definition">¶</a></dt>
<dd><p>Set an optionally serialized value in the cache.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="dogpile.cache.api.CacheBackend.set.params.key"></span><strong>key</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.api.CacheBackend.set.params.key">¶</a> – String key that was passed to the <a class="reference internal" href="#dogpile.cache.region.CacheRegion.set" title="dogpile.cache.region.CacheRegion.set"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.set()</span></code></a>
method, which will also be processed by the “key mangling” function
if one was present.</p></li>
<li><p><span class="target" id="dogpile.cache.api.CacheBackend.set.params.value"></span><strong>value</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.api.CacheBackend.set.params.value">¶</a> – The optionally serialized <a class="reference internal" href="#dogpile.cache.api.CachedValue" title="dogpile.cache.api.CachedValue"><code class="xref py py-class docutils literal notranslate"><span class="pre">CachedValue</span></code></a> object.
May be an instance of <a class="reference internal" href="#dogpile.cache.api.CachedValue" title="dogpile.cache.api.CachedValue"><code class="xref py py-class docutils literal notranslate"><span class="pre">CachedValue</span></code></a> or a bytes object
depending on if a serializer is in use with the region and if the
<a class="reference internal" href="#dogpile.cache.api.CacheBackend.set_serialized" title="dogpile.cache.api.CacheBackend.set_serialized"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheBackend.set_serialized()</span></code></a> method is not overridden.</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#dogpile.cache.api.CacheBackend.set_serialized" title="dogpile.cache.api.CacheBackend.set_serialized"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheBackend.set_serialized()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.api.CacheBackend.set_multi">
<code class="sig-name descname">set_multi</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mapping</span><span class="p">:</span> <span class="n">Mapping<span class="p">[</span>str<span class="p">, </span>Union<span class="p">[</span><a class="reference internal" href="#dogpile.cache.api.CachedValue" title="dogpile.cache.api.CachedValue">dogpile.cache.api.CachedValue</a><span class="p">, </span>bytes<span class="p">]</span><span class="p">]</span></span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#dogpile.cache.api.CacheBackend.set_multi" title="Permalink to this definition">¶</a></dt>
<dd><p>Set multiple values in the cache.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><span class="target" id="dogpile.cache.api.CacheBackend.set_multi.params.mapping"></span><strong>mapping</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.api.CacheBackend.set_multi.params.mapping">¶</a> – a dict in which the key will be whatever was passed to
the <a class="reference internal" href="#dogpile.cache.region.CacheRegion.set_multi" title="dogpile.cache.region.CacheRegion.set_multi"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.set_multi()</span></code></a> method, processed by the “key
mangling” function, if any.</p>
</dd>
</dl>
<p>When implementing a new <a class="reference internal" href="#dogpile.cache.api.CacheBackend" title="dogpile.cache.api.CacheBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">CacheBackend</span></code></a> or cutomizing via
<a class="reference internal" href="#dogpile.cache.proxy.ProxyBackend" title="dogpile.cache.proxy.ProxyBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">ProxyBackend</span></code></a>, be aware that when this method is invoked by
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Region.get_or_create_multi()</span></code>, the <code class="docutils literal notranslate"><span class="pre">mapping</span></code> values are the
same ones returned to the upstream caller. If the subclass alters the
values in any way, it must not do so ‘in-place’ on the <code class="docutils literal notranslate"><span class="pre">mapping</span></code> dict
– that will have the undesirable effect of modifying the returned
values as well.</p>
<p>If a serializer is in use, this method will only be called if the
<a class="reference internal" href="#dogpile.cache.api.CacheBackend.set_serialized_multi" title="dogpile.cache.api.CacheBackend.set_serialized_multi"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheBackend.set_serialized_multi()</span></code></a> method is not overridden.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.5.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.api.CacheBackend.set_serialized">
<code class="sig-name descname">set_serialized</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">value</span><span class="p">:</span> <span class="n">bytes</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#dogpile.cache.api.CacheBackend.set_serialized" title="Permalink to this definition">¶</a></dt>
<dd><p>Set a serialized value in the cache.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="dogpile.cache.api.CacheBackend.set_serialized.params.key"></span><strong>key</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.api.CacheBackend.set_serialized.params.key">¶</a> – String key that was passed to the <a class="reference internal" href="#dogpile.cache.region.CacheRegion.set" title="dogpile.cache.region.CacheRegion.set"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.set()</span></code></a>
method, which will also be processed by the “key mangling” function
if one was present.</p></li>
<li><p><span class="target" id="dogpile.cache.api.CacheBackend.set_serialized.params.value"></span><strong>value</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.api.CacheBackend.set_serialized.params.value">¶</a> – a bytes object to be stored.</p></li>
</ul>
</dd>
</dl>
<p>The default implementation of this method for <a class="reference internal" href="#dogpile.cache.api.CacheBackend" title="dogpile.cache.api.CacheBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">CacheBackend</span></code></a>
calls upon the <a class="reference internal" href="#dogpile.cache.api.CacheBackend.set" title="dogpile.cache.api.CacheBackend.set"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheBackend.set()</span></code></a> method.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.1.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#dogpile.cache.api.BytesBackend" title="dogpile.cache.api.BytesBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">BytesBackend</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.api.CacheBackend.set_serialized_multi">
<code class="sig-name descname">set_serialized_multi</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mapping</span><span class="p">:</span> <span class="n">Mapping<span class="p">[</span>str<span class="p">, </span>bytes<span class="p">]</span></span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#dogpile.cache.api.CacheBackend.set_serialized_multi" title="Permalink to this definition">¶</a></dt>
<dd><p>Set multiple serialized values in the cache.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><span class="target" id="dogpile.cache.api.CacheBackend.set_serialized_multi.params.mapping"></span><strong>mapping</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.api.CacheBackend.set_serialized_multi.params.mapping">¶</a> – a dict in which the key will be whatever was passed to
the <a class="reference internal" href="#dogpile.cache.region.CacheRegion.set_multi" title="dogpile.cache.region.CacheRegion.set_multi"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.set_multi()</span></code></a> method, processed by the “key
mangling” function, if any.</p>
</dd>
</dl>
<p>When implementing a new <a class="reference internal" href="#dogpile.cache.api.CacheBackend" title="dogpile.cache.api.CacheBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">CacheBackend</span></code></a> or cutomizing via
<a class="reference internal" href="#dogpile.cache.proxy.ProxyBackend" title="dogpile.cache.proxy.ProxyBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">ProxyBackend</span></code></a>, be aware that when this method is invoked by
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Region.get_or_create_multi()</span></code>, the <code class="docutils literal notranslate"><span class="pre">mapping</span></code> values are the
same ones returned to the upstream caller. If the subclass alters the
values in any way, it must not do so ‘in-place’ on the <code class="docutils literal notranslate"><span class="pre">mapping</span></code> dict
– that will have the undesirable effect of modifying the returned
values as well.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.1.</span></p>
</div>
<p>The default implementation of this method for <a class="reference internal" href="#dogpile.cache.api.CacheBackend" title="dogpile.cache.api.CacheBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">CacheBackend</span></code></a>
calls upon the <a class="reference internal" href="#dogpile.cache.api.CacheBackend.set_multi" title="dogpile.cache.api.CacheBackend.set_multi"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheBackend.set_multi()</span></code></a> method.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#dogpile.cache.api.BytesBackend" title="dogpile.cache.api.BytesBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">BytesBackend</span></code></a></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="dogpile.cache.api.CacheMutex">
<em class="property">class </em><code class="sig-prename descclassname">dogpile.cache.api.</code><code class="sig-name descname">CacheMutex</code><a class="headerlink" href="#dogpile.cache.api.CacheMutex" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">abc.ABC</span></code></p>
<p>Describes a mutexing object with acquire and release methods.</p>
<p>This is an abstract base class; any object that has acquire/release
methods may be used.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.1.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#dogpile.cache.api.CacheBackend.get_mutex" title="dogpile.cache.api.CacheBackend.get_mutex"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheBackend.get_mutex()</span></code></a> - the backend method that optionally
returns this locking object.</p>
</div>
<dl class="py method">
<dt id="dogpile.cache.api.CacheMutex.acquire">
<em class="property">abstract </em><code class="sig-name descname">acquire</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">wait</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">True</span></em><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#dogpile.cache.api.CacheMutex.acquire" title="Permalink to this definition">¶</a></dt>
<dd><p>Acquire the mutex.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><span class="target" id="dogpile.cache.api.CacheMutex.acquire.params.wait"></span><strong>wait</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.api.CacheMutex.acquire.params.wait">¶</a> – if True, block until available, else return True/False
immediately.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if the lock succeeded.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.api.CacheMutex.release">
<em class="property">abstract </em><code class="sig-name descname">release</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#dogpile.cache.api.CacheMutex.release" title="Permalink to this definition">¶</a></dt>
<dd><p>Release the mutex.</p>
</dd></dl>

</dd></dl>

<dl class="py data">
<dt id="dogpile.cache.api.CacheReturnType">
<code class="sig-prename descclassname">dogpile.cache.api.</code><code class="sig-name descname">CacheReturnType</code><a class="headerlink" href="#dogpile.cache.api.CacheReturnType" title="Permalink to this definition">¶</a></dt>
<dd><p>The non-serialized form of what may be returned from a backend
get method.</p>
<p>alias of Union[dogpile.cache.api.CachedValue, dogpile.cache.api.NoValue]</p>
</dd></dl>

<dl class="py class">
<dt id="dogpile.cache.api.CachedValue">
<em class="property">class </em><code class="sig-prename descclassname">dogpile.cache.api.</code><code class="sig-name descname">CachedValue</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">payload</span><span class="p">:</span> <span class="n">Any</span></em>, <em class="sig-param"><span class="n">metadata</span><span class="p">:</span> <span class="n">Mapping<span class="p">[</span>str<span class="p">, </span>Any<span class="p">]</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.api.CachedValue" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code></p>
<p>Represent a value stored in the cache.</p>
<p><a class="reference internal" href="#dogpile.cache.api.CachedValue" title="dogpile.cache.api.CachedValue"><code class="xref py py-class docutils literal notranslate"><span class="pre">CachedValue</span></code></a> is a two-tuple of
<code class="docutils literal notranslate"><span class="pre">(payload,</span> <span class="pre">metadata)</span></code>, where <code class="docutils literal notranslate"><span class="pre">metadata</span></code>
is dogpile.cache’s tracking information (
currently the creation time).</p>
<dl class="py attribute">
<dt id="dogpile.cache.api.CachedValue.metadata">
<code class="sig-name descname">metadata</code><em class="property">: Mapping<span class="p">[</span>str<span class="p">, </span>Any<span class="p">]</span></em><a class="headerlink" href="#dogpile.cache.api.CachedValue.metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 1</p>
</dd></dl>

<dl class="py attribute">
<dt id="dogpile.cache.api.CachedValue.payload">
<code class="sig-name descname">payload</code><em class="property">: Any</em><a class="headerlink" href="#dogpile.cache.api.CachedValue.payload" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 0</p>
</dd></dl>

</dd></dl>

<dl class="py attribute">
<dt id="dogpile.cache.api.KeyType">
<code class="sig-prename descclassname">dogpile.cache.api.</code><code class="sig-name descname">KeyType</code><a class="headerlink" href="#dogpile.cache.api.KeyType" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">builtins.str</span></code></p>
</dd></dl>

<dl class="py data">
<dt id="dogpile.cache.api.NO_VALUE">
<code class="sig-prename descclassname">dogpile.cache.api.</code><code class="sig-name descname">NO_VALUE</code><em class="property"> = &lt;dogpile.cache.api.NoValue object&gt;</em><a class="headerlink" href="#dogpile.cache.api.NO_VALUE" title="Permalink to this definition">¶</a></dt>
<dd><p>Value returned from <code class="docutils literal notranslate"><span class="pre">get()</span></code> that describes
a  key not present.</p>
</dd></dl>

<dl class="py class">
<dt id="dogpile.cache.api.NoValue">
<em class="property">class </em><code class="sig-prename descclassname">dogpile.cache.api.</code><code class="sig-name descname">NoValue</code><a class="headerlink" href="#dogpile.cache.api.NoValue" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Describe a missing cache value.</p>
<p>The <a class="reference internal" href="#dogpile.cache.api.NO_VALUE" title="dogpile.cache.api.NO_VALUE"><code class="xref py py-data docutils literal notranslate"><span class="pre">NO_VALUE</span></code></a> constant should be used.</p>
</dd></dl>

<dl class="py data">
<dt id="dogpile.cache.api.SerializedReturnType">
<code class="sig-prename descclassname">dogpile.cache.api.</code><code class="sig-name descname">SerializedReturnType</code><a class="headerlink" href="#dogpile.cache.api.SerializedReturnType" title="Permalink to this definition">¶</a></dt>
<dd><p>the serialized form of what may be returned from a backend get method.</p>
<p>alias of Union[bytes, dogpile.cache.api.NoValue]</p>
</dd></dl>

<dl class="py data">
<dt id="dogpile.cache.api.ValuePayload">
<code class="sig-prename descclassname">dogpile.cache.api.</code><code class="sig-name descname">ValuePayload</code><em class="property"> = typing.Any</em><a class="headerlink" href="#dogpile.cache.api.ValuePayload" title="Permalink to this definition">¶</a></dt>
<dd><p>An object to be placed in the cache against a key.</p>
</dd></dl>

</div>
<div class="section" id="module-dogpile.cache.backends.memory">
<span id="backends"></span><h2>Backends<a class="headerlink" href="#module-dogpile.cache.backends.memory" title="Permalink to this headline">¶</a></h2>
<div class="section" id="memory-backends">
<h3>Memory Backends<a class="headerlink" href="#memory-backends" title="Permalink to this headline">¶</a></h3>
<p>Provides simple dictionary-based backends.</p>
<p>The two backends are <a class="reference internal" href="#dogpile.cache.backends.memory.MemoryBackend" title="dogpile.cache.backends.memory.MemoryBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">MemoryBackend</span></code></a> and <a class="reference internal" href="#dogpile.cache.backends.memory.MemoryPickleBackend" title="dogpile.cache.backends.memory.MemoryPickleBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">MemoryPickleBackend</span></code></a>;
the latter applies a serialization step to cached values while the former
places the value as given into the dictionary.</p>
<dl class="py class">
<dt id="dogpile.cache.backends.memory.MemoryBackend">
<em class="property">class </em><code class="sig-prename descclassname">dogpile.cache.backends.memory.</code><code class="sig-name descname">MemoryBackend</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">arguments</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.backends.memory.MemoryBackend" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dogpile.cache.api.CacheBackend" title="dogpile.cache.api.CacheBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">dogpile.cache.api.CacheBackend</span></code></a></p>
<p>A backend that uses a plain dictionary.</p>
<p>There is no size management, and values which
are placed into the dictionary will remain
until explicitly removed.   Note that
Dogpile’s expiration of items is based on
timestamps and does not remove them from
the cache.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dogpile.cache</span> <span class="kn">import</span> <span class="n">make_region</span>

<span class="n">region</span> <span class="o">=</span> <span class="n">make_region</span><span class="p">()</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span>
    <span class="s1">&#39;dogpile.cache.memory&#39;</span>
<span class="p">)</span>
</pre></div>
</div>
<p>To use a Python dictionary of your choosing,
it can be passed in with the <code class="docutils literal notranslate"><span class="pre">cache_dict</span></code>
argument:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">my_dictionary</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">region</span> <span class="o">=</span> <span class="n">make_region</span><span class="p">()</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span>
    <span class="s1">&#39;dogpile.cache.memory&#39;</span><span class="p">,</span>
    <span class="n">arguments</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;cache_dict&quot;</span><span class="p">:</span><span class="n">my_dictionary</span>
    <span class="p">}</span>
<span class="p">)</span>
</pre></div>
</div>
<dl class="py method">
<dt id="dogpile.cache.backends.memory.MemoryBackend.delete">
<code class="sig-name descname">delete</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.backends.memory.MemoryBackend.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete a value from the cache.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><span class="target" id="dogpile.cache.backends.memory.MemoryBackend.delete.params.key"></span><strong>key</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.backends.memory.MemoryBackend.delete.params.key">¶</a> – String key that was passed to the
<a class="reference internal" href="#dogpile.cache.region.CacheRegion.delete" title="dogpile.cache.region.CacheRegion.delete"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.delete()</span></code></a>
method, which will also be processed by the “key mangling” function
if one was present.</p>
</dd>
</dl>
<p>The behavior here should be idempotent,
that is, can be called any number of times
regardless of whether or not the
key exists.</p>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.backends.memory.MemoryBackend.delete_multi">
<code class="sig-name descname">delete_multi</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">keys</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.backends.memory.MemoryBackend.delete_multi" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete multiple values from the cache.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><span class="target" id="dogpile.cache.backends.memory.MemoryBackend.delete_multi.params.keys"></span><strong>keys</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.backends.memory.MemoryBackend.delete_multi.params.keys">¶</a> – sequence of string keys that was passed to the
<a class="reference internal" href="#dogpile.cache.region.CacheRegion.delete_multi" title="dogpile.cache.region.CacheRegion.delete_multi"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.delete_multi()</span></code></a> method, which will also be processed
by the “key mangling” function if one was present.</p>
</dd>
</dl>
<p>The behavior here should be idempotent,
that is, can be called any number of times
regardless of whether or not the
key exists.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.5.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.backends.memory.MemoryBackend.get">
<code class="sig-name descname">get</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.backends.memory.MemoryBackend.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve an optionally serialized value from the cache.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><span class="target" id="dogpile.cache.backends.memory.MemoryBackend.get.params.key"></span><strong>key</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.backends.memory.MemoryBackend.get.params.key">¶</a> – String key that was passed to the <a class="reference internal" href="#dogpile.cache.region.CacheRegion.get" title="dogpile.cache.region.CacheRegion.get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.get()</span></code></a>
method, which will also be processed by the “key mangling” function
if one was present.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the Python object that corresponds to
what was established via the <a class="reference internal" href="#dogpile.cache.api.CacheBackend.set" title="dogpile.cache.api.CacheBackend.set"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheBackend.set()</span></code></a> method,
or the <a class="reference internal" href="#dogpile.cache.api.NO_VALUE" title="dogpile.cache.api.NO_VALUE"><code class="xref py py-data docutils literal notranslate"><span class="pre">NO_VALUE</span></code></a> constant if not present.</p>
</dd>
</dl>
<p>If a serializer is in use, this method will only be called if the
<a class="reference internal" href="#dogpile.cache.api.CacheBackend.get_serialized" title="dogpile.cache.api.CacheBackend.get_serialized"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheBackend.get_serialized()</span></code></a> method is not overridden.</p>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.backends.memory.MemoryBackend.get_multi">
<code class="sig-name descname">get_multi</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">keys</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.backends.memory.MemoryBackend.get_multi" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve multiple optionally serialized values from the cache.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><span class="target" id="dogpile.cache.backends.memory.MemoryBackend.get_multi.params.keys"></span><strong>keys</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.backends.memory.MemoryBackend.get_multi.params.keys">¶</a> – sequence of string keys that was passed to the
<a class="reference internal" href="#dogpile.cache.region.CacheRegion.get_multi" title="dogpile.cache.region.CacheRegion.get_multi"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.get_multi()</span></code></a> method, which will also be processed
by the “key mangling” function if one was present.</p>
</dd>
</dl>
<dl class="simple">
<dt>:return a list of values as would be returned</dt><dd><p>individually via the <a class="reference internal" href="#dogpile.cache.api.CacheBackend.get" title="dogpile.cache.api.CacheBackend.get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheBackend.get()</span></code></a> method, corresponding
to the list of keys given.</p>
</dd>
</dl>
<p>If a serializer is in use, this method will only be called if the
<a class="reference internal" href="#dogpile.cache.api.CacheBackend.get_serialized_multi" title="dogpile.cache.api.CacheBackend.get_serialized_multi"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheBackend.get_serialized_multi()</span></code></a> method is not overridden.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.5.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.backends.memory.MemoryBackend.set">
<code class="sig-name descname">set</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key</span></em>, <em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.backends.memory.MemoryBackend.set" title="Permalink to this definition">¶</a></dt>
<dd><p>Set an optionally serialized value in the cache.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="dogpile.cache.backends.memory.MemoryBackend.set.params.key"></span><strong>key</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.backends.memory.MemoryBackend.set.params.key">¶</a> – String key that was passed to the <a class="reference internal" href="#dogpile.cache.region.CacheRegion.set" title="dogpile.cache.region.CacheRegion.set"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.set()</span></code></a>
method, which will also be processed by the “key mangling” function
if one was present.</p></li>
<li><p><span class="target" id="dogpile.cache.backends.memory.MemoryBackend.set.params.value"></span><strong>value</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.backends.memory.MemoryBackend.set.params.value">¶</a> – The optionally serialized <a class="reference internal" href="#dogpile.cache.api.CachedValue" title="dogpile.cache.api.CachedValue"><code class="xref py py-class docutils literal notranslate"><span class="pre">CachedValue</span></code></a> object.
May be an instance of <a class="reference internal" href="#dogpile.cache.api.CachedValue" title="dogpile.cache.api.CachedValue"><code class="xref py py-class docutils literal notranslate"><span class="pre">CachedValue</span></code></a> or a bytes object
depending on if a serializer is in use with the region and if the
<a class="reference internal" href="#dogpile.cache.api.CacheBackend.set_serialized" title="dogpile.cache.api.CacheBackend.set_serialized"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheBackend.set_serialized()</span></code></a> method is not overridden.</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#dogpile.cache.api.CacheBackend.set_serialized" title="dogpile.cache.api.CacheBackend.set_serialized"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheBackend.set_serialized()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.backends.memory.MemoryBackend.set_multi">
<code class="sig-name descname">set_multi</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mapping</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.backends.memory.MemoryBackend.set_multi" title="Permalink to this definition">¶</a></dt>
<dd><p>Set multiple values in the cache.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><span class="target" id="dogpile.cache.backends.memory.MemoryBackend.set_multi.params.mapping"></span><strong>mapping</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.backends.memory.MemoryBackend.set_multi.params.mapping">¶</a> – a dict in which the key will be whatever was passed to
the <a class="reference internal" href="#dogpile.cache.region.CacheRegion.set_multi" title="dogpile.cache.region.CacheRegion.set_multi"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.set_multi()</span></code></a> method, processed by the “key
mangling” function, if any.</p>
</dd>
</dl>
<p>When implementing a new <a class="reference internal" href="#dogpile.cache.api.CacheBackend" title="dogpile.cache.api.CacheBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">CacheBackend</span></code></a> or cutomizing via
<a class="reference internal" href="#dogpile.cache.proxy.ProxyBackend" title="dogpile.cache.proxy.ProxyBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">ProxyBackend</span></code></a>, be aware that when this method is invoked by
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Region.get_or_create_multi()</span></code>, the <code class="docutils literal notranslate"><span class="pre">mapping</span></code> values are the
same ones returned to the upstream caller. If the subclass alters the
values in any way, it must not do so ‘in-place’ on the <code class="docutils literal notranslate"><span class="pre">mapping</span></code> dict
– that will have the undesirable effect of modifying the returned
values as well.</p>
<p>If a serializer is in use, this method will only be called if the
<a class="reference internal" href="#dogpile.cache.api.CacheBackend.set_serialized_multi" title="dogpile.cache.api.CacheBackend.set_serialized_multi"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheBackend.set_serialized_multi()</span></code></a> method is not overridden.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.5.0.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="dogpile.cache.backends.memory.MemoryPickleBackend">
<em class="property">class </em><code class="sig-prename descclassname">dogpile.cache.backends.memory.</code><code class="sig-name descname">MemoryPickleBackend</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">arguments</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.backends.memory.MemoryPickleBackend" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">dogpile.cache.api.DefaultSerialization</span></code>, <a class="reference internal" href="#dogpile.cache.backends.memory.MemoryBackend" title="dogpile.cache.backends.memory.MemoryBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">dogpile.cache.backends.memory.MemoryBackend</span></code></a></p>
<p>A backend that uses a plain dictionary, but serializes objects on
<a class="reference internal" href="#dogpile.cache.backends.memory.MemoryBackend.set" title="dogpile.cache.backends.memory.MemoryBackend.set"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MemoryBackend.set()</span></code></a> and deserializes <a class="reference internal" href="#dogpile.cache.backends.memory.MemoryBackend.get" title="dogpile.cache.backends.memory.MemoryBackend.get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MemoryBackend.get()</span></code></a>.</p>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dogpile.cache</span> <span class="kn">import</span> <span class="n">make_region</span>

<span class="n">region</span> <span class="o">=</span> <span class="n">make_region</span><span class="p">()</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span>
    <span class="s1">&#39;dogpile.cache.memory_pickle&#39;</span>
<span class="p">)</span>
</pre></div>
</div>
<p>The usage of pickle to serialize cached values allows an object
as placed in the cache to be a copy of the original given object, so
that any subsequent changes to the given object aren’t reflected
in the cached value, thus making the backend behave the same way
as other backends which make use of serialization.</p>
<p>The serialization is performed via pickle, and incurs the same
performance hit in doing so as that of other backends; in this way
the <a class="reference internal" href="#dogpile.cache.backends.memory.MemoryPickleBackend" title="dogpile.cache.backends.memory.MemoryPickleBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">MemoryPickleBackend</span></code></a> performance is somewhere in between
that of the pure <a class="reference internal" href="#dogpile.cache.backends.memory.MemoryBackend" title="dogpile.cache.backends.memory.MemoryBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">MemoryBackend</span></code></a> and the remote server oriented
backends such as that of Memcached or Redis.</p>
<p>Pickle behavior here is the same as that of the Redis backend, using
either <code class="docutils literal notranslate"><span class="pre">cPickle</span></code> or <code class="docutils literal notranslate"><span class="pre">pickle</span></code> and specifying <code class="docutils literal notranslate"><span class="pre">HIGHEST_PROTOCOL</span></code>
upon serialize.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.5.3.</span></p>
</div>
</dd></dl>

</div>
<span class="target" id="module-dogpile.cache.backends.memcached"></span><div class="section" id="memcached-backends">
<h3>Memcached Backends<a class="headerlink" href="#memcached-backends" title="Permalink to this headline">¶</a></h3>
<p>Provides backends for talking to <a class="reference external" href="http://memcached.org">memcached</a>.</p>
<dl class="py class">
<dt id="dogpile.cache.backends.memcached.BMemcachedBackend">
<em class="property">class </em><code class="sig-prename descclassname">dogpile.cache.backends.memcached.</code><code class="sig-name descname">BMemcachedBackend</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">arguments</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.backends.memcached.BMemcachedBackend" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dogpile.cache.backends.memcached.GenericMemcachedBackend" title="dogpile.cache.backends.memcached.GenericMemcachedBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">dogpile.cache.backends.memcached.GenericMemcachedBackend</span></code></a></p>
<p>A backend for the
<a class="reference external" href="https://github.com/jaysonsantos/python-binary-memcached">python-binary-memcached</a>
memcached client.</p>
<p>This is a pure Python memcached client which includes
security features like SASL and SSL/TLS.</p>
<p>SASL is a standard for adding authentication mechanisms
to protocols in a way that is protocol independent.</p>
<p>SSL/TLS is a security layer on end-to-end communication.
It provides following benefits:</p>
<ul class="simple">
<li><p>Encryption: Data is encrypted on the wire between
Memcached client and server.</p></li>
<li><p>Authentication: Optionally, both server and client
authenticate each other.</p></li>
<li><p>Integrity: Data is not tampered or altered when
transmitted between client and server</p></li>
</ul>
<p>A typical configuration using username/password:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dogpile.cache</span> <span class="kn">import</span> <span class="n">make_region</span>

<span class="n">region</span> <span class="o">=</span> <span class="n">make_region</span><span class="p">()</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span>
    <span class="s1">&#39;dogpile.cache.bmemcached&#39;</span><span class="p">,</span>
    <span class="n">expiration_time</span> <span class="o">=</span> <span class="mi">3600</span><span class="p">,</span>
    <span class="n">arguments</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;url&#39;</span><span class="p">:[</span><span class="s2">&quot;127.0.0.1&quot;</span><span class="p">],</span>
        <span class="s1">&#39;username&#39;</span><span class="p">:</span><span class="s1">&#39;scott&#39;</span><span class="p">,</span>
        <span class="s1">&#39;password&#39;</span><span class="p">:</span><span class="s1">&#39;tiger&#39;</span>
    <span class="p">}</span>
<span class="p">)</span>
</pre></div>
</div>
<p>A typical configuration using tls_context:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">ssl</span>
<span class="kn">from</span> <span class="nn">dogpile.cache</span> <span class="kn">import</span> <span class="n">make_region</span>

<span class="n">ctx</span> <span class="o">=</span> <span class="n">ssl</span><span class="o">.</span><span class="n">create_default_context</span><span class="p">(</span><span class="n">cafile</span><span class="o">=</span><span class="s2">&quot;/path/to/my-ca.pem&quot;</span><span class="p">)</span>

<span class="n">region</span> <span class="o">=</span> <span class="n">make_region</span><span class="p">()</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span>
    <span class="s1">&#39;dogpile.cache.bmemcached&#39;</span><span class="p">,</span>
    <span class="n">expiration_time</span> <span class="o">=</span> <span class="mi">3600</span><span class="p">,</span>
    <span class="n">arguments</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;url&#39;</span><span class="p">:[</span><span class="s2">&quot;127.0.0.1&quot;</span><span class="p">],</span>
        <span class="s1">&#39;tls_context&#39;</span><span class="p">:</span><span class="n">ctx</span><span class="p">,</span>
    <span class="p">}</span>
<span class="p">)</span>
</pre></div>
</div>
<p>For advanced ways to configure TLS creating a more complex
tls_context visit <a class="reference external" href="https://docs.python.org/3/library/ssl.html">https://docs.python.org/3/library/ssl.html</a></p>
<p>Arguments which can be passed to the <code class="docutils literal notranslate"><span class="pre">arguments</span></code>
dictionary include:</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="dogpile.cache.backends.memcached.BMemcachedBackend.params.username"></span><strong>username</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.backends.memcached.BMemcachedBackend.params.username">¶</a> – optional username, will be used for
SASL authentication.</p></li>
<li><p><span class="target" id="dogpile.cache.backends.memcached.BMemcachedBackend.params.password"></span><strong>password</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.backends.memcached.BMemcachedBackend.params.password">¶</a> – optional password, will be used for
SASL authentication.</p></li>
<li><p><span class="target" id="dogpile.cache.backends.memcached.BMemcachedBackend.params.tls_context"></span><strong>tls_context</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.backends.memcached.BMemcachedBackend.params.tls_context">¶</a> – <p>optional TLS context, will be used for
TLS connections.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.0.2.</span></p>
</div>
</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="dogpile.cache.backends.memcached.BMemcachedBackend.delete_multi">
<code class="sig-name descname">delete_multi</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">keys</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.backends.memcached.BMemcachedBackend.delete_multi" title="Permalink to this definition">¶</a></dt>
<dd><p>python-binary-memcached api does not implements delete_multi</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="dogpile.cache.backends.memcached.GenericMemcachedBackend">
<em class="property">class </em><code class="sig-prename descclassname">dogpile.cache.backends.memcached.</code><code class="sig-name descname">GenericMemcachedBackend</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">arguments</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.backends.memcached.GenericMemcachedBackend" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dogpile.cache.api.CacheBackend" title="dogpile.cache.api.CacheBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">dogpile.cache.api.CacheBackend</span></code></a></p>
<p>Base class for memcached backends.</p>
<p>This base class accepts a number of paramters
common to all backends.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="dogpile.cache.backends.memcached.GenericMemcachedBackend.params.url"></span><strong>url</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.backends.memcached.GenericMemcachedBackend.params.url">¶</a> – the string URL to connect to.  Can be a single
string or a list of strings.  This is the only argument
that’s required.</p></li>
<li><p><span class="target" id="dogpile.cache.backends.memcached.GenericMemcachedBackend.params.distributed_lock"></span><strong>distributed_lock</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.backends.memcached.GenericMemcachedBackend.params.distributed_lock">¶</a> – boolean, when True, will use a
memcached-lock as the dogpile lock (see <a class="reference internal" href="#dogpile.cache.backends.memcached.MemcachedLock" title="dogpile.cache.backends.memcached.MemcachedLock"><code class="xref py py-class docutils literal notranslate"><span class="pre">MemcachedLock</span></code></a>).
Use this when multiple
processes will be talking to the same memcached instance.
When left at False, dogpile will coordinate on a regular
threading mutex.</p></li>
<li><p><span class="target" id="dogpile.cache.backends.memcached.GenericMemcachedBackend.params.lock_timeout"></span><strong>lock_timeout</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.backends.memcached.GenericMemcachedBackend.params.lock_timeout">¶</a> – <p>integer, number of seconds after acquiring a lock that
memcached should expire it.  This argument is only valid when
<code class="docutils literal notranslate"><span class="pre">distributed_lock</span></code> is <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.5.7.</span></p>
</div>
</p></li>
<li><p><span class="target" id="dogpile.cache.backends.memcached.GenericMemcachedBackend.params.memcached_expire_time"></span><strong>memcached_expire_time</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.backends.memcached.GenericMemcachedBackend.params.memcached_expire_time">¶</a> – <p>integer, when present will
be passed as the <code class="docutils literal notranslate"><span class="pre">time</span></code> parameter to <code class="docutils literal notranslate"><span class="pre">pylibmc.Client.set</span></code>.
This is used to set the memcached expiry time for a value.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This parameter is <strong>different</strong> from Dogpile’s own
<code class="docutils literal notranslate"><span class="pre">expiration_time</span></code>, which is the number of seconds after
which Dogpile will consider the value to be expired.
When Dogpile considers a value to be expired,
it <strong>continues to use the value</strong> until generation
of a new value is complete, when using
<a class="reference internal" href="#dogpile.cache.region.CacheRegion.get_or_create" title="dogpile.cache.region.CacheRegion.get_or_create"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.get_or_create()</span></code></a>.
Therefore, if you are setting <code class="docutils literal notranslate"><span class="pre">memcached_expire_time</span></code>, you’ll
want to make sure it is greater than <code class="docutils literal notranslate"><span class="pre">expiration_time</span></code>
by at least enough seconds for new values to be generated,
else the value won’t be available during a regeneration,
forcing all threads to wait for a regeneration each time
a value expires.</p>
</div>
</p></li>
</ul>
</dd>
</dl>
<p>The <code class="xref py py-class docutils literal notranslate"><span class="pre">GenericMemachedBackend</span></code> uses a <code class="docutils literal notranslate"><span class="pre">threading.local()</span></code>
object to store individual client objects per thread,
as most modern memcached clients do not appear to be inherently
threadsafe.</p>
<p>In particular, <code class="docutils literal notranslate"><span class="pre">threading.local()</span></code> has the advantage over pylibmc’s
built-in thread pool in that it automatically discards objects
associated with a particular thread when that thread ends.</p>
<dl class="py method">
<dt id="dogpile.cache.backends.memcached.GenericMemcachedBackend.client">
<em class="property">property </em><code class="sig-name descname">client</code><a class="headerlink" href="#dogpile.cache.backends.memcached.GenericMemcachedBackend.client" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the memcached client.</p>
<p>This uses a threading.local by
default as it appears most modern
memcached libs aren’t inherently
threadsafe.</p>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.backends.memcached.GenericMemcachedBackend.delete">
<code class="sig-name descname">delete</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.backends.memcached.GenericMemcachedBackend.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete a value from the cache.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><span class="target" id="dogpile.cache.backends.memcached.GenericMemcachedBackend.delete.params.key"></span><strong>key</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.backends.memcached.GenericMemcachedBackend.delete.params.key">¶</a> – String key that was passed to the
<a class="reference internal" href="#dogpile.cache.region.CacheRegion.delete" title="dogpile.cache.region.CacheRegion.delete"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.delete()</span></code></a>
method, which will also be processed by the “key mangling” function
if one was present.</p>
</dd>
</dl>
<p>The behavior here should be idempotent,
that is, can be called any number of times
regardless of whether or not the
key exists.</p>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.backends.memcached.GenericMemcachedBackend.delete_multi">
<code class="sig-name descname">delete_multi</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">keys</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.backends.memcached.GenericMemcachedBackend.delete_multi" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete multiple values from the cache.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><span class="target" id="dogpile.cache.backends.memcached.GenericMemcachedBackend.delete_multi.params.keys"></span><strong>keys</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.backends.memcached.GenericMemcachedBackend.delete_multi.params.keys">¶</a> – sequence of string keys that was passed to the
<a class="reference internal" href="#dogpile.cache.region.CacheRegion.delete_multi" title="dogpile.cache.region.CacheRegion.delete_multi"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.delete_multi()</span></code></a> method, which will also be processed
by the “key mangling” function if one was present.</p>
</dd>
</dl>
<p>The behavior here should be idempotent,
that is, can be called any number of times
regardless of whether or not the
key exists.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.5.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.backends.memcached.GenericMemcachedBackend.get">
<code class="sig-name descname">get</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.backends.memcached.GenericMemcachedBackend.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve an optionally serialized value from the cache.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><span class="target" id="dogpile.cache.backends.memcached.GenericMemcachedBackend.get.params.key"></span><strong>key</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.backends.memcached.GenericMemcachedBackend.get.params.key">¶</a> – String key that was passed to the <a class="reference internal" href="#dogpile.cache.region.CacheRegion.get" title="dogpile.cache.region.CacheRegion.get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.get()</span></code></a>
method, which will also be processed by the “key mangling” function
if one was present.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the Python object that corresponds to
what was established via the <a class="reference internal" href="#dogpile.cache.api.CacheBackend.set" title="dogpile.cache.api.CacheBackend.set"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheBackend.set()</span></code></a> method,
or the <a class="reference internal" href="#dogpile.cache.api.NO_VALUE" title="dogpile.cache.api.NO_VALUE"><code class="xref py py-data docutils literal notranslate"><span class="pre">NO_VALUE</span></code></a> constant if not present.</p>
</dd>
</dl>
<p>If a serializer is in use, this method will only be called if the
<a class="reference internal" href="#dogpile.cache.api.CacheBackend.get_serialized" title="dogpile.cache.api.CacheBackend.get_serialized"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheBackend.get_serialized()</span></code></a> method is not overridden.</p>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.backends.memcached.GenericMemcachedBackend.get_multi">
<code class="sig-name descname">get_multi</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">keys</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.backends.memcached.GenericMemcachedBackend.get_multi" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve multiple optionally serialized values from the cache.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><span class="target" id="dogpile.cache.backends.memcached.GenericMemcachedBackend.get_multi.params.keys"></span><strong>keys</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.backends.memcached.GenericMemcachedBackend.get_multi.params.keys">¶</a> – sequence of string keys that was passed to the
<a class="reference internal" href="#dogpile.cache.region.CacheRegion.get_multi" title="dogpile.cache.region.CacheRegion.get_multi"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.get_multi()</span></code></a> method, which will also be processed
by the “key mangling” function if one was present.</p>
</dd>
</dl>
<dl class="simple">
<dt>:return a list of values as would be returned</dt><dd><p>individually via the <a class="reference internal" href="#dogpile.cache.api.CacheBackend.get" title="dogpile.cache.api.CacheBackend.get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheBackend.get()</span></code></a> method, corresponding
to the list of keys given.</p>
</dd>
</dl>
<p>If a serializer is in use, this method will only be called if the
<a class="reference internal" href="#dogpile.cache.api.CacheBackend.get_serialized_multi" title="dogpile.cache.api.CacheBackend.get_serialized_multi"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheBackend.get_serialized_multi()</span></code></a> method is not overridden.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.5.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.backends.memcached.GenericMemcachedBackend.get_mutex">
<code class="sig-name descname">get_mutex</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.backends.memcached.GenericMemcachedBackend.get_mutex" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an optional mutexing object for the given key.</p>
<p>This object need only provide an <code class="docutils literal notranslate"><span class="pre">acquire()</span></code>
and <code class="docutils literal notranslate"><span class="pre">release()</span></code> method.</p>
<p>May return <code class="docutils literal notranslate"><span class="pre">None</span></code>, in which case the dogpile
lock will use a regular <code class="docutils literal notranslate"><span class="pre">threading.Lock</span></code>
object to mutex concurrent threads for
value creation.   The default implementation
returns <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<p>Different backends may want to provide various
kinds of “mutex” objects, such as those which
link to lock files, distributed mutexes,
memcached semaphores, etc.  Whatever
kind of system is best suited for the scope
and behavior of the caching backend.</p>
<p>A mutex that takes the key into account will
allow multiple regenerate operations across
keys to proceed simultaneously, while a mutex
that does not will serialize regenerate operations
to just one at a time across all keys in the region.
The latter approach, or a variant that involves
a modulus of the given key’s hash value,
can be used as a means of throttling the total
number of value recreation operations that may
proceed at one time.</p>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.backends.memcached.GenericMemcachedBackend.set">
<code class="sig-name descname">set</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key</span></em>, <em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.backends.memcached.GenericMemcachedBackend.set" title="Permalink to this definition">¶</a></dt>
<dd><p>Set an optionally serialized value in the cache.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="dogpile.cache.backends.memcached.GenericMemcachedBackend.set.params.key"></span><strong>key</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.backends.memcached.GenericMemcachedBackend.set.params.key">¶</a> – String key that was passed to the <a class="reference internal" href="#dogpile.cache.region.CacheRegion.set" title="dogpile.cache.region.CacheRegion.set"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.set()</span></code></a>
method, which will also be processed by the “key mangling” function
if one was present.</p></li>
<li><p><span class="target" id="dogpile.cache.backends.memcached.GenericMemcachedBackend.set.params.value"></span><strong>value</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.backends.memcached.GenericMemcachedBackend.set.params.value">¶</a> – The optionally serialized <a class="reference internal" href="#dogpile.cache.api.CachedValue" title="dogpile.cache.api.CachedValue"><code class="xref py py-class docutils literal notranslate"><span class="pre">CachedValue</span></code></a> object.
May be an instance of <a class="reference internal" href="#dogpile.cache.api.CachedValue" title="dogpile.cache.api.CachedValue"><code class="xref py py-class docutils literal notranslate"><span class="pre">CachedValue</span></code></a> or a bytes object
depending on if a serializer is in use with the region and if the
<a class="reference internal" href="#dogpile.cache.api.CacheBackend.set_serialized" title="dogpile.cache.api.CacheBackend.set_serialized"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheBackend.set_serialized()</span></code></a> method is not overridden.</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#dogpile.cache.api.CacheBackend.set_serialized" title="dogpile.cache.api.CacheBackend.set_serialized"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheBackend.set_serialized()</span></code></a></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt id="dogpile.cache.backends.memcached.GenericMemcachedBackend.set_arguments">
<code class="sig-name descname">set_arguments</code><em class="property">: Mapping<span class="p">[</span>str<span class="p">, </span>Any<span class="p">]</span></em><em class="property"> = {}</em><a class="headerlink" href="#dogpile.cache.backends.memcached.GenericMemcachedBackend.set_arguments" title="Permalink to this definition">¶</a></dt>
<dd><p>Additional arguments which will be passed
to the <a class="reference internal" href="#dogpile.cache.backends.memcached.GenericMemcachedBackend.set" title="dogpile.cache.backends.memcached.GenericMemcachedBackend.set"><code class="xref py py-meth docutils literal notranslate"><span class="pre">set()</span></code></a> method.</p>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.backends.memcached.GenericMemcachedBackend.set_multi">
<code class="sig-name descname">set_multi</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mapping</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.backends.memcached.GenericMemcachedBackend.set_multi" title="Permalink to this definition">¶</a></dt>
<dd><p>Set multiple values in the cache.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><span class="target" id="dogpile.cache.backends.memcached.GenericMemcachedBackend.set_multi.params.mapping"></span><strong>mapping</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.backends.memcached.GenericMemcachedBackend.set_multi.params.mapping">¶</a> – a dict in which the key will be whatever was passed to
the <a class="reference internal" href="#dogpile.cache.region.CacheRegion.set_multi" title="dogpile.cache.region.CacheRegion.set_multi"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.set_multi()</span></code></a> method, processed by the “key
mangling” function, if any.</p>
</dd>
</dl>
<p>When implementing a new <a class="reference internal" href="#dogpile.cache.api.CacheBackend" title="dogpile.cache.api.CacheBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">CacheBackend</span></code></a> or cutomizing via
<a class="reference internal" href="#dogpile.cache.proxy.ProxyBackend" title="dogpile.cache.proxy.ProxyBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">ProxyBackend</span></code></a>, be aware that when this method is invoked by
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Region.get_or_create_multi()</span></code>, the <code class="docutils literal notranslate"><span class="pre">mapping</span></code> values are the
same ones returned to the upstream caller. If the subclass alters the
values in any way, it must not do so ‘in-place’ on the <code class="docutils literal notranslate"><span class="pre">mapping</span></code> dict
– that will have the undesirable effect of modifying the returned
values as well.</p>
<p>If a serializer is in use, this method will only be called if the
<a class="reference internal" href="#dogpile.cache.api.CacheBackend.set_serialized_multi" title="dogpile.cache.api.CacheBackend.set_serialized_multi"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheBackend.set_serialized_multi()</span></code></a> method is not overridden.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.5.0.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="dogpile.cache.backends.memcached.MemcachedBackend">
<em class="property">class </em><code class="sig-prename descclassname">dogpile.cache.backends.memcached.</code><code class="sig-name descname">MemcachedBackend</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">arguments</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.backends.memcached.MemcachedBackend" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">dogpile.cache.backends.memcached.MemcacheArgs</span></code>, <a class="reference internal" href="#dogpile.cache.backends.memcached.GenericMemcachedBackend" title="dogpile.cache.backends.memcached.GenericMemcachedBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">dogpile.cache.backends.memcached.GenericMemcachedBackend</span></code></a></p>
<p>A backend using the standard
<a class="reference external" href="http://www.tummy.com/Community/software/python-memcached/">Python-memcached</a>
library.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dogpile.cache</span> <span class="kn">import</span> <span class="n">make_region</span>

<span class="n">region</span> <span class="o">=</span> <span class="n">make_region</span><span class="p">()</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span>
    <span class="s1">&#39;dogpile.cache.memcached&#39;</span><span class="p">,</span>
    <span class="n">expiration_time</span> <span class="o">=</span> <span class="mi">3600</span><span class="p">,</span>
    <span class="n">arguments</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;url&#39;</span><span class="p">:</span><span class="s2">&quot;127.0.0.1:11211&quot;</span>
    <span class="p">}</span>
<span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt id="dogpile.cache.backends.memcached.MemcachedLock">
<em class="property">class </em><code class="sig-prename descclassname">dogpile.cache.backends.memcached.</code><code class="sig-name descname">MemcachedLock</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">client_fn</span></em>, <em class="sig-param"><span class="n">key</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.backends.memcached.MemcachedLock" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Simple distributed lock using memcached.</p>
</dd></dl>

<dl class="py class">
<dt id="dogpile.cache.backends.memcached.PylibmcBackend">
<em class="property">class </em><code class="sig-prename descclassname">dogpile.cache.backends.memcached.</code><code class="sig-name descname">PylibmcBackend</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">arguments</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.backends.memcached.PylibmcBackend" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">dogpile.cache.backends.memcached.MemcacheArgs</span></code>, <a class="reference internal" href="#dogpile.cache.backends.memcached.GenericMemcachedBackend" title="dogpile.cache.backends.memcached.GenericMemcachedBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">dogpile.cache.backends.memcached.GenericMemcachedBackend</span></code></a></p>
<p>A backend for the
<a class="reference external" href="http://sendapatch.se/projects/pylibmc/index.html">pylibmc</a>
memcached client.</p>
<p>A configuration illustrating several of the optional
arguments described in the pylibmc documentation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dogpile.cache</span> <span class="kn">import</span> <span class="n">make_region</span>

<span class="n">region</span> <span class="o">=</span> <span class="n">make_region</span><span class="p">()</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span>
    <span class="s1">&#39;dogpile.cache.pylibmc&#39;</span><span class="p">,</span>
    <span class="n">expiration_time</span> <span class="o">=</span> <span class="mi">3600</span><span class="p">,</span>
    <span class="n">arguments</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;url&#39;</span><span class="p">:[</span><span class="s2">&quot;127.0.0.1&quot;</span><span class="p">],</span>
        <span class="s1">&#39;binary&#39;</span><span class="p">:</span><span class="kc">True</span><span class="p">,</span>
        <span class="s1">&#39;behaviors&#39;</span><span class="p">:{</span><span class="s2">&quot;tcp_nodelay&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span><span class="s2">&quot;ketama&quot;</span><span class="p">:</span><span class="kc">True</span><span class="p">}</span>
    <span class="p">}</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Arguments accepted here include those of
<a class="reference internal" href="#dogpile.cache.backends.memcached.GenericMemcachedBackend" title="dogpile.cache.backends.memcached.GenericMemcachedBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">GenericMemcachedBackend</span></code></a>, as well as
those below.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="dogpile.cache.backends.memcached.PylibmcBackend.params.binary"></span><strong>binary</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.backends.memcached.PylibmcBackend.params.binary">¶</a> – sets the <code class="docutils literal notranslate"><span class="pre">binary</span></code> flag understood by
<code class="docutils literal notranslate"><span class="pre">pylibmc.Client</span></code>.</p></li>
<li><p><span class="target" id="dogpile.cache.backends.memcached.PylibmcBackend.params.behaviors"></span><strong>behaviors</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.backends.memcached.PylibmcBackend.params.behaviors">¶</a> – a dictionary which will be passed to
<code class="docutils literal notranslate"><span class="pre">pylibmc.Client</span></code> as the <code class="docutils literal notranslate"><span class="pre">behaviors</span></code> parameter.</p></li>
<li><p><span class="target" id="dogpile.cache.backends.memcached.PylibmcBackend.params.min_compress_len"></span><strong>min_compress_len</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.backends.memcached.PylibmcBackend.params.min_compress_len">¶</a> – Integer, will be passed as the
<code class="docutils literal notranslate"><span class="pre">min_compress_len</span></code> parameter to the <code class="docutils literal notranslate"><span class="pre">pylibmc.Client.set</span></code>
method.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<span class="target" id="module-dogpile.cache.backends.redis"></span><div class="section" id="redis-backends">
<h3>Redis Backends<a class="headerlink" href="#redis-backends" title="Permalink to this headline">¶</a></h3>
<p>Provides backends for talking to <a class="reference external" href="http://redis.io">Redis</a>.</p>
<dl class="py class">
<dt id="dogpile.cache.backends.redis.RedisBackend">
<em class="property">class </em><code class="sig-prename descclassname">dogpile.cache.backends.redis.</code><code class="sig-name descname">RedisBackend</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">arguments</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.backends.redis.RedisBackend" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dogpile.cache.api.BytesBackend" title="dogpile.cache.api.BytesBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">dogpile.cache.api.BytesBackend</span></code></a></p>
<p>A <a class="reference external" href="http://redis.io/">Redis</a> backend, using the
<a class="reference external" href="http://pypi.python.org/pypi/redis/">redis-py</a> backend.</p>
<p>Example configuration:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dogpile.cache</span> <span class="kn">import</span> <span class="n">make_region</span>

<span class="n">region</span> <span class="o">=</span> <span class="n">make_region</span><span class="p">()</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span>
    <span class="s1">&#39;dogpile.cache.redis&#39;</span><span class="p">,</span>
    <span class="n">arguments</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;host&#39;</span><span class="p">:</span> <span class="s1">&#39;localhost&#39;</span><span class="p">,</span>
        <span class="s1">&#39;port&#39;</span><span class="p">:</span> <span class="mi">6379</span><span class="p">,</span>
        <span class="s1">&#39;db&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s1">&#39;redis_expiration_time&#39;</span><span class="p">:</span> <span class="mi">60</span><span class="o">*</span><span class="mi">60</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span>   <span class="c1"># 2 hours</span>
        <span class="s1">&#39;distributed_lock&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
        <span class="s1">&#39;thread_local_lock&#39;</span><span class="p">:</span> <span class="kc">False</span>
        <span class="p">}</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Arguments accepted in the arguments dictionary:</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="dogpile.cache.backends.redis.RedisBackend.params.url"></span><strong>url</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.backends.redis.RedisBackend.params.url">¶</a> – string. If provided, will override separate host/port/db
params.  The format is that accepted by <code class="docutils literal notranslate"><span class="pre">StrictRedis.from_url()</span></code>.</p></li>
<li><p><span class="target" id="dogpile.cache.backends.redis.RedisBackend.params.host"></span><strong>host</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.backends.redis.RedisBackend.params.host">¶</a> – string, default is <code class="docutils literal notranslate"><span class="pre">localhost</span></code>.</p></li>
<li><p><span class="target" id="dogpile.cache.backends.redis.RedisBackend.params.password"></span><strong>password</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.backends.redis.RedisBackend.params.password">¶</a> – string, default is no password.</p></li>
<li><p><span class="target" id="dogpile.cache.backends.redis.RedisBackend.params.port"></span><strong>port</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.backends.redis.RedisBackend.params.port">¶</a> – integer, default is <code class="docutils literal notranslate"><span class="pre">6379</span></code>.</p></li>
<li><p><span class="target" id="dogpile.cache.backends.redis.RedisBackend.params.db"></span><strong>db</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.backends.redis.RedisBackend.params.db">¶</a> – integer, default is <code class="docutils literal notranslate"><span class="pre">0</span></code>.</p></li>
<li><p><span class="target" id="dogpile.cache.backends.redis.RedisBackend.params.redis_expiration_time"></span><strong>redis_expiration_time</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.backends.redis.RedisBackend.params.redis_expiration_time">¶</a> – integer, number of seconds after setting
a value that Redis should expire it.  This should be larger than dogpile’s
cache expiration.  By default no expiration is set.</p></li>
<li><p><span class="target" id="dogpile.cache.backends.redis.RedisBackend.params.distributed_lock"></span><strong>distributed_lock</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.backends.redis.RedisBackend.params.distributed_lock">¶</a> – boolean, when True, will use a
redis-lock as the dogpile lock. Use this when multiple processes will be
talking to the same redis instance. When left at False, dogpile will
coordinate on a regular threading mutex.</p></li>
<li><p><span class="target" id="dogpile.cache.backends.redis.RedisBackend.params.lock_timeout"></span><strong>lock_timeout</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.backends.redis.RedisBackend.params.lock_timeout">¶</a> – integer, number of seconds after acquiring a lock that
Redis should expire it.  This argument is only valid when
<code class="docutils literal notranslate"><span class="pre">distributed_lock</span></code> is <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
<li><p><span class="target" id="dogpile.cache.backends.redis.RedisBackend.params.socket_timeout"></span><strong>socket_timeout</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.backends.redis.RedisBackend.params.socket_timeout">¶</a> – float, seconds for socket timeout.
Default is None (no timeout).</p></li>
<li><p><span class="target" id="dogpile.cache.backends.redis.RedisBackend.params.lock_sleep"></span><strong>lock_sleep</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.backends.redis.RedisBackend.params.lock_sleep">¶</a> – integer, number of seconds to sleep when failed to
acquire a lock.  This argument is only valid when
<code class="docutils literal notranslate"><span class="pre">distributed_lock</span></code> is <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
<li><p><span class="target" id="dogpile.cache.backends.redis.RedisBackend.params.connection_pool"></span><strong>connection_pool</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.backends.redis.RedisBackend.params.connection_pool">¶</a> – <code class="docutils literal notranslate"><span class="pre">redis.ConnectionPool</span></code> object.  If provided,
this object supersedes other connection arguments passed to the
<code class="docutils literal notranslate"><span class="pre">redis.StrictRedis</span></code> instance, including url and/or host as well as
socket_timeout, and will be passed to <code class="docutils literal notranslate"><span class="pre">redis.StrictRedis</span></code> as the
source of connectivity.</p></li>
<li><p><span class="target" id="dogpile.cache.backends.redis.RedisBackend.params.thread_local_lock"></span><strong>thread_local_lock</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.backends.redis.RedisBackend.params.thread_local_lock">¶</a> – bool, whether a thread-local Redis lock object
should be used. This is the default, but is not compatible with
asynchronous runners, as they run in a different thread than the one
used to create the lock.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="dogpile.cache.backends.redis.RedisBackend.delete">
<code class="sig-name descname">delete</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.backends.redis.RedisBackend.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete a value from the cache.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><span class="target" id="dogpile.cache.backends.redis.RedisBackend.delete.params.key"></span><strong>key</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.backends.redis.RedisBackend.delete.params.key">¶</a> – String key that was passed to the
<a class="reference internal" href="#dogpile.cache.region.CacheRegion.delete" title="dogpile.cache.region.CacheRegion.delete"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.delete()</span></code></a>
method, which will also be processed by the “key mangling” function
if one was present.</p>
</dd>
</dl>
<p>The behavior here should be idempotent,
that is, can be called any number of times
regardless of whether or not the
key exists.</p>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.backends.redis.RedisBackend.delete_multi">
<code class="sig-name descname">delete_multi</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">keys</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.backends.redis.RedisBackend.delete_multi" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete multiple values from the cache.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><span class="target" id="dogpile.cache.backends.redis.RedisBackend.delete_multi.params.keys"></span><strong>keys</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.backends.redis.RedisBackend.delete_multi.params.keys">¶</a> – sequence of string keys that was passed to the
<a class="reference internal" href="#dogpile.cache.region.CacheRegion.delete_multi" title="dogpile.cache.region.CacheRegion.delete_multi"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.delete_multi()</span></code></a> method, which will also be processed
by the “key mangling” function if one was present.</p>
</dd>
</dl>
<p>The behavior here should be idempotent,
that is, can be called any number of times
regardless of whether or not the
key exists.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.5.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.backends.redis.RedisBackend.get_mutex">
<code class="sig-name descname">get_mutex</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.backends.redis.RedisBackend.get_mutex" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an optional mutexing object for the given key.</p>
<p>This object need only provide an <code class="docutils literal notranslate"><span class="pre">acquire()</span></code>
and <code class="docutils literal notranslate"><span class="pre">release()</span></code> method.</p>
<p>May return <code class="docutils literal notranslate"><span class="pre">None</span></code>, in which case the dogpile
lock will use a regular <code class="docutils literal notranslate"><span class="pre">threading.Lock</span></code>
object to mutex concurrent threads for
value creation.   The default implementation
returns <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<p>Different backends may want to provide various
kinds of “mutex” objects, such as those which
link to lock files, distributed mutexes,
memcached semaphores, etc.  Whatever
kind of system is best suited for the scope
and behavior of the caching backend.</p>
<p>A mutex that takes the key into account will
allow multiple regenerate operations across
keys to proceed simultaneously, while a mutex
that does not will serialize regenerate operations
to just one at a time across all keys in the region.
The latter approach, or a variant that involves
a modulus of the given key’s hash value,
can be used as a means of throttling the total
number of value recreation operations that may
proceed at one time.</p>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.backends.redis.RedisBackend.get_serialized">
<code class="sig-name descname">get_serialized</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.backends.redis.RedisBackend.get_serialized" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a serialized value from the cache.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><span class="target" id="dogpile.cache.backends.redis.RedisBackend.get_serialized.params.key"></span><strong>key</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.backends.redis.RedisBackend.get_serialized.params.key">¶</a> – String key that was passed to the <a class="reference internal" href="#dogpile.cache.region.CacheRegion.get" title="dogpile.cache.region.CacheRegion.get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.get()</span></code></a>
method, which will also be processed by the “key mangling” function
if one was present.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a bytes object, or <a class="reference internal" href="#dogpile.cache.api.NO_VALUE" title="dogpile.cache.api.NO_VALUE"><code class="xref py py-data docutils literal notranslate"><span class="pre">NO_VALUE</span></code></a>
constant if not present.</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.1.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.backends.redis.RedisBackend.get_serialized_multi">
<code class="sig-name descname">get_serialized_multi</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">keys</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.backends.redis.RedisBackend.get_serialized_multi" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve multiple serialized values from the cache.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><span class="target" id="dogpile.cache.backends.redis.RedisBackend.get_serialized_multi.params.keys"></span><strong>keys</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.backends.redis.RedisBackend.get_serialized_multi.params.keys">¶</a> – sequence of string keys that was passed to the
<a class="reference internal" href="#dogpile.cache.region.CacheRegion.get_multi" title="dogpile.cache.region.CacheRegion.get_multi"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.get_multi()</span></code></a> method, which will also be processed
by the “key mangling” function if one was present.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of bytes objects</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.1.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.backends.redis.RedisBackend.set_serialized">
<code class="sig-name descname">set_serialized</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key</span></em>, <em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.backends.redis.RedisBackend.set_serialized" title="Permalink to this definition">¶</a></dt>
<dd><p>Set a serialized value in the cache.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="dogpile.cache.backends.redis.RedisBackend.set_serialized.params.key"></span><strong>key</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.backends.redis.RedisBackend.set_serialized.params.key">¶</a> – String key that was passed to the <a class="reference internal" href="#dogpile.cache.region.CacheRegion.set" title="dogpile.cache.region.CacheRegion.set"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.set()</span></code></a>
method, which will also be processed by the “key mangling” function
if one was present.</p></li>
<li><p><span class="target" id="dogpile.cache.backends.redis.RedisBackend.set_serialized.params.value"></span><strong>value</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.backends.redis.RedisBackend.set_serialized.params.value">¶</a> – a bytes object to be stored.</p></li>
</ul>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.1.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.backends.redis.RedisBackend.set_serialized_multi">
<code class="sig-name descname">set_serialized_multi</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mapping</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.backends.redis.RedisBackend.set_serialized_multi" title="Permalink to this definition">¶</a></dt>
<dd><p>Set multiple serialized values in the cache.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><span class="target" id="dogpile.cache.backends.redis.RedisBackend.set_serialized_multi.params.mapping"></span><strong>mapping</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.backends.redis.RedisBackend.set_serialized_multi.params.mapping">¶</a> – a dict in which the key will be whatever was passed to
the <a class="reference internal" href="#dogpile.cache.region.CacheRegion.set_multi" title="dogpile.cache.region.CacheRegion.set_multi"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.set_multi()</span></code></a> method, processed by the “key
mangling” function, if any.</p>
</dd>
</dl>
<p>When implementing a new <a class="reference internal" href="#dogpile.cache.api.CacheBackend" title="dogpile.cache.api.CacheBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">CacheBackend</span></code></a> or cutomizing via
<a class="reference internal" href="#dogpile.cache.proxy.ProxyBackend" title="dogpile.cache.proxy.ProxyBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">ProxyBackend</span></code></a>, be aware that when this method is invoked by
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Region.get_or_create_multi()</span></code>, the <code class="docutils literal notranslate"><span class="pre">mapping</span></code> values are the
same ones returned to the upstream caller. If the subclass alters the
values in any way, it must not do so ‘in-place’ on the <code class="docutils literal notranslate"><span class="pre">mapping</span></code> dict
– that will have the undesirable effect of modifying the returned
values as well.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.1.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="dogpile.cache.backends.redis.RedisSentinelBackend">
<em class="property">class </em><code class="sig-prename descclassname">dogpile.cache.backends.redis.</code><code class="sig-name descname">RedisSentinelBackend</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">arguments</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.backends.redis.RedisSentinelBackend" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dogpile.cache.backends.redis.RedisBackend" title="dogpile.cache.backends.redis.RedisBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">dogpile.cache.backends.redis.RedisBackend</span></code></a></p>
<p>A <a class="reference external" href="http://redis.io/">Redis</a> backend, using the
<a class="reference external" href="http://pypi.python.org/pypi/redis/">redis-py</a> backend.
It will use the Sentinel of a Redis cluster.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.0.0.</span></p>
</div>
<p>Example configuration:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dogpile.cache</span> <span class="kn">import</span> <span class="n">make_region</span>

<span class="n">region</span> <span class="o">=</span> <span class="n">make_region</span><span class="p">()</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span>
    <span class="s1">&#39;dogpile.cache.redis_sentinel&#39;</span><span class="p">,</span>
    <span class="n">arguments</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;sentinels&#39;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">[</span><span class="s1">&#39;redis_sentinel_1&#39;</span><span class="p">,</span> <span class="mi">26379</span><span class="p">],</span>
            <span class="p">[</span><span class="s1">&#39;redis_sentinel_2&#39;</span><span class="p">,</span> <span class="mi">26379</span><span class="p">]</span>
        <span class="p">],</span>
        <span class="s1">&#39;db&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s1">&#39;redis_expiration_time&#39;</span><span class="p">:</span> <span class="mi">60</span><span class="o">*</span><span class="mi">60</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span>   <span class="c1"># 2 hours</span>
        <span class="s1">&#39;distributed_lock&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
        <span class="s1">&#39;thread_local_lock&#39;</span><span class="p">:</span> <span class="kc">False</span>
    <span class="p">}</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Arguments accepted in the arguments dictionary:</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="dogpile.cache.backends.redis.RedisSentinelBackend.params.db"></span><strong>db</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.backends.redis.RedisSentinelBackend.params.db">¶</a> – integer, default is <code class="docutils literal notranslate"><span class="pre">0</span></code>.</p></li>
<li><p><span class="target" id="dogpile.cache.backends.redis.RedisSentinelBackend.params.redis_expiration_time"></span><strong>redis_expiration_time</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.backends.redis.RedisSentinelBackend.params.redis_expiration_time">¶</a> – integer, number of seconds after setting
a value that Redis should expire it.  This should be larger than dogpile’s
cache expiration.  By default no expiration is set.</p></li>
<li><p><span class="target" id="dogpile.cache.backends.redis.RedisSentinelBackend.params.distributed_lock"></span><strong>distributed_lock</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.backends.redis.RedisSentinelBackend.params.distributed_lock">¶</a> – boolean, when True, will use a
redis-lock as the dogpile lock. Use this when multiple processes will be
talking to the same redis instance. When False, dogpile will
coordinate on a regular threading mutex, Default is True.</p></li>
<li><p><span class="target" id="dogpile.cache.backends.redis.RedisSentinelBackend.params.lock_timeout"></span><strong>lock_timeout</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.backends.redis.RedisSentinelBackend.params.lock_timeout">¶</a> – integer, number of seconds after acquiring a lock that
Redis should expire it.  This argument is only valid when
<code class="docutils literal notranslate"><span class="pre">distributed_lock</span></code> is <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
<li><p><span class="target" id="dogpile.cache.backends.redis.RedisSentinelBackend.params.socket_timeout"></span><strong>socket_timeout</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.backends.redis.RedisSentinelBackend.params.socket_timeout">¶</a> – float, seconds for socket timeout.
Default is None (no timeout).</p></li>
<li><p><span class="target" id="dogpile.cache.backends.redis.RedisSentinelBackend.params.sentinels"></span><strong>sentinels</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.backends.redis.RedisSentinelBackend.params.sentinels">¶</a> – is a list of sentinel nodes. Each node is represented by
a pair (hostname, port).
Default is None (not in sentinel mode).</p></li>
<li><p><span class="target" id="dogpile.cache.backends.redis.RedisSentinelBackend.params.service_name"></span><strong>service_name</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.backends.redis.RedisSentinelBackend.params.service_name">¶</a> – str, the service name.
Default is ‘mymaster’.</p></li>
<li><p><span class="target" id="dogpile.cache.backends.redis.RedisSentinelBackend.params.sentinel_kwargs"></span><strong>sentinel_kwargs</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.backends.redis.RedisSentinelBackend.params.sentinel_kwargs">¶</a> – is a dictionary of connection arguments used when
connecting to sentinel instances. Any argument that can be passed to
a normal Redis connection can be specified here.
Default is {}.</p></li>
<li><p><span class="target" id="dogpile.cache.backends.redis.RedisSentinelBackend.params.connection_kwargs"></span><strong>connection_kwargs</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.backends.redis.RedisSentinelBackend.params.connection_kwargs">¶</a> – dict, are keyword arguments that will be used
when establishing a connection to a Redis server.
Default is {}.</p></li>
<li><p><span class="target" id="dogpile.cache.backends.redis.RedisSentinelBackend.params.lock_sleep"></span><strong>lock_sleep</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.backends.redis.RedisSentinelBackend.params.lock_sleep">¶</a> – integer, number of seconds to sleep when failed to
acquire a lock.  This argument is only valid when
<code class="docutils literal notranslate"><span class="pre">distributed_lock</span></code> is <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
<li><p><span class="target" id="dogpile.cache.backends.redis.RedisSentinelBackend.params.thread_local_lock"></span><strong>thread_local_lock</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.backends.redis.RedisSentinelBackend.params.thread_local_lock">¶</a> – bool, whether a thread-local Redis lock object
should be used. This is the default, but is not compatible with
asynchronous runners, as they run in a different thread than the one
used to create the lock.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<span class="target" id="module-dogpile.cache.backends.file"></span><div class="section" id="file-backends">
<h3>File Backends<a class="headerlink" href="#file-backends" title="Permalink to this headline">¶</a></h3>
<p>Provides backends that deal with local filesystem access.</p>
<dl class="py class">
<dt id="dogpile.cache.backends.file.AbstractFileLock">
<em class="property">class </em><code class="sig-prename descclassname">dogpile.cache.backends.file.</code><code class="sig-name descname">AbstractFileLock</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.backends.file.AbstractFileLock" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Coordinate read/write access to a file.</p>
<p>typically is a file-based lock but doesn’t necessarily have to be.</p>
<p>The default implementation here is <a class="reference internal" href="#dogpile.cache.backends.file.FileLock" title="dogpile.cache.backends.file.FileLock"><code class="xref py py-class docutils literal notranslate"><span class="pre">FileLock</span></code></a>.</p>
<p>Implementations should provide the following methods:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">*</span> <span class="fm">__init__</span><span class="p">()</span>
<span class="o">*</span> <span class="n">acquire_read_lock</span><span class="p">()</span>
<span class="o">*</span> <span class="n">acquire_write_lock</span><span class="p">()</span>
<span class="o">*</span> <span class="n">release_read_lock</span><span class="p">()</span>
<span class="o">*</span> <span class="n">release_write_lock</span><span class="p">()</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">__init__()</span></code> method accepts a single argument “filename”, which
may be used as the “lock file”, for those implementations that use a lock
file.</p>
<p>Note that multithreaded environments must provide a thread-safe
version of this lock.  The recommended approach for file-
descriptor-based locks is to use a Python <code class="docutils literal notranslate"><span class="pre">threading.local()</span></code> so
that a unique file descriptor is held per thread.  See the source
code of <a class="reference internal" href="#dogpile.cache.backends.file.FileLock" title="dogpile.cache.backends.file.FileLock"><code class="xref py py-class docutils literal notranslate"><span class="pre">FileLock</span></code></a> for an implementation example.</p>
<dl class="py method">
<dt id="dogpile.cache.backends.file.AbstractFileLock.acquire">
<code class="sig-name descname">acquire</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">wait</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.backends.file.AbstractFileLock.acquire" title="Permalink to this definition">¶</a></dt>
<dd><p>Acquire the “write” lock.</p>
<p>This is a direct call to <a class="reference internal" href="#dogpile.cache.backends.file.AbstractFileLock.acquire_write_lock" title="dogpile.cache.backends.file.AbstractFileLock.acquire_write_lock"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AbstractFileLock.acquire_write_lock()</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.backends.file.AbstractFileLock.acquire_read_lock">
<code class="sig-name descname">acquire_read_lock</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">wait</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.backends.file.AbstractFileLock.acquire_read_lock" title="Permalink to this definition">¶</a></dt>
<dd><p>Acquire a ‘reader’ lock.</p>
<p>Raises <code class="docutils literal notranslate"><span class="pre">NotImplementedError</span></code> by default, must be
implemented by subclasses.</p>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.backends.file.AbstractFileLock.acquire_write_lock">
<code class="sig-name descname">acquire_write_lock</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">wait</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.backends.file.AbstractFileLock.acquire_write_lock" title="Permalink to this definition">¶</a></dt>
<dd><p>Acquire a ‘write’ lock.</p>
<p>Raises <code class="docutils literal notranslate"><span class="pre">NotImplementedError</span></code> by default, must be
implemented by subclasses.</p>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.backends.file.AbstractFileLock.is_open">
<em class="property">property </em><code class="sig-name descname">is_open</code><a class="headerlink" href="#dogpile.cache.backends.file.AbstractFileLock.is_open" title="Permalink to this definition">¶</a></dt>
<dd><p>optional method.</p>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.backends.file.AbstractFileLock.read">
<code class="sig-name descname">read</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.backends.file.AbstractFileLock.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Provide a context manager for the “read” lock.</p>
<p>This method makes use of <a class="reference internal" href="#dogpile.cache.backends.file.AbstractFileLock.acquire_read_lock" title="dogpile.cache.backends.file.AbstractFileLock.acquire_read_lock"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AbstractFileLock.acquire_read_lock()</span></code></a>
and <a class="reference internal" href="#dogpile.cache.backends.file.AbstractFileLock.release_read_lock" title="dogpile.cache.backends.file.AbstractFileLock.release_read_lock"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AbstractFileLock.release_read_lock()</span></code></a></p>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.backends.file.AbstractFileLock.release">
<code class="sig-name descname">release</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.backends.file.AbstractFileLock.release" title="Permalink to this definition">¶</a></dt>
<dd><p>Release the “write” lock.</p>
<p>This is a direct call to <a class="reference internal" href="#dogpile.cache.backends.file.AbstractFileLock.release_write_lock" title="dogpile.cache.backends.file.AbstractFileLock.release_write_lock"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AbstractFileLock.release_write_lock()</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.backends.file.AbstractFileLock.release_read_lock">
<code class="sig-name descname">release_read_lock</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.backends.file.AbstractFileLock.release_read_lock" title="Permalink to this definition">¶</a></dt>
<dd><p>Release a ‘reader’ lock.</p>
<p>Raises <code class="docutils literal notranslate"><span class="pre">NotImplementedError</span></code> by default, must be
implemented by subclasses.</p>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.backends.file.AbstractFileLock.release_write_lock">
<code class="sig-name descname">release_write_lock</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.backends.file.AbstractFileLock.release_write_lock" title="Permalink to this definition">¶</a></dt>
<dd><p>Release a ‘writer’ lock.</p>
<p>Raises <code class="docutils literal notranslate"><span class="pre">NotImplementedError</span></code> by default, must be
implemented by subclasses.</p>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.backends.file.AbstractFileLock.write">
<code class="sig-name descname">write</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.backends.file.AbstractFileLock.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Provide a context manager for the “write” lock.</p>
<p>This method makes use of <a class="reference internal" href="#dogpile.cache.backends.file.AbstractFileLock.acquire_write_lock" title="dogpile.cache.backends.file.AbstractFileLock.acquire_write_lock"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AbstractFileLock.acquire_write_lock()</span></code></a>
and <a class="reference internal" href="#dogpile.cache.backends.file.AbstractFileLock.release_write_lock" title="dogpile.cache.backends.file.AbstractFileLock.release_write_lock"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AbstractFileLock.release_write_lock()</span></code></a></p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="dogpile.cache.backends.file.DBMBackend">
<em class="property">class </em><code class="sig-prename descclassname">dogpile.cache.backends.file.</code><code class="sig-name descname">DBMBackend</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">arguments</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.backends.file.DBMBackend" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dogpile.cache.api.BytesBackend" title="dogpile.cache.api.BytesBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">dogpile.cache.api.BytesBackend</span></code></a></p>
<p>A file-backend using a dbm file to store keys.</p>
<p>Basic usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dogpile.cache</span> <span class="kn">import</span> <span class="n">make_region</span>

<span class="n">region</span> <span class="o">=</span> <span class="n">make_region</span><span class="p">()</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span>
    <span class="s1">&#39;dogpile.cache.dbm&#39;</span><span class="p">,</span>
    <span class="n">expiration_time</span> <span class="o">=</span> <span class="mi">3600</span><span class="p">,</span>
    <span class="n">arguments</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;filename&quot;</span><span class="p">:</span><span class="s2">&quot;/path/to/cachefile.dbm&quot;</span>
    <span class="p">}</span>
<span class="p">)</span>
</pre></div>
</div>
<p>DBM access is provided using the Python <code class="docutils literal notranslate"><span class="pre">anydbm</span></code> module,
which selects a platform-specific dbm module to use.
This may be made to be more configurable in a future
release.</p>
<p>Note that different dbm modules have different behaviors.
Some dbm implementations handle their own locking, while
others don’t.  The <a class="reference internal" href="#dogpile.cache.backends.file.DBMBackend" title="dogpile.cache.backends.file.DBMBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">DBMBackend</span></code></a> uses a read/write
lockfile by default, which is compatible even with those
DBM implementations for which this is unnecessary,
though the behavior can be disabled.</p>
<p>The DBM backend by default makes use of two lockfiles.
One is in order to protect the DBM file itself from
concurrent writes, the other is to coordinate
value creation (i.e. the dogpile lock).  By default,
these lockfiles use the <code class="docutils literal notranslate"><span class="pre">flock()</span></code> system call
for locking; this is <strong>only available on Unix
platforms</strong>.   An alternative lock implementation, such as one
which is based on threads or uses a third-party system
such as <a class="reference external" href="https://pypi.python.org/pypi/portalocker">portalocker</a>,
can be dropped in using the <code class="docutils literal notranslate"><span class="pre">lock_factory</span></code> argument
in conjunction with the <a class="reference internal" href="#dogpile.cache.backends.file.AbstractFileLock" title="dogpile.cache.backends.file.AbstractFileLock"><code class="xref py py-class docutils literal notranslate"><span class="pre">AbstractFileLock</span></code></a> base class.</p>
<p>Currently, the dogpile lock is against the entire
DBM file, not per key.   This means there can
only be one “creator” job running at a time
per dbm file.</p>
<p>A future improvement might be to have the dogpile lock
using a filename that’s based on a modulus of the key.
Locking on a filename that uniquely corresponds to the
key is problematic, since it’s not generally safe to
delete lockfiles as the application runs, implying an
unlimited number of key-based files would need to be
created and never deleted.</p>
<p>Parameters to the <code class="docutils literal notranslate"><span class="pre">arguments</span></code> dictionary are
below.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="dogpile.cache.backends.file.DBMBackend.params.filename"></span><strong>filename</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.backends.file.DBMBackend.params.filename">¶</a> – path of the filename in which to
create the DBM file.  Note that some dbm backends
will change this name to have additional suffixes.</p></li>
<li><p><span class="target" id="dogpile.cache.backends.file.DBMBackend.params.rw_lockfile"></span><strong>rw_lockfile</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.backends.file.DBMBackend.params.rw_lockfile">¶</a> – the name of the file to use for
read/write locking.  If omitted, a default name
is used by appending the suffix “.rw.lock” to the
DBM filename.  If False, then no lock is used.</p></li>
<li><p><span class="target" id="dogpile.cache.backends.file.DBMBackend.params.dogpile_lockfile"></span><strong>dogpile_lockfile</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.backends.file.DBMBackend.params.dogpile_lockfile">¶</a> – the name of the file to use
for value creation, i.e. the dogpile lock.  If
omitted, a default name is used by appending the
suffix “.dogpile.lock” to the DBM filename. If
False, then dogpile.cache uses the default dogpile
lock, a plain thread-based mutex.</p></li>
<li><p><span class="target" id="dogpile.cache.backends.file.DBMBackend.params.lock_factory"></span><strong>lock_factory</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.backends.file.DBMBackend.params.lock_factory">¶</a> – <p>a function or class which provides
for a read/write lock.  Defaults to <a class="reference internal" href="#dogpile.cache.backends.file.FileLock" title="dogpile.cache.backends.file.FileLock"><code class="xref py py-class docutils literal notranslate"><span class="pre">FileLock</span></code></a>.
Custom implementations need to implement context-manager
based <code class="docutils literal notranslate"><span class="pre">read()</span></code> and <code class="docutils literal notranslate"><span class="pre">write()</span></code> functions - the
<a class="reference internal" href="#dogpile.cache.backends.file.AbstractFileLock" title="dogpile.cache.backends.file.AbstractFileLock"><code class="xref py py-class docutils literal notranslate"><span class="pre">AbstractFileLock</span></code></a> class is provided as a base class
which provides these methods based on individual read/write lock
functions.  E.g. to replace the lock with the dogpile.core
<a class="reference internal" href="#dogpile.util.ReadWriteMutex" title="dogpile.util.ReadWriteMutex"><code class="xref py py-class docutils literal notranslate"><span class="pre">ReadWriteMutex</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dogpile.core.readwrite_lock</span> <span class="kn">import</span> <span class="n">ReadWriteMutex</span>
<span class="kn">from</span> <span class="nn">dogpile.cache.backends.file</span> <span class="kn">import</span> <span class="n">AbstractFileLock</span>

<span class="k">class</span> <span class="nc">MutexLock</span><span class="p">(</span><span class="n">AbstractFileLock</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mutex</span> <span class="o">=</span> <span class="n">ReadWriteMutex</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">acquire_read_lock</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wait</span><span class="p">):</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutex</span><span class="o">.</span><span class="n">acquire_read_lock</span><span class="p">(</span><span class="n">wait</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">wait</span> <span class="ow">or</span> <span class="n">ret</span>

    <span class="k">def</span> <span class="nf">acquire_write_lock</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wait</span><span class="p">):</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutex</span><span class="o">.</span><span class="n">acquire_write_lock</span><span class="p">(</span><span class="n">wait</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">wait</span> <span class="ow">or</span> <span class="n">ret</span>

    <span class="k">def</span> <span class="nf">release_read_lock</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutex</span><span class="o">.</span><span class="n">release_read_lock</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">release_write_lock</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutex</span><span class="o">.</span><span class="n">release_write_lock</span><span class="p">()</span>

<span class="kn">from</span> <span class="nn">dogpile.cache</span> <span class="kn">import</span> <span class="n">make_region</span>

<span class="n">region</span> <span class="o">=</span> <span class="n">make_region</span><span class="p">()</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span>
    <span class="s2">&quot;dogpile.cache.dbm&quot;</span><span class="p">,</span>
    <span class="n">expiration_time</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span>
    <span class="n">arguments</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;filename&quot;</span><span class="p">:</span> <span class="s2">&quot;file.dbm&quot;</span><span class="p">,</span>
        <span class="s2">&quot;lock_factory&quot;</span><span class="p">:</span> <span class="n">MutexLock</span>
    <span class="p">}</span>
<span class="p">)</span>
</pre></div>
</div>
<p>While the included <a class="reference internal" href="#dogpile.cache.backends.file.FileLock" title="dogpile.cache.backends.file.FileLock"><code class="xref py py-class docutils literal notranslate"><span class="pre">FileLock</span></code></a> uses <code class="docutils literal notranslate"><span class="pre">os.flock()</span></code>, a
windows-compatible implementation can be built using a library
such as <a class="reference external" href="https://pypi.python.org/pypi/portalocker">portalocker</a>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.5.2.</span></p>
</div>
</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="dogpile.cache.backends.file.DBMBackend.delete">
<code class="sig-name descname">delete</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.backends.file.DBMBackend.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete a value from the cache.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><span class="target" id="dogpile.cache.backends.file.DBMBackend.delete.params.key"></span><strong>key</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.backends.file.DBMBackend.delete.params.key">¶</a> – String key that was passed to the
<a class="reference internal" href="#dogpile.cache.region.CacheRegion.delete" title="dogpile.cache.region.CacheRegion.delete"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.delete()</span></code></a>
method, which will also be processed by the “key mangling” function
if one was present.</p>
</dd>
</dl>
<p>The behavior here should be idempotent,
that is, can be called any number of times
regardless of whether or not the
key exists.</p>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.backends.file.DBMBackend.delete_multi">
<code class="sig-name descname">delete_multi</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">keys</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.backends.file.DBMBackend.delete_multi" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete multiple values from the cache.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><span class="target" id="dogpile.cache.backends.file.DBMBackend.delete_multi.params.keys"></span><strong>keys</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.backends.file.DBMBackend.delete_multi.params.keys">¶</a> – sequence of string keys that was passed to the
<a class="reference internal" href="#dogpile.cache.region.CacheRegion.delete_multi" title="dogpile.cache.region.CacheRegion.delete_multi"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.delete_multi()</span></code></a> method, which will also be processed
by the “key mangling” function if one was present.</p>
</dd>
</dl>
<p>The behavior here should be idempotent,
that is, can be called any number of times
regardless of whether or not the
key exists.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.5.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.backends.file.DBMBackend.get_mutex">
<code class="sig-name descname">get_mutex</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.backends.file.DBMBackend.get_mutex" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an optional mutexing object for the given key.</p>
<p>This object need only provide an <code class="docutils literal notranslate"><span class="pre">acquire()</span></code>
and <code class="docutils literal notranslate"><span class="pre">release()</span></code> method.</p>
<p>May return <code class="docutils literal notranslate"><span class="pre">None</span></code>, in which case the dogpile
lock will use a regular <code class="docutils literal notranslate"><span class="pre">threading.Lock</span></code>
object to mutex concurrent threads for
value creation.   The default implementation
returns <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<p>Different backends may want to provide various
kinds of “mutex” objects, such as those which
link to lock files, distributed mutexes,
memcached semaphores, etc.  Whatever
kind of system is best suited for the scope
and behavior of the caching backend.</p>
<p>A mutex that takes the key into account will
allow multiple regenerate operations across
keys to proceed simultaneously, while a mutex
that does not will serialize regenerate operations
to just one at a time across all keys in the region.
The latter approach, or a variant that involves
a modulus of the given key’s hash value,
can be used as a means of throttling the total
number of value recreation operations that may
proceed at one time.</p>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.backends.file.DBMBackend.get_serialized">
<code class="sig-name descname">get_serialized</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.backends.file.DBMBackend.get_serialized" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a serialized value from the cache.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><span class="target" id="dogpile.cache.backends.file.DBMBackend.get_serialized.params.key"></span><strong>key</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.backends.file.DBMBackend.get_serialized.params.key">¶</a> – String key that was passed to the <a class="reference internal" href="#dogpile.cache.region.CacheRegion.get" title="dogpile.cache.region.CacheRegion.get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.get()</span></code></a>
method, which will also be processed by the “key mangling” function
if one was present.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a bytes object, or <a class="reference internal" href="#dogpile.cache.api.NO_VALUE" title="dogpile.cache.api.NO_VALUE"><code class="xref py py-data docutils literal notranslate"><span class="pre">NO_VALUE</span></code></a>
constant if not present.</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.1.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.backends.file.DBMBackend.get_serialized_multi">
<code class="sig-name descname">get_serialized_multi</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">keys</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.backends.file.DBMBackend.get_serialized_multi" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve multiple serialized values from the cache.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><span class="target" id="dogpile.cache.backends.file.DBMBackend.get_serialized_multi.params.keys"></span><strong>keys</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.backends.file.DBMBackend.get_serialized_multi.params.keys">¶</a> – sequence of string keys that was passed to the
<a class="reference internal" href="#dogpile.cache.region.CacheRegion.get_multi" title="dogpile.cache.region.CacheRegion.get_multi"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.get_multi()</span></code></a> method, which will also be processed
by the “key mangling” function if one was present.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of bytes objects</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.1.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.backends.file.DBMBackend.set_serialized">
<code class="sig-name descname">set_serialized</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key</span></em>, <em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.backends.file.DBMBackend.set_serialized" title="Permalink to this definition">¶</a></dt>
<dd><p>Set a serialized value in the cache.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="dogpile.cache.backends.file.DBMBackend.set_serialized.params.key"></span><strong>key</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.backends.file.DBMBackend.set_serialized.params.key">¶</a> – String key that was passed to the <a class="reference internal" href="#dogpile.cache.region.CacheRegion.set" title="dogpile.cache.region.CacheRegion.set"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.set()</span></code></a>
method, which will also be processed by the “key mangling” function
if one was present.</p></li>
<li><p><span class="target" id="dogpile.cache.backends.file.DBMBackend.set_serialized.params.value"></span><strong>value</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.backends.file.DBMBackend.set_serialized.params.value">¶</a> – a bytes object to be stored.</p></li>
</ul>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.1.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.backends.file.DBMBackend.set_serialized_multi">
<code class="sig-name descname">set_serialized_multi</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mapping</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.backends.file.DBMBackend.set_serialized_multi" title="Permalink to this definition">¶</a></dt>
<dd><p>Set multiple serialized values in the cache.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><span class="target" id="dogpile.cache.backends.file.DBMBackend.set_serialized_multi.params.mapping"></span><strong>mapping</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.backends.file.DBMBackend.set_serialized_multi.params.mapping">¶</a> – a dict in which the key will be whatever was passed to
the <a class="reference internal" href="#dogpile.cache.region.CacheRegion.set_multi" title="dogpile.cache.region.CacheRegion.set_multi"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.set_multi()</span></code></a> method, processed by the “key
mangling” function, if any.</p>
</dd>
</dl>
<p>When implementing a new <a class="reference internal" href="#dogpile.cache.api.CacheBackend" title="dogpile.cache.api.CacheBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">CacheBackend</span></code></a> or cutomizing via
<a class="reference internal" href="#dogpile.cache.proxy.ProxyBackend" title="dogpile.cache.proxy.ProxyBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">ProxyBackend</span></code></a>, be aware that when this method is invoked by
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Region.get_or_create_multi()</span></code>, the <code class="docutils literal notranslate"><span class="pre">mapping</span></code> values are the
same ones returned to the upstream caller. If the subclass alters the
values in any way, it must not do so ‘in-place’ on the <code class="docutils literal notranslate"><span class="pre">mapping</span></code> dict
– that will have the undesirable effect of modifying the returned
values as well.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.1.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="dogpile.cache.backends.file.FileLock">
<em class="property">class </em><code class="sig-prename descclassname">dogpile.cache.backends.file.</code><code class="sig-name descname">FileLock</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.backends.file.FileLock" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dogpile.cache.backends.file.AbstractFileLock" title="dogpile.cache.backends.file.AbstractFileLock"><code class="xref py py-class docutils literal notranslate"><span class="pre">dogpile.cache.backends.file.AbstractFileLock</span></code></a></p>
<p>Use lockfiles to coordinate read/write access to a file.</p>
<p>Only works on Unix systems, using
<a class="reference external" href="http://docs.python.org/library/fcntl.html">fcntl.flock()</a>.</p>
<dl class="py method">
<dt id="dogpile.cache.backends.file.FileLock.acquire_read_lock">
<code class="sig-name descname">acquire_read_lock</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">wait</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.backends.file.FileLock.acquire_read_lock" title="Permalink to this definition">¶</a></dt>
<dd><p>Acquire a ‘reader’ lock.</p>
<p>Raises <code class="docutils literal notranslate"><span class="pre">NotImplementedError</span></code> by default, must be
implemented by subclasses.</p>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.backends.file.FileLock.acquire_write_lock">
<code class="sig-name descname">acquire_write_lock</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">wait</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.backends.file.FileLock.acquire_write_lock" title="Permalink to this definition">¶</a></dt>
<dd><p>Acquire a ‘write’ lock.</p>
<p>Raises <code class="docutils literal notranslate"><span class="pre">NotImplementedError</span></code> by default, must be
implemented by subclasses.</p>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.backends.file.FileLock.is_open">
<em class="property">property </em><code class="sig-name descname">is_open</code><a class="headerlink" href="#dogpile.cache.backends.file.FileLock.is_open" title="Permalink to this definition">¶</a></dt>
<dd><p>optional method.</p>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.backends.file.FileLock.release_read_lock">
<code class="sig-name descname">release_read_lock</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.backends.file.FileLock.release_read_lock" title="Permalink to this definition">¶</a></dt>
<dd><p>Release a ‘reader’ lock.</p>
<p>Raises <code class="docutils literal notranslate"><span class="pre">NotImplementedError</span></code> by default, must be
implemented by subclasses.</p>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.backends.file.FileLock.release_write_lock">
<code class="sig-name descname">release_write_lock</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.backends.file.FileLock.release_write_lock" title="Permalink to this definition">¶</a></dt>
<dd><p>Release a ‘writer’ lock.</p>
<p>Raises <code class="docutils literal notranslate"><span class="pre">NotImplementedError</span></code> by default, must be
implemented by subclasses.</p>
</dd></dl>

</dd></dl>

</div>
<span class="target" id="module-dogpile.cache.proxy"></span><div class="section" id="proxy-backends">
<h3>Proxy Backends<a class="headerlink" href="#proxy-backends" title="Permalink to this headline">¶</a></h3>
<p>Provides a utility and a decorator class that allow for modifying the behavior
of different backends without altering the class itself or having to extend the
base backend.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.5.0: </span>Added support for the <a class="reference internal" href="#dogpile.cache.proxy.ProxyBackend" title="dogpile.cache.proxy.ProxyBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">ProxyBackend</span></code></a> class.</p>
</div>
<dl class="py class">
<dt id="dogpile.cache.proxy.ProxyBackend">
<em class="property">class </em><code class="sig-prename descclassname">dogpile.cache.proxy.</code><code class="sig-name descname">ProxyBackend</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">arg</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kw</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.proxy.ProxyBackend" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dogpile.cache.api.CacheBackend" title="dogpile.cache.api.CacheBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">dogpile.cache.api.CacheBackend</span></code></a></p>
<p>A decorator class for altering the functionality of backends.</p>
<p>Basic usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dogpile.cache</span> <span class="kn">import</span> <span class="n">make_region</span>
<span class="kn">from</span> <span class="nn">dogpile.cache.proxy</span> <span class="kn">import</span> <span class="n">ProxyBackend</span>

<span class="k">class</span> <span class="nc">MyFirstProxy</span><span class="p">(</span><span class="n">ProxyBackend</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="c1"># ... custom code goes here ...</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">proxied</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="c1"># ... custom code goes here ...</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">proxied</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">MySecondProxy</span><span class="p">(</span><span class="n">ProxyBackend</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="c1"># ... custom code goes here ...</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">proxied</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>


<span class="n">region</span> <span class="o">=</span> <span class="n">make_region</span><span class="p">()</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span>
    <span class="s1">&#39;dogpile.cache.dbm&#39;</span><span class="p">,</span>
    <span class="n">expiration_time</span> <span class="o">=</span> <span class="mi">3600</span><span class="p">,</span>
    <span class="n">arguments</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;filename&quot;</span><span class="p">:</span><span class="s2">&quot;/path/to/cachefile.dbm&quot;</span>
    <span class="p">},</span>
    <span class="n">wrap</span> <span class="o">=</span> <span class="p">[</span> <span class="n">MyFirstProxy</span><span class="p">,</span> <span class="n">MySecondProxy</span> <span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Classes that extend <a class="reference internal" href="#dogpile.cache.proxy.ProxyBackend" title="dogpile.cache.proxy.ProxyBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">ProxyBackend</span></code></a> can be stacked
together.  The <code class="docutils literal notranslate"><span class="pre">.proxied</span></code> property will always
point to either the concrete backend instance or
the next proxy in the chain that a method can be
delegated towards.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.5.0.</span></p>
</div>
<dl class="py method">
<dt id="dogpile.cache.proxy.ProxyBackend.delete">
<code class="sig-name descname">delete</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#dogpile.cache.proxy.ProxyBackend.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete a value from the cache.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><span class="target" id="dogpile.cache.proxy.ProxyBackend.delete.params.key"></span><strong>key</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.proxy.ProxyBackend.delete.params.key">¶</a> – String key that was passed to the
<a class="reference internal" href="#dogpile.cache.region.CacheRegion.delete" title="dogpile.cache.region.CacheRegion.delete"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.delete()</span></code></a>
method, which will also be processed by the “key mangling” function
if one was present.</p>
</dd>
</dl>
<p>The behavior here should be idempotent,
that is, can be called any number of times
regardless of whether or not the
key exists.</p>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.proxy.ProxyBackend.delete_multi">
<code class="sig-name descname">delete_multi</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">keys</span><span class="p">:</span> <span class="n">Sequence<span class="p">[</span>str<span class="p">]</span></span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#dogpile.cache.proxy.ProxyBackend.delete_multi" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete multiple values from the cache.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><span class="target" id="dogpile.cache.proxy.ProxyBackend.delete_multi.params.keys"></span><strong>keys</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.proxy.ProxyBackend.delete_multi.params.keys">¶</a> – sequence of string keys that was passed to the
<a class="reference internal" href="#dogpile.cache.region.CacheRegion.delete_multi" title="dogpile.cache.region.CacheRegion.delete_multi"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.delete_multi()</span></code></a> method, which will also be processed
by the “key mangling” function if one was present.</p>
</dd>
</dl>
<p>The behavior here should be idempotent,
that is, can be called any number of times
regardless of whether or not the
key exists.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.5.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.proxy.ProxyBackend.get">
<code class="sig-name descname">get</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; Union<span class="p">[</span><a class="reference internal" href="#dogpile.cache.api.CachedValue" title="dogpile.cache.api.CachedValue">dogpile.cache.api.CachedValue</a><span class="p">, </span><a class="reference internal" href="#dogpile.cache.api.NoValue" title="dogpile.cache.api.NoValue">dogpile.cache.api.NoValue</a><span class="p">, </span>bytes<span class="p">]</span><a class="headerlink" href="#dogpile.cache.proxy.ProxyBackend.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve an optionally serialized value from the cache.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><span class="target" id="dogpile.cache.proxy.ProxyBackend.get.params.key"></span><strong>key</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.proxy.ProxyBackend.get.params.key">¶</a> – String key that was passed to the <a class="reference internal" href="#dogpile.cache.region.CacheRegion.get" title="dogpile.cache.region.CacheRegion.get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.get()</span></code></a>
method, which will also be processed by the “key mangling” function
if one was present.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the Python object that corresponds to
what was established via the <a class="reference internal" href="#dogpile.cache.api.CacheBackend.set" title="dogpile.cache.api.CacheBackend.set"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheBackend.set()</span></code></a> method,
or the <a class="reference internal" href="#dogpile.cache.api.NO_VALUE" title="dogpile.cache.api.NO_VALUE"><code class="xref py py-data docutils literal notranslate"><span class="pre">NO_VALUE</span></code></a> constant if not present.</p>
</dd>
</dl>
<p>If a serializer is in use, this method will only be called if the
<a class="reference internal" href="#dogpile.cache.api.CacheBackend.get_serialized" title="dogpile.cache.api.CacheBackend.get_serialized"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheBackend.get_serialized()</span></code></a> method is not overridden.</p>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.proxy.ProxyBackend.get_multi">
<code class="sig-name descname">get_multi</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">keys</span><span class="p">:</span> <span class="n">Sequence<span class="p">[</span>str<span class="p">]</span></span></em><span class="sig-paren">)</span> &#x2192; Sequence<span class="p">[</span>Union<span class="p">[</span><a class="reference internal" href="#dogpile.cache.api.CachedValue" title="dogpile.cache.api.CachedValue">dogpile.cache.api.CachedValue</a><span class="p">, </span><a class="reference internal" href="#dogpile.cache.api.NoValue" title="dogpile.cache.api.NoValue">dogpile.cache.api.NoValue</a><span class="p">, </span>bytes<span class="p">]</span><span class="p">]</span><a class="headerlink" href="#dogpile.cache.proxy.ProxyBackend.get_multi" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve multiple optionally serialized values from the cache.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><span class="target" id="dogpile.cache.proxy.ProxyBackend.get_multi.params.keys"></span><strong>keys</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.proxy.ProxyBackend.get_multi.params.keys">¶</a> – sequence of string keys that was passed to the
<a class="reference internal" href="#dogpile.cache.region.CacheRegion.get_multi" title="dogpile.cache.region.CacheRegion.get_multi"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.get_multi()</span></code></a> method, which will also be processed
by the “key mangling” function if one was present.</p>
</dd>
</dl>
<dl class="simple">
<dt>:return a list of values as would be returned</dt><dd><p>individually via the <a class="reference internal" href="#dogpile.cache.api.CacheBackend.get" title="dogpile.cache.api.CacheBackend.get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheBackend.get()</span></code></a> method, corresponding
to the list of keys given.</p>
</dd>
</dl>
<p>If a serializer is in use, this method will only be called if the
<a class="reference internal" href="#dogpile.cache.api.CacheBackend.get_serialized_multi" title="dogpile.cache.api.CacheBackend.get_serialized_multi"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheBackend.get_serialized_multi()</span></code></a> method is not overridden.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.5.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.proxy.ProxyBackend.get_mutex">
<code class="sig-name descname">get_mutex</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; Optional<span class="p">[</span><a class="reference internal" href="#dogpile.cache.api.CacheMutex" title="dogpile.cache.api.CacheMutex">dogpile.cache.api.CacheMutex</a><span class="p">]</span><a class="headerlink" href="#dogpile.cache.proxy.ProxyBackend.get_mutex" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an optional mutexing object for the given key.</p>
<p>This object need only provide an <code class="docutils literal notranslate"><span class="pre">acquire()</span></code>
and <code class="docutils literal notranslate"><span class="pre">release()</span></code> method.</p>
<p>May return <code class="docutils literal notranslate"><span class="pre">None</span></code>, in which case the dogpile
lock will use a regular <code class="docutils literal notranslate"><span class="pre">threading.Lock</span></code>
object to mutex concurrent threads for
value creation.   The default implementation
returns <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<p>Different backends may want to provide various
kinds of “mutex” objects, such as those which
link to lock files, distributed mutexes,
memcached semaphores, etc.  Whatever
kind of system is best suited for the scope
and behavior of the caching backend.</p>
<p>A mutex that takes the key into account will
allow multiple regenerate operations across
keys to proceed simultaneously, while a mutex
that does not will serialize regenerate operations
to just one at a time across all keys in the region.
The latter approach, or a variant that involves
a modulus of the given key’s hash value,
can be used as a means of throttling the total
number of value recreation operations that may
proceed at one time.</p>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.proxy.ProxyBackend.set">
<code class="sig-name descname">set</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">value</span><span class="p">:</span> <span class="n">Union<span class="p">[</span><a class="reference internal" href="#dogpile.cache.api.CachedValue" title="dogpile.cache.api.CachedValue">dogpile.cache.api.CachedValue</a><span class="p">, </span>bytes<span class="p">]</span></span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#dogpile.cache.proxy.ProxyBackend.set" title="Permalink to this definition">¶</a></dt>
<dd><p>Set an optionally serialized value in the cache.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="dogpile.cache.proxy.ProxyBackend.set.params.key"></span><strong>key</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.proxy.ProxyBackend.set.params.key">¶</a> – String key that was passed to the <a class="reference internal" href="#dogpile.cache.region.CacheRegion.set" title="dogpile.cache.region.CacheRegion.set"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.set()</span></code></a>
method, which will also be processed by the “key mangling” function
if one was present.</p></li>
<li><p><span class="target" id="dogpile.cache.proxy.ProxyBackend.set.params.value"></span><strong>value</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.proxy.ProxyBackend.set.params.value">¶</a> – The optionally serialized <a class="reference internal" href="#dogpile.cache.api.CachedValue" title="dogpile.cache.api.CachedValue"><code class="xref py py-class docutils literal notranslate"><span class="pre">CachedValue</span></code></a> object.
May be an instance of <a class="reference internal" href="#dogpile.cache.api.CachedValue" title="dogpile.cache.api.CachedValue"><code class="xref py py-class docutils literal notranslate"><span class="pre">CachedValue</span></code></a> or a bytes object
depending on if a serializer is in use with the region and if the
<a class="reference internal" href="#dogpile.cache.api.CacheBackend.set_serialized" title="dogpile.cache.api.CacheBackend.set_serialized"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheBackend.set_serialized()</span></code></a> method is not overridden.</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#dogpile.cache.api.CacheBackend.set_serialized" title="dogpile.cache.api.CacheBackend.set_serialized"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheBackend.set_serialized()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.proxy.ProxyBackend.set_multi">
<code class="sig-name descname">set_multi</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mapping</span><span class="p">:</span> <span class="n">Mapping<span class="p">[</span>str<span class="p">, </span>Union<span class="p">[</span><a class="reference internal" href="#dogpile.cache.api.CachedValue" title="dogpile.cache.api.CachedValue">dogpile.cache.api.CachedValue</a><span class="p">, </span>bytes<span class="p">]</span><span class="p">]</span></span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#dogpile.cache.proxy.ProxyBackend.set_multi" title="Permalink to this definition">¶</a></dt>
<dd><p>Set multiple values in the cache.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><span class="target" id="dogpile.cache.proxy.ProxyBackend.set_multi.params.mapping"></span><strong>mapping</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.proxy.ProxyBackend.set_multi.params.mapping">¶</a> – a dict in which the key will be whatever was passed to
the <a class="reference internal" href="#dogpile.cache.region.CacheRegion.set_multi" title="dogpile.cache.region.CacheRegion.set_multi"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.set_multi()</span></code></a> method, processed by the “key
mangling” function, if any.</p>
</dd>
</dl>
<p>When implementing a new <a class="reference internal" href="#dogpile.cache.api.CacheBackend" title="dogpile.cache.api.CacheBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">CacheBackend</span></code></a> or cutomizing via
<a class="reference internal" href="#dogpile.cache.proxy.ProxyBackend" title="dogpile.cache.proxy.ProxyBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">ProxyBackend</span></code></a>, be aware that when this method is invoked by
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Region.get_or_create_multi()</span></code>, the <code class="docutils literal notranslate"><span class="pre">mapping</span></code> values are the
same ones returned to the upstream caller. If the subclass alters the
values in any way, it must not do so ‘in-place’ on the <code class="docutils literal notranslate"><span class="pre">mapping</span></code> dict
– that will have the undesirable effect of modifying the returned
values as well.</p>
<p>If a serializer is in use, this method will only be called if the
<a class="reference internal" href="#dogpile.cache.api.CacheBackend.set_serialized_multi" title="dogpile.cache.api.CacheBackend.set_serialized_multi"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheBackend.set_serialized_multi()</span></code></a> method is not overridden.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.5.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.proxy.ProxyBackend.wrap">
<code class="sig-name descname">wrap</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">backend</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#dogpile.cache.api.CacheBackend" title="dogpile.cache.api.CacheBackend">dogpile.cache.api.CacheBackend</a></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#dogpile.cache.proxy.ProxyBackend" title="dogpile.cache.proxy.ProxyBackend">dogpile.cache.proxy.ProxyBackend</a><a class="headerlink" href="#dogpile.cache.proxy.ProxyBackend.wrap" title="Permalink to this definition">¶</a></dt>
<dd><p>Take a backend as an argument and setup the self.proxied property.
Return an object that be used as a backend by a <a class="reference internal" href="#dogpile.cache.region.CacheRegion" title="dogpile.cache.region.CacheRegion"><code class="xref py py-class docutils literal notranslate"><span class="pre">CacheRegion</span></code></a>
object.</p>
</dd></dl>

</dd></dl>

</div>
<span class="target" id="module-dogpile.cache.backends.null"></span><div class="section" id="null-backend">
<h3>Null Backend<a class="headerlink" href="#null-backend" title="Permalink to this headline">¶</a></h3>
<p>The Null backend does not do any caching at all.  It can be
used to test behavior without caching, or as a means of disabling
caching for a region that is otherwise used normally.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.5.4.</span></p>
</div>
<dl class="py class">
<dt id="dogpile.cache.backends.null.NullBackend">
<em class="property">class </em><code class="sig-prename descclassname">dogpile.cache.backends.null.</code><code class="sig-name descname">NullBackend</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">arguments</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.backends.null.NullBackend" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dogpile.cache.api.CacheBackend" title="dogpile.cache.api.CacheBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">dogpile.cache.api.CacheBackend</span></code></a></p>
<p>A “null” backend that effectively disables all cache operations.</p>
<p>Basic usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dogpile.cache</span> <span class="kn">import</span> <span class="n">make_region</span>

<span class="n">region</span> <span class="o">=</span> <span class="n">make_region</span><span class="p">()</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span>
    <span class="s1">&#39;dogpile.cache.null&#39;</span>
<span class="p">)</span>
</pre></div>
</div>
<dl class="py method">
<dt id="dogpile.cache.backends.null.NullBackend.delete">
<code class="sig-name descname">delete</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.backends.null.NullBackend.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete a value from the cache.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><span class="target" id="dogpile.cache.backends.null.NullBackend.delete.params.key"></span><strong>key</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.backends.null.NullBackend.delete.params.key">¶</a> – String key that was passed to the
<a class="reference internal" href="#dogpile.cache.region.CacheRegion.delete" title="dogpile.cache.region.CacheRegion.delete"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.delete()</span></code></a>
method, which will also be processed by the “key mangling” function
if one was present.</p>
</dd>
</dl>
<p>The behavior here should be idempotent,
that is, can be called any number of times
regardless of whether or not the
key exists.</p>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.backends.null.NullBackend.delete_multi">
<code class="sig-name descname">delete_multi</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">keys</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.backends.null.NullBackend.delete_multi" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete multiple values from the cache.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><span class="target" id="dogpile.cache.backends.null.NullBackend.delete_multi.params.keys"></span><strong>keys</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.backends.null.NullBackend.delete_multi.params.keys">¶</a> – sequence of string keys that was passed to the
<a class="reference internal" href="#dogpile.cache.region.CacheRegion.delete_multi" title="dogpile.cache.region.CacheRegion.delete_multi"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.delete_multi()</span></code></a> method, which will also be processed
by the “key mangling” function if one was present.</p>
</dd>
</dl>
<p>The behavior here should be idempotent,
that is, can be called any number of times
regardless of whether or not the
key exists.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.5.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.backends.null.NullBackend.get">
<code class="sig-name descname">get</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.backends.null.NullBackend.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve an optionally serialized value from the cache.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><span class="target" id="dogpile.cache.backends.null.NullBackend.get.params.key"></span><strong>key</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.backends.null.NullBackend.get.params.key">¶</a> – String key that was passed to the <a class="reference internal" href="#dogpile.cache.region.CacheRegion.get" title="dogpile.cache.region.CacheRegion.get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.get()</span></code></a>
method, which will also be processed by the “key mangling” function
if one was present.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the Python object that corresponds to
what was established via the <a class="reference internal" href="#dogpile.cache.api.CacheBackend.set" title="dogpile.cache.api.CacheBackend.set"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheBackend.set()</span></code></a> method,
or the <a class="reference internal" href="#dogpile.cache.api.NO_VALUE" title="dogpile.cache.api.NO_VALUE"><code class="xref py py-data docutils literal notranslate"><span class="pre">NO_VALUE</span></code></a> constant if not present.</p>
</dd>
</dl>
<p>If a serializer is in use, this method will only be called if the
<a class="reference internal" href="#dogpile.cache.api.CacheBackend.get_serialized" title="dogpile.cache.api.CacheBackend.get_serialized"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheBackend.get_serialized()</span></code></a> method is not overridden.</p>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.backends.null.NullBackend.get_multi">
<code class="sig-name descname">get_multi</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">keys</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.backends.null.NullBackend.get_multi" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve multiple optionally serialized values from the cache.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><span class="target" id="dogpile.cache.backends.null.NullBackend.get_multi.params.keys"></span><strong>keys</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.backends.null.NullBackend.get_multi.params.keys">¶</a> – sequence of string keys that was passed to the
<a class="reference internal" href="#dogpile.cache.region.CacheRegion.get_multi" title="dogpile.cache.region.CacheRegion.get_multi"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.get_multi()</span></code></a> method, which will also be processed
by the “key mangling” function if one was present.</p>
</dd>
</dl>
<dl class="simple">
<dt>:return a list of values as would be returned</dt><dd><p>individually via the <a class="reference internal" href="#dogpile.cache.api.CacheBackend.get" title="dogpile.cache.api.CacheBackend.get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheBackend.get()</span></code></a> method, corresponding
to the list of keys given.</p>
</dd>
</dl>
<p>If a serializer is in use, this method will only be called if the
<a class="reference internal" href="#dogpile.cache.api.CacheBackend.get_serialized_multi" title="dogpile.cache.api.CacheBackend.get_serialized_multi"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheBackend.get_serialized_multi()</span></code></a> method is not overridden.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.5.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.backends.null.NullBackend.get_mutex">
<code class="sig-name descname">get_mutex</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.backends.null.NullBackend.get_mutex" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an optional mutexing object for the given key.</p>
<p>This object need only provide an <code class="docutils literal notranslate"><span class="pre">acquire()</span></code>
and <code class="docutils literal notranslate"><span class="pre">release()</span></code> method.</p>
<p>May return <code class="docutils literal notranslate"><span class="pre">None</span></code>, in which case the dogpile
lock will use a regular <code class="docutils literal notranslate"><span class="pre">threading.Lock</span></code>
object to mutex concurrent threads for
value creation.   The default implementation
returns <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<p>Different backends may want to provide various
kinds of “mutex” objects, such as those which
link to lock files, distributed mutexes,
memcached semaphores, etc.  Whatever
kind of system is best suited for the scope
and behavior of the caching backend.</p>
<p>A mutex that takes the key into account will
allow multiple regenerate operations across
keys to proceed simultaneously, while a mutex
that does not will serialize regenerate operations
to just one at a time across all keys in the region.
The latter approach, or a variant that involves
a modulus of the given key’s hash value,
can be used as a means of throttling the total
number of value recreation operations that may
proceed at one time.</p>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.backends.null.NullBackend.set">
<code class="sig-name descname">set</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key</span></em>, <em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.backends.null.NullBackend.set" title="Permalink to this definition">¶</a></dt>
<dd><p>Set an optionally serialized value in the cache.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="dogpile.cache.backends.null.NullBackend.set.params.key"></span><strong>key</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.backends.null.NullBackend.set.params.key">¶</a> – String key that was passed to the <a class="reference internal" href="#dogpile.cache.region.CacheRegion.set" title="dogpile.cache.region.CacheRegion.set"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.set()</span></code></a>
method, which will also be processed by the “key mangling” function
if one was present.</p></li>
<li><p><span class="target" id="dogpile.cache.backends.null.NullBackend.set.params.value"></span><strong>value</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.backends.null.NullBackend.set.params.value">¶</a> – The optionally serialized <a class="reference internal" href="#dogpile.cache.api.CachedValue" title="dogpile.cache.api.CachedValue"><code class="xref py py-class docutils literal notranslate"><span class="pre">CachedValue</span></code></a> object.
May be an instance of <a class="reference internal" href="#dogpile.cache.api.CachedValue" title="dogpile.cache.api.CachedValue"><code class="xref py py-class docutils literal notranslate"><span class="pre">CachedValue</span></code></a> or a bytes object
depending on if a serializer is in use with the region and if the
<a class="reference internal" href="#dogpile.cache.api.CacheBackend.set_serialized" title="dogpile.cache.api.CacheBackend.set_serialized"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheBackend.set_serialized()</span></code></a> method is not overridden.</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#dogpile.cache.api.CacheBackend.set_serialized" title="dogpile.cache.api.CacheBackend.set_serialized"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheBackend.set_serialized()</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.backends.null.NullBackend.set_multi">
<code class="sig-name descname">set_multi</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mapping</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.backends.null.NullBackend.set_multi" title="Permalink to this definition">¶</a></dt>
<dd><p>Set multiple values in the cache.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><span class="target" id="dogpile.cache.backends.null.NullBackend.set_multi.params.mapping"></span><strong>mapping</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.backends.null.NullBackend.set_multi.params.mapping">¶</a> – a dict in which the key will be whatever was passed to
the <a class="reference internal" href="#dogpile.cache.region.CacheRegion.set_multi" title="dogpile.cache.region.CacheRegion.set_multi"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.set_multi()</span></code></a> method, processed by the “key
mangling” function, if any.</p>
</dd>
</dl>
<p>When implementing a new <a class="reference internal" href="#dogpile.cache.api.CacheBackend" title="dogpile.cache.api.CacheBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">CacheBackend</span></code></a> or cutomizing via
<a class="reference internal" href="#dogpile.cache.proxy.ProxyBackend" title="dogpile.cache.proxy.ProxyBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">ProxyBackend</span></code></a>, be aware that when this method is invoked by
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Region.get_or_create_multi()</span></code>, the <code class="docutils literal notranslate"><span class="pre">mapping</span></code> values are the
same ones returned to the upstream caller. If the subclass alters the
values in any way, it must not do so ‘in-place’ on the <code class="docutils literal notranslate"><span class="pre">mapping</span></code> dict
– that will have the undesirable effect of modifying the returned
values as well.</p>
<p>If a serializer is in use, this method will only be called if the
<a class="reference internal" href="#dogpile.cache.api.CacheBackend.set_serialized_multi" title="dogpile.cache.api.CacheBackend.set_serialized_multi"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheBackend.set_serialized_multi()</span></code></a> method is not overridden.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.5.0.</span></p>
</div>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="module-dogpile.cache.exception">
<span id="exceptions"></span><h2>Exceptions<a class="headerlink" href="#module-dogpile.cache.exception" title="Permalink to this headline">¶</a></h2>
<p>Exception classes for dogpile.cache.</p>
<dl class="py exception">
<dt id="dogpile.cache.exception.DogpileCacheException">
<em class="property">exception </em><code class="sig-prename descclassname">dogpile.cache.exception.</code><code class="sig-name descname">DogpileCacheException</code><a class="headerlink" href="#dogpile.cache.exception.DogpileCacheException" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
<p>Base Exception for dogpile.cache exceptions to inherit from.</p>
</dd></dl>

<dl class="py exception">
<dt id="dogpile.cache.exception.PluginNotFound">
<em class="property">exception </em><code class="sig-prename descclassname">dogpile.cache.exception.</code><code class="sig-name descname">PluginNotFound</code><a class="headerlink" href="#dogpile.cache.exception.PluginNotFound" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dogpile.cache.exception.DogpileCacheException" title="dogpile.cache.exception.DogpileCacheException"><code class="xref py py-class docutils literal notranslate"><span class="pre">dogpile.cache.exception.DogpileCacheException</span></code></a></p>
<p>The specified plugin could not be found.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.6.4.</span></p>
</div>
</dd></dl>

<dl class="py exception">
<dt id="dogpile.cache.exception.RegionAlreadyConfigured">
<em class="property">exception </em><code class="sig-prename descclassname">dogpile.cache.exception.</code><code class="sig-name descname">RegionAlreadyConfigured</code><a class="headerlink" href="#dogpile.cache.exception.RegionAlreadyConfigured" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dogpile.cache.exception.DogpileCacheException" title="dogpile.cache.exception.DogpileCacheException"><code class="xref py py-class docutils literal notranslate"><span class="pre">dogpile.cache.exception.DogpileCacheException</span></code></a></p>
<p>CacheRegion instance is already configured.</p>
</dd></dl>

<dl class="py exception">
<dt id="dogpile.cache.exception.RegionNotConfigured">
<em class="property">exception </em><code class="sig-prename descclassname">dogpile.cache.exception.</code><code class="sig-name descname">RegionNotConfigured</code><a class="headerlink" href="#dogpile.cache.exception.RegionNotConfigured" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dogpile.cache.exception.DogpileCacheException" title="dogpile.cache.exception.DogpileCacheException"><code class="xref py py-class docutils literal notranslate"><span class="pre">dogpile.cache.exception.DogpileCacheException</span></code></a></p>
<p>CacheRegion instance has not been configured.</p>
</dd></dl>

<dl class="py exception">
<dt id="dogpile.cache.exception.ValidationError">
<em class="property">exception </em><code class="sig-prename descclassname">dogpile.cache.exception.</code><code class="sig-name descname">ValidationError</code><a class="headerlink" href="#dogpile.cache.exception.ValidationError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dogpile.cache.exception.DogpileCacheException" title="dogpile.cache.exception.DogpileCacheException"><code class="xref py py-class docutils literal notranslate"><span class="pre">dogpile.cache.exception.DogpileCacheException</span></code></a></p>
<p>Error validating a value or option.</p>
</dd></dl>

</div>
<div class="section" id="module-dogpile.cache.plugins.mako_cache">
<span id="plugins"></span><h2>Plugins<a class="headerlink" href="#module-dogpile.cache.plugins.mako_cache" title="Permalink to this headline">¶</a></h2>
<div class="section" id="mako-integration">
<h3>Mako Integration<a class="headerlink" href="#mako-integration" title="Permalink to this headline">¶</a></h3>
<p>dogpile.cache includes a <a class="reference external" href="http://www.makotemplates.org">Mako</a> plugin
that replaces <a class="reference external" href="http://beaker.groovie.org">Beaker</a>
as the cache backend.
Setup a Mako template lookup using the “dogpile.cache” cache implementation
and a region dictionary:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dogpile.cache</span> <span class="kn">import</span> <span class="n">make_region</span>
<span class="kn">from</span> <span class="nn">mako.lookup</span> <span class="kn">import</span> <span class="n">TemplateLookup</span>

<span class="n">my_regions</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;local&quot;</span><span class="p">:</span><span class="n">make_region</span><span class="p">()</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span>
                <span class="s2">&quot;dogpile.cache.dbm&quot;</span><span class="p">,</span>
                <span class="n">expiration_time</span><span class="o">=</span><span class="mi">360</span><span class="p">,</span>
                <span class="n">arguments</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;filename&quot;</span><span class="p">:</span><span class="s2">&quot;file.dbm&quot;</span><span class="p">}</span>
            <span class="p">),</span>
    <span class="s2">&quot;memcached&quot;</span><span class="p">:</span><span class="n">make_region</span><span class="p">()</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span>
                <span class="s2">&quot;dogpile.cache.pylibmc&quot;</span><span class="p">,</span>
                <span class="n">expiration_time</span><span class="o">=</span><span class="mi">3600</span><span class="p">,</span>
                <span class="n">arguments</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;url&quot;</span><span class="p">:[</span><span class="s2">&quot;127.0.0.1&quot;</span><span class="p">]}</span>
            <span class="p">)</span>
<span class="p">}</span>

<span class="n">mako_lookup</span> <span class="o">=</span> <span class="n">TemplateLookup</span><span class="p">(</span>
    <span class="n">directories</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;/myapp/templates&quot;</span><span class="p">],</span>
    <span class="n">cache_impl</span><span class="o">=</span><span class="s2">&quot;dogpile.cache&quot;</span><span class="p">,</span>
    <span class="n">cache_args</span><span class="o">=</span><span class="p">{</span>
        <span class="s1">&#39;regions&#39;</span><span class="p">:</span><span class="n">my_regions</span>
    <span class="p">}</span>
<span class="p">)</span>
</pre></div>
</div>
<p>To use the above configuration in a template, use the <code class="docutils literal notranslate"><span class="pre">cached=True</span></code>
argument  on any Mako tag which accepts it, in conjunction with the
name of the desired region as the <code class="docutils literal notranslate"><span class="pre">cache_region</span></code> argument:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;%</span><span class="k">def</span> <span class="nf">name</span><span class="o">=</span><span class="s2">&quot;mysection()&quot;</span> <span class="n">cached</span><span class="o">=</span><span class="s2">&quot;True&quot;</span> <span class="n">cache_region</span><span class="o">=</span><span class="s2">&quot;memcached&quot;</span><span class="o">&gt;</span>
    <span class="n">some</span> <span class="n">content</span> <span class="n">that</span><span class="s1">&#39;s cached</span>
<span class="o">&lt;/%</span><span class="n">def</span><span class="o">&gt;</span>
</pre></div>
</div>
<dl class="py class">
<dt id="dogpile.cache.plugins.mako_cache.MakoPlugin">
<em class="property">class </em><code class="sig-prename descclassname">dogpile.cache.plugins.mako_cache.</code><code class="sig-name descname">MakoPlugin</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cache</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.plugins.mako_cache.MakoPlugin" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">mako.cache.CacheImpl</span></code></p>
<p>A Mako <code class="docutils literal notranslate"><span class="pre">CacheImpl</span></code> which talks to dogpile.cache.</p>
<dl class="py method">
<dt id="dogpile.cache.plugins.mako_cache.MakoPlugin.get">
<code class="sig-name descname">get</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kw</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.plugins.mako_cache.MakoPlugin.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a value from the cache.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="dogpile.cache.plugins.mako_cache.MakoPlugin.get.params.key"></span><strong>key</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.plugins.mako_cache.MakoPlugin.get.params.key">¶</a> – the value’s key.</p></li>
<li><p><span class="target" id="dogpile.cache.plugins.mako_cache.MakoPlugin.get.params.**kw"></span><strong>**kw</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.plugins.mako_cache.MakoPlugin.get.params.**kw">¶</a> – cache configuration arguments.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.plugins.mako_cache.MakoPlugin.get_or_create">
<code class="sig-name descname">get_or_create</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key</span></em>, <em class="sig-param"><span class="n">creation_function</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kw</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.plugins.mako_cache.MakoPlugin.get_or_create" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a value from the cache, using the given creation function
to generate a new value.</p>
<p>This function <em>must</em> return a value, either from
the cache, or via the given creation function.
If the creation function is called, the newly
created value should be populated into the cache
under the given key before being returned.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="dogpile.cache.plugins.mako_cache.MakoPlugin.get_or_create.params.key"></span><strong>key</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.plugins.mako_cache.MakoPlugin.get_or_create.params.key">¶</a> – the value’s key.</p></li>
<li><p><span class="target" id="dogpile.cache.plugins.mako_cache.MakoPlugin.get_or_create.params.creation_function"></span><strong>creation_function</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.plugins.mako_cache.MakoPlugin.get_or_create.params.creation_function">¶</a> – function that when called generates
a new value.</p></li>
<li><p><span class="target" id="dogpile.cache.plugins.mako_cache.MakoPlugin.get_or_create.params.**kw"></span><strong>**kw</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.plugins.mako_cache.MakoPlugin.get_or_create.params.**kw">¶</a> – cache configuration arguments.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="dogpile.cache.plugins.mako_cache.MakoPlugin.invalidate">
<code class="sig-name descname">invalidate</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kw</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.plugins.mako_cache.MakoPlugin.invalidate" title="Permalink to this definition">¶</a></dt>
<dd><p>Invalidate a value in the cache.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="dogpile.cache.plugins.mako_cache.MakoPlugin.invalidate.params.key"></span><strong>key</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.plugins.mako_cache.MakoPlugin.invalidate.params.key">¶</a> – the value’s key.</p></li>
<li><p><span class="target" id="dogpile.cache.plugins.mako_cache.MakoPlugin.invalidate.params.**kw"></span><strong>**kw</strong><a class="paramlink headerlink reference internal" href="#dogpile.cache.plugins.mako_cache.MakoPlugin.invalidate.params.**kw">¶</a> – cache configuration arguments.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="utilities">
<h2>Utilities<a class="headerlink" href="#utilities" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="dogpile.cache.util.function_key_generator">
<code class="sig-prename descclassname">dogpile.cache.util.</code><code class="sig-name descname">function_key_generator</code><span class="sig-paren">(</span><em class="sig-param">namespace</em>, <em class="sig-param">fn</em>, <em class="sig-param">to_str=&lt;class 'str'&gt;</em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.util.function_key_generator" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a function that generates a string
key, based on a given function as well as
arguments to the returned function itself.</p>
<p>This is used by <a class="reference internal" href="#dogpile.cache.region.CacheRegion.cache_on_arguments" title="dogpile.cache.region.CacheRegion.cache_on_arguments"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CacheRegion.cache_on_arguments()</span></code></a>
to generate a cache key from a decorated function.</p>
<p>An alternate function may be used by specifying
the <a class="reference internal" href="#dogpile.cache.region.CacheRegion.params.function_key_generator" title="dogpile.cache.region.CacheRegion"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">CacheRegion.function_key_generator</span></code></a> argument
for <a class="reference internal" href="#dogpile.cache.region.CacheRegion" title="dogpile.cache.region.CacheRegion"><code class="xref py py-class docutils literal notranslate"><span class="pre">CacheRegion</span></code></a>.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#dogpile.cache.util.kwarg_function_key_generator" title="dogpile.cache.util.kwarg_function_key_generator"><code class="xref py py-func docutils literal notranslate"><span class="pre">kwarg_function_key_generator()</span></code></a> - similar function that also
takes keyword arguments into account</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="dogpile.cache.util.kwarg_function_key_generator">
<code class="sig-prename descclassname">dogpile.cache.util.</code><code class="sig-name descname">kwarg_function_key_generator</code><span class="sig-paren">(</span><em class="sig-param">namespace</em>, <em class="sig-param">fn</em>, <em class="sig-param">to_str=&lt;class 'str'&gt;</em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.util.kwarg_function_key_generator" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a function that generates a string
key, based on a given function as well as
arguments to the returned function itself.</p>
<p>For kwargs passed in, we will build a dict of
all argname (key) argvalue (values) including
default args from the argspec and then
alphabetize the list before generating the
key.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.6.2.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#dogpile.cache.util.function_key_generator" title="dogpile.cache.util.function_key_generator"><code class="xref py py-func docutils literal notranslate"><span class="pre">function_key_generator()</span></code></a> - default key generation function</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="dogpile.cache.util.sha1_mangle_key">
<code class="sig-prename descclassname">dogpile.cache.util.</code><code class="sig-name descname">sha1_mangle_key</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.util.sha1_mangle_key" title="Permalink to this definition">¶</a></dt>
<dd><p>a SHA1 key mangler.</p>
</dd></dl>

<dl class="py function">
<dt id="dogpile.cache.util.length_conditional_mangler">
<code class="sig-prename descclassname">dogpile.cache.util.</code><code class="sig-name descname">length_conditional_mangler</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">length</span></em>, <em class="sig-param"><span class="n">mangler</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.cache.util.length_conditional_mangler" title="Permalink to this definition">¶</a></dt>
<dd><p>a key mangler that mangles if the length of the key is
past a certain threshold.</p>
</dd></dl>

</div>
<div class="section" id="dogpile-core">
<h2>dogpile Core<a class="headerlink" href="#dogpile-core" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="dogpile.Lock">
<em class="property">class </em><code class="sig-prename descclassname">dogpile.</code><code class="sig-name descname">Lock</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mutex</span></em>, <em class="sig-param"><span class="n">creator</span></em>, <em class="sig-param"><span class="n">value_and_created_fn</span></em>, <em class="sig-param"><span class="n">expiretime</span></em>, <em class="sig-param"><span class="n">async_creator</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.Lock" title="Permalink to this definition">¶</a></dt>
<dd><p>Dogpile lock class.</p>
<p>Provides an interface around an arbitrary mutex
that allows one thread/process to be elected as
the creator of a new value, while other threads/processes
continue to return the previous version
of that value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="dogpile.Lock.params.mutex"></span><strong>mutex</strong><a class="paramlink headerlink reference internal" href="#dogpile.Lock.params.mutex">¶</a> – A mutex object that provides <code class="docutils literal notranslate"><span class="pre">acquire()</span></code>
and <code class="docutils literal notranslate"><span class="pre">release()</span></code> methods.</p></li>
<li><p><span class="target" id="dogpile.Lock.params.creator"></span><strong>creator</strong><a class="paramlink headerlink reference internal" href="#dogpile.Lock.params.creator">¶</a> – Callable which returns a tuple of the form
(new_value, creation_time).  “new_value” should be a newly
generated value representing completed state.  “creation_time”
should be a floating point time value which is relative
to Python’s <code class="docutils literal notranslate"><span class="pre">time.time()</span></code> call, representing the time
at which the value was created.  This time value should
be associated with the created value.</p></li>
<li><p><span class="target" id="dogpile.Lock.params.value_and_created_fn"></span><strong>value_and_created_fn</strong><a class="paramlink headerlink reference internal" href="#dogpile.Lock.params.value_and_created_fn">¶</a> – Callable which returns
a tuple of the form (existing_value, creation_time).  This
basically should return what the last local call to the <code class="docutils literal notranslate"><span class="pre">creator()</span></code>
callable has returned, i.e. the value and the creation time,
which would be assumed here to be from a cache.  If the
value is not available, the <a class="reference internal" href="#dogpile.NeedRegenerationException" title="dogpile.NeedRegenerationException"><code class="xref py py-class docutils literal notranslate"><span class="pre">NeedRegenerationException</span></code></a>
exception should be thrown.</p></li>
<li><p><span class="target" id="dogpile.Lock.params.expiretime"></span><strong>expiretime</strong><a class="paramlink headerlink reference internal" href="#dogpile.Lock.params.expiretime">¶</a> – Expiration time in seconds.  Set to
<code class="docutils literal notranslate"><span class="pre">None</span></code> for never expires.  This timestamp is compared
to the creation_time result and <code class="docutils literal notranslate"><span class="pre">time.time()</span></code> to determine if
the value returned by value_and_created_fn is “expired”.</p></li>
<li><p><span class="target" id="dogpile.Lock.params.async_creator"></span><strong>async_creator</strong><a class="paramlink headerlink reference internal" href="#dogpile.Lock.params.async_creator">¶</a> – A callable.  If specified, this callable will be
passed the mutex as an argument and is responsible for releasing the mutex
after it finishes some asynchronous value creation.  The intent is for
this to be used to defer invocation of the creator callable until some
later time.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt id="dogpile.NeedRegenerationException">
<em class="property">class </em><code class="sig-prename descclassname">dogpile.</code><code class="sig-name descname">NeedRegenerationException</code><a class="headerlink" href="#dogpile.NeedRegenerationException" title="Permalink to this definition">¶</a></dt>
<dd><p>An exception that when raised in the ‘with’ block,
forces the ‘has_value’ flag to False and incurs a
regeneration of the value.</p>
</dd></dl>

<dl class="py class">
<dt id="dogpile.util.ReadWriteMutex">
<em class="property">class </em><code class="sig-prename descclassname">dogpile.util.</code><code class="sig-name descname">ReadWriteMutex</code><a class="headerlink" href="#dogpile.util.ReadWriteMutex" title="Permalink to this definition">¶</a></dt>
<dd><p>A mutex which allows multiple readers, single writer.</p>
<p><a class="reference internal" href="#dogpile.util.ReadWriteMutex" title="dogpile.util.ReadWriteMutex"><code class="xref py py-class docutils literal notranslate"><span class="pre">ReadWriteMutex</span></code></a> uses a Python <code class="docutils literal notranslate"><span class="pre">threading.Condition</span></code>
to provide this functionality across threads within a process.</p>
<p>The Beaker package also contained a file-lock based version
of this concept, so that readers/writers could be synchronized
across processes with a common filesystem.  A future Dogpile
release may include this additional class at some point.</p>
<dl class="py method">
<dt id="dogpile.util.ReadWriteMutex.acquire_read_lock">
<code class="sig-name descname">acquire_read_lock</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">wait</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.util.ReadWriteMutex.acquire_read_lock" title="Permalink to this definition">¶</a></dt>
<dd><p>Acquire the ‘read’ lock.</p>
</dd></dl>

<dl class="py method">
<dt id="dogpile.util.ReadWriteMutex.acquire_write_lock">
<code class="sig-name descname">acquire_write_lock</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">wait</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.util.ReadWriteMutex.acquire_write_lock" title="Permalink to this definition">¶</a></dt>
<dd><p>Acquire the ‘write’ lock.</p>
</dd></dl>

<dl class="py method">
<dt id="dogpile.util.ReadWriteMutex.release_read_lock">
<code class="sig-name descname">release_read_lock</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.util.ReadWriteMutex.release_read_lock" title="Permalink to this definition">¶</a></dt>
<dd><p>Release the ‘read’ lock.</p>
</dd></dl>

<dl class="py method">
<dt id="dogpile.util.ReadWriteMutex.release_write_lock">
<code class="sig-name descname">release_write_lock</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.util.ReadWriteMutex.release_write_lock" title="Permalink to this definition">¶</a></dt>
<dd><p>Release the ‘write’ lock.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="dogpile.util.NameRegistry">
<em class="property">class </em><code class="sig-prename descclassname">dogpile.util.</code><code class="sig-name descname">NameRegistry</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">creator</span><span class="p">:</span> <span class="n">Callable<span class="p">[</span><span class="p">[</span><span class="p">…</span><span class="p">]</span><span class="p">, </span>Any<span class="p">]</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dogpile.util.NameRegistry" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates and return an object, keeping it as a
singleton for a certain identifier for as long as its
strongly referenced.</p>
<p>e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyFoo</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="s2">&quot;some important object.&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">identifier</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">identifier</span> <span class="o">=</span> <span class="n">identifier</span>

<span class="n">registry</span> <span class="o">=</span> <span class="n">NameRegistry</span><span class="p">(</span><span class="n">MyFoo</span><span class="p">)</span>

<span class="c1"># thread 1:</span>
<span class="n">my_foo</span> <span class="o">=</span> <span class="n">registry</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;foo1&quot;</span><span class="p">)</span>

<span class="c1"># thread 2</span>
<span class="n">my_foo</span> <span class="o">=</span> <span class="n">registry</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;foo1&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Above, <code class="docutils literal notranslate"><span class="pre">my_foo</span></code> in both thread #1 and #2 will
be <em>the same object</em>.   The constructor for
<code class="docutils literal notranslate"><span class="pre">MyFoo</span></code> will be called once, passing the
identifier <code class="docutils literal notranslate"><span class="pre">foo1</span></code> as the argument.</p>
<p>When thread 1 and thread 2 both complete or
otherwise delete references to <code class="docutils literal notranslate"><span class="pre">my_foo</span></code>, the
object is <em>removed</em> from the <a class="reference internal" href="#dogpile.util.NameRegistry" title="dogpile.util.NameRegistry"><code class="xref py py-class docutils literal notranslate"><span class="pre">NameRegistry</span></code></a> as
a result of Python garbage collection.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><span class="target" id="dogpile.util.NameRegistry.params.creator"></span><strong>creator</strong><a class="paramlink headerlink reference internal" href="#dogpile.util.NameRegistry.params.creator">¶</a> – A function that will create a new
value, given the identifier passed to the <a class="reference internal" href="#dogpile.util.NameRegistry.get" title="dogpile.util.NameRegistry.get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">NameRegistry.get()</span></code></a>
method.</p>
</dd>
</dl>
<dl class="py method">
<dt id="dogpile.util.NameRegistry.get">
<code class="sig-name descname">get</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">identifier</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kw</span><span class="p">:</span> <span class="n">Any</span></em><span class="sig-paren">)</span> &#x2192; Any<a class="headerlink" href="#dogpile.util.NameRegistry.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Get and possibly create the value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="dogpile.util.NameRegistry.get.params.identifier"></span><strong>identifier</strong><a class="paramlink headerlink reference internal" href="#dogpile.util.NameRegistry.get.params.identifier">¶</a> – Hash key for the value.
If the creation function is called, this identifier
will also be passed to the creation function.</p></li>
<li><p><span class="target" id="dogpile.util.NameRegistry.get.params.**kw"></span><strong>**kw</strong><a class="paramlink headerlink reference internal" href="#dogpile.util.NameRegistry.get.params.**kw">¶</a> (<em>*args</em><em>,</em>) – Additional arguments which will
also be passed to the creation function if it is
called.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">API</a><ul>
<li><a class="reference internal" href="#module-dogpile.cache.region">Region</a></li>
<li><a class="reference internal" href="#backend-api">Backend API</a></li>
<li><a class="reference internal" href="#module-dogpile.cache.backends.memory">Backends</a><ul>
<li><a class="reference internal" href="#memory-backends">Memory Backends</a></li>
<li><a class="reference internal" href="#memcached-backends">Memcached Backends</a></li>
<li><a class="reference internal" href="#redis-backends">Redis Backends</a></li>
<li><a class="reference internal" href="#file-backends">File Backends</a></li>
<li><a class="reference internal" href="#proxy-backends">Proxy Backends</a></li>
<li><a class="reference internal" href="#null-backend">Null Backend</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-dogpile.cache.exception">Exceptions</a></li>
<li><a class="reference internal" href="#module-dogpile.cache.plugins.mako_cache">Plugins</a><ul>
<li><a class="reference internal" href="#mako-integration">Mako Integration</a></li>
</ul>
</li>
<li><a class="reference internal" href="#utilities">Utilities</a></li>
<li><a class="reference internal" href="#dogpile-core">dogpile Core</a></li>
</ul>
</li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
  <h4>Previous topic</h4>
  <p class="topless"><a href="core_usage.html"
                        title="previous chapter">dogpile Core</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="changelog.html"
                        title="next chapter">Changelog</a></p>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="changelog.html" title="Changelog"
             >next</a> |</li>
        <li class="right" >
          <a href="core_usage.html" title="dogpile Core"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">dogpile.cache 1.1.1 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">API</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2011-2020 Mike Bayer.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.3.1.
    </div>
  </body>
</html>